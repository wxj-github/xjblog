<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.67">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>XJ-Blog</title><meta name="description" content="">
    <link rel="preload" href="/xjblog/assets/style-82cbce61.css" as="style"><link rel="stylesheet" href="/xjblog/assets/style-82cbce61.css">
    <link rel="modulepreload" href="/xjblog/assets/app-6fcf50f1.js"><link rel="modulepreload" href="/xjblog/assets/小程序.html-1cb9bfc3.js"><link rel="modulepreload" href="/xjblog/assets/小程序.html-dcdb70c2.js"><link rel="prefetch" href="/xjblog/assets/index.html-2320b9e9.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-62e263ac.js" as="script"><link rel="prefetch" href="/xjblog/assets/css.html-4c80896c.js" as="script"><link rel="prefetch" href="/xjblog/assets/flex.html-1426b188.js" as="script"><link rel="prefetch" href="/xjblog/assets/grid.html-0f729e2f.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-ded121db.js" as="script"><link rel="prefetch" href="/xjblog/assets/less.html-6a112481.js" as="script"><link rel="prefetch" href="/xjblog/assets/scope.html-dc2a0b81.js" as="script"><link rel="prefetch" href="/xjblog/assets/tailwind.html-fa555d04.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-5752af20.js" as="script"><link rel="prefetch" href="/xjblog/assets/bibao.html-aa4d620f.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-aa0f78e5.js" as="script"><link rel="prefetch" href="/xjblog/assets/js.html-e4e97a5c.js" as="script"><link rel="prefetch" href="/xjblog/assets/jstrash.html-8f9c2822.js" as="script"><link rel="prefetch" href="/xjblog/assets/TypeScript.html-5672f6be.js" as="script"><link rel="prefetch" href="/xjblog/assets/centOS-mysql.html-850f04a1.js" as="script"><link rel="prefetch" href="/xjblog/assets/CentOs安装mysql5.7.html-2b49dce8.js" as="script"><link rel="prefetch" href="/xjblog/assets/del_package_quick.html-8b384235.js" as="script"><link rel="prefetch" href="/xjblog/assets/express脚手架新建项目.html-7dcab6d9.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-d3f5453d.js" as="script"><link rel="prefetch" href="/xjblog/assets/nginx.html-10c449c2.js" as="script"><link rel="prefetch" href="/xjblog/assets/node-cors解决跨域.html-08172e34.js" as="script"><link rel="prefetch" href="/xjblog/assets/package.html-e473e5a6.js" as="script"><link rel="prefetch" href="/xjblog/assets/快速打包部署.html-d358c00c.js" as="script"><link rel="prefetch" href="/xjblog/assets/antd-antdPro.html-6a7ae3a2.js" as="script"><link rel="prefetch" href="/xjblog/assets/baiduMap.html-e87d3acf.js" as="script"><link rel="prefetch" href="/xjblog/assets/hooks.html-534d4e22.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-836ae580.js" as="script"><link rel="prefetch" href="/xjblog/assets/react.html-61eaccd6.js" as="script"><link rel="prefetch" href="/xjblog/assets/g2.html-e7881cb2.js" as="script"><link rel="prefetch" href="/xjblog/assets/git.html-e83da039.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-2e88778c.js" as="script"><link rel="prefetch" href="/xjblog/assets/mongodb.html-a6bf983c.js" as="script"><link rel="prefetch" href="/xjblog/assets/network.html-3692f09e.js" as="script"><link rel="prefetch" href="/xjblog/assets/nuxt-Vuex.html-8a106ffb.js" as="script"><link rel="prefetch" href="/xjblog/assets/nuxt笔记.html-e8b0231b.js" as="script"><link rel="prefetch" href="/xjblog/assets/print.html-70bb765a.js" as="script"><link rel="prefetch" href="/xjblog/assets/uni-app.html-d71eedf1.js" as="script"><link rel="prefetch" href="/xjblog/assets/vuePress.html-93772d8e.js" as="script"><link rel="prefetch" href="/xjblog/assets/webpack.html-255e041e.js" as="script"><link rel="prefetch" href="/xjblog/assets/websocket.html-984bdb18.js" as="script"><link rel="prefetch" href="/xjblog/assets/xlsx.html-26dddaf0.js" as="script"><link rel="prefetch" href="/xjblog/assets/部署nuxt项目.html-8e91aa6c.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-4cdfc9c8.js" as="script"><link rel="prefetch" href="/xjblog/assets/TypeScript.html-0c0b7c77.js" as="script"><link rel="prefetch" href="/xjblog/assets/defineProperty.html-4bef435b.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-d8eb0dd7.js" as="script"><link rel="prefetch" href="/xjblog/assets/vue2.html-6b28cda9.js" as="script"><link rel="prefetch" href="/xjblog/assets/VUEX.html-2a509512.js" as="script"><link rel="prefetch" href="/xjblog/assets/doit.html-8ebb448e.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-ec34db96.js" as="script"><link rel="prefetch" href="/xjblog/assets/vite.html-6e541edd.js" as="script"><link rel="prefetch" href="/xjblog/assets/vue3.html-71883397.js" as="script"><link rel="prefetch" href="/xjblog/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-f301dcdc.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-2dad9f7a.js" as="script"><link rel="prefetch" href="/xjblog/assets/css.html-8fd74399.js" as="script"><link rel="prefetch" href="/xjblog/assets/flex.html-5d6fc163.js" as="script"><link rel="prefetch" href="/xjblog/assets/grid.html-8c95192b.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-15e51930.js" as="script"><link rel="prefetch" href="/xjblog/assets/less.html-b163e0af.js" as="script"><link rel="prefetch" href="/xjblog/assets/scope.html-2b00b30e.js" as="script"><link rel="prefetch" href="/xjblog/assets/tailwind.html-f4608faa.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-5aa22cd3.js" as="script"><link rel="prefetch" href="/xjblog/assets/bibao.html-6e185429.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-b70b97a4.js" as="script"><link rel="prefetch" href="/xjblog/assets/js.html-4ef7cd59.js" as="script"><link rel="prefetch" href="/xjblog/assets/jstrash.html-6f938127.js" as="script"><link rel="prefetch" href="/xjblog/assets/TypeScript.html-466479bb.js" as="script"><link rel="prefetch" href="/xjblog/assets/centOS-mysql.html-3533629d.js" as="script"><link rel="prefetch" href="/xjblog/assets/CentOs安装mysql5.7.html-f0b50638.js" as="script"><link rel="prefetch" href="/xjblog/assets/del_package_quick.html-82138503.js" as="script"><link rel="prefetch" href="/xjblog/assets/express脚手架新建项目.html-d0bac9df.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-fac93b33.js" as="script"><link rel="prefetch" href="/xjblog/assets/nginx.html-ad76d17a.js" as="script"><link rel="prefetch" href="/xjblog/assets/node-cors解决跨域.html-d919479a.js" as="script"><link rel="prefetch" href="/xjblog/assets/package.html-1680af4c.js" as="script"><link rel="prefetch" href="/xjblog/assets/快速打包部署.html-ba2952ce.js" as="script"><link rel="prefetch" href="/xjblog/assets/antd-antdPro.html-e38b041a.js" as="script"><link rel="prefetch" href="/xjblog/assets/baiduMap.html-38144312.js" as="script"><link rel="prefetch" href="/xjblog/assets/hooks.html-21aa2284.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-49401c60.js" as="script"><link rel="prefetch" href="/xjblog/assets/react.html-fa7d6f46.js" as="script"><link rel="prefetch" href="/xjblog/assets/g2.html-f635db4d.js" as="script"><link rel="prefetch" href="/xjblog/assets/git.html-35552097.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-58ea96b7.js" as="script"><link rel="prefetch" href="/xjblog/assets/mongodb.html-d67af31c.js" as="script"><link rel="prefetch" href="/xjblog/assets/network.html-4c136454.js" as="script"><link rel="prefetch" href="/xjblog/assets/nuxt-Vuex.html-7ec793c9.js" as="script"><link rel="prefetch" href="/xjblog/assets/nuxt笔记.html-46cec443.js" as="script"><link rel="prefetch" href="/xjblog/assets/print.html-07fa8979.js" as="script"><link rel="prefetch" href="/xjblog/assets/uni-app.html-67e96bd8.js" as="script"><link rel="prefetch" href="/xjblog/assets/vuePress.html-1b689bec.js" as="script"><link rel="prefetch" href="/xjblog/assets/webpack.html-ae6cb3f0.js" as="script"><link rel="prefetch" href="/xjblog/assets/websocket.html-eff628a7.js" as="script"><link rel="prefetch" href="/xjblog/assets/xlsx.html-75689a7d.js" as="script"><link rel="prefetch" href="/xjblog/assets/部署nuxt项目.html-5dfe4e9c.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-ffdad007.js" as="script"><link rel="prefetch" href="/xjblog/assets/TypeScript.html-481bf9b4.js" as="script"><link rel="prefetch" href="/xjblog/assets/defineProperty.html-fd1c2a46.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-73649cac.js" as="script"><link rel="prefetch" href="/xjblog/assets/vue2.html-3bf7c541.js" as="script"><link rel="prefetch" href="/xjblog/assets/VUEX.html-94e0c565.js" as="script"><link rel="prefetch" href="/xjblog/assets/doit.html-930cb93b.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-6426e621.js" as="script"><link rel="prefetch" href="/xjblog/assets/vite.html-f25a706d.js" as="script"><link rel="prefetch" href="/xjblog/assets/vue3.html-281128a9.js" as="script"><link rel="prefetch" href="/xjblog/assets/404.html-0040bf83.js" as="script"><link rel="prefetch" href="/xjblog/assets/style-e9220a04.js" as="script"><link rel="prefetch" href="/xjblog/assets/docsearch-1d421ddb.js" as="script"><link rel="prefetch" href="/xjblog/assets/index-82585c84.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/xjblog/" class=""><img class="logo" src="/xjblog/images/t.png" alt="XJ-Blog"><span class="site-name can-hide">XJ-Blog</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/xjblog/html" class="" aria-label="Html"><!--[--><!--]--> Html <!--[--><!--]--></a></div><div class="navbar-item"><a href="/xjblog/css" class="" aria-label="Css"><!--[--><!--]--> Css <!--[--><!--]--></a></div><div class="navbar-item"><a href="/xjblog/js" class="" aria-label="Javascript"><!--[--><!--]--> Javascript <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue"><span class="title">Vue</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue"><span class="title">Vue</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/xjblog/vue2" class="" aria-label="Vue2"><!--[--><!--]--> Vue2 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/xjblog/vue3" class="" aria-label="Vue3"><!--[--><!--]--> Vue3 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/xjblog/react" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></div><div class="navbar-item"><a href="/xjblog/node" class="" aria-label="Node.js"><!--[--><!--]--> Node.js <!--[--><!--]--></a></div><div class="navbar-item"><a href="/xjblog/more" class="router-link-active" aria-label="更多"><!--[--><!--]--> 更多 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/xjblog/html" class="" aria-label="Html"><!--[--><!--]--> Html <!--[--><!--]--></a></div><div class="navbar-item"><a href="/xjblog/css" class="" aria-label="Css"><!--[--><!--]--> Css <!--[--><!--]--></a></div><div class="navbar-item"><a href="/xjblog/js" class="" aria-label="Javascript"><!--[--><!--]--> Javascript <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue"><span class="title">Vue</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue"><span class="title">Vue</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/xjblog/vue2" class="" aria-label="Vue2"><!--[--><!--]--> Vue2 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/xjblog/vue3" class="" aria-label="Vue3"><!--[--><!--]--> Vue3 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/xjblog/react" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></div><div class="navbar-item"><a href="/xjblog/node" class="" aria-label="Node.js"><!--[--><!--]--> Node.js <!--[--><!--]--></a></div><div class="navbar-item"><a href="/xjblog/more" class="router-link-active" aria-label="更多"><!--[--><!--]--> 更多 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading"> <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#项目结构-项目初始化-调式基础库-2-14-4" class="router-link-active router-link-exact-active sidebar-item" aria-label="项目结构（项目初始化）： 调式基础库--2.14.4"><!--[--><!--]--> 项目结构（项目初始化）： 调式基础库--2.14.4 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#wxml与html的不同" class="router-link-active router-link-exact-active sidebar-item" aria-label="wxml与html的不同"><!--[--><!--]--> wxml与html的不同 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#wxss与css的不同" class="router-link-active router-link-exact-active sidebar-item" aria-label="wxss与css的不同"><!--[--><!--]--> wxss与css的不同 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#小程序宿主环境" class="router-link-active router-link-exact-active sidebar-item" aria-label="小程序宿主环境"><!--[--><!--]--> 小程序宿主环境 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#像素单位-rpx" class="router-link-active router-link-exact-active sidebar-item" aria-label="像素单位    rpx"><!--[--><!--]--> 像素单位    rpx <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#数据绑定" class="router-link-active router-link-exact-active sidebar-item" aria-label="数据绑定"><!--[--><!--]--> 数据绑定 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#简易的数据双向绑定" class="router-link-active router-link-exact-active sidebar-item" aria-label="简易的数据双向绑定"><!--[--><!--]--> 简易的数据双向绑定 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#事件绑定" class="router-link-active router-link-exact-active sidebar-item" aria-label="事件绑定"><!--[--><!--]--> 事件绑定 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#bind绑定" class="router-link-active router-link-exact-active sidebar-item" aria-label="bind绑定："><!--[--><!--]--> bind绑定： <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#catch绑定" class="router-link-active router-link-exact-active sidebar-item" aria-label="catch绑定："><!--[--><!--]--> catch绑定： <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#capture-绑定捕获阶段" class="router-link-active router-link-exact-active sidebar-item" aria-label="capture-绑定捕获阶段："><!--[--><!--]--> capture-绑定捕获阶段： <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#向事件传参-data" class="router-link-active router-link-exact-active sidebar-item" aria-label="向事件传参：data-*"><!--[--><!--]--> 向事件传参：data-* <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#wxs响应事件" class="router-link-active router-link-exact-active sidebar-item" aria-label="wxs响应事件"><!--[--><!--]--> wxs响应事件 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#条件渲染" class="router-link-active router-link-exact-active sidebar-item" aria-label="条件渲染"><!--[--><!--]--> 条件渲染 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#hidden" class="router-link-active router-link-exact-active sidebar-item" aria-label="hidden"><!--[--><!--]--> hidden <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#列表渲染" class="router-link-active router-link-exact-active sidebar-item" aria-label="列表渲染"><!--[--><!--]--> 列表渲染 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#常用的全局配置项" class="router-link-active router-link-exact-active sidebar-item" aria-label="常用的全局配置项"><!--[--><!--]--> 常用的全局配置项 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#网络请求" class="router-link-active router-link-exact-active sidebar-item" aria-label="网络请求"><!--[--><!--]--> 网络请求 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#wx-request" class="router-link-active router-link-exact-active sidebar-item" aria-label="wx.request( { } )"><!--[--><!--]--> wx.request( { } ) <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#路由跳转" class="router-link-active router-link-exact-active sidebar-item" aria-label="路由跳转"><!--[--><!--]--> 路由跳转 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#声明式导航" class="router-link-active router-link-exact-active sidebar-item" aria-label="声明式导航："><!--[--><!--]--> 声明式导航： <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#后退导航" class="router-link-active router-link-exact-active sidebar-item" aria-label="后退导航："><!--[--><!--]--> 后退导航： <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#编程式导航" class="router-link-active router-link-exact-active sidebar-item" aria-label="编程式导航："><!--[--><!--]--> 编程式导航： <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#下拉刷新" class="router-link-active router-link-exact-active sidebar-item" aria-label="下拉刷新"><!--[--><!--]--> 下拉刷新 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#上拉触底" class="router-link-active router-link-exact-active sidebar-item" aria-label="上拉触底"><!--[--><!--]--> 上拉触底 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#自定义编译模式" class="router-link-active router-link-exact-active sidebar-item" aria-label="自定义编译模式"><!--[--><!--]--> 自定义编译模式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#常用api" class="router-link-active router-link-exact-active sidebar-item" aria-label="常用api"><!--[--><!--]--> 常用api <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#显示loading提示框" class="router-link-active router-link-exact-active sidebar-item" aria-label="显示loading提示框"><!--[--><!--]--> 显示loading提示框 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#设置当前页面标题" class="router-link-active router-link-exact-active sidebar-item" aria-label="设置当前页面标题"><!--[--><!--]--> 设置当前页面标题 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#显示消息提示款" class="router-link-active router-link-exact-active sidebar-item" aria-label="显示消息提示款"><!--[--><!--]--> 显示消息提示款 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#生命周期函数" class="router-link-active router-link-exact-active sidebar-item" aria-label="生命周期函数："><!--[--><!--]--> 生命周期函数： <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#应用生命周期" class="router-link-active router-link-exact-active sidebar-item" aria-label="应用生命周期："><!--[--><!--]--> 应用生命周期： <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#页面生命周期" class="router-link-active router-link-exact-active sidebar-item" aria-label="页面生命周期："><!--[--><!--]--> 页面生命周期： <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#组件" class="router-link-active router-link-exact-active sidebar-item" aria-label="组件"><!--[--><!--]--> 组件 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#properties" class="router-link-active router-link-exact-active sidebar-item" aria-label="properties"><!--[--><!--]--> properties <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#observers" class="router-link-active router-link-exact-active sidebar-item" aria-label="observers"><!--[--><!--]--> observers <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#纯数据字段" class="router-link-active router-link-exact-active sidebar-item" aria-label="纯数据字段"><!--[--><!--]--> 纯数据字段 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#组件的生命周期" class="router-link-active router-link-exact-active sidebar-item" aria-label="组件的生命周期"><!--[--><!--]--> 组件的生命周期 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#lifetimes节点" class="router-link-active router-link-exact-active sidebar-item" aria-label="lifetimes节点："><!--[--><!--]--> lifetimes节点： <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#组件所在页面的生命周期" class="router-link-active router-link-exact-active sidebar-item" aria-label="组件所在页面的生命周期"><!--[--><!--]--> 组件所在页面的生命周期 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#pagelifetimes节点" class="router-link-active router-link-exact-active sidebar-item" aria-label="pageLifetimes节点："><!--[--><!--]--> pageLifetimes节点： <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#组件插槽" class="router-link-active router-link-exact-active sidebar-item" aria-label="组件插槽"><!--[--><!--]--> 组件插槽 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#父子组件的通信" class="router-link-active router-link-exact-active sidebar-item" aria-label="父子组件的通信"><!--[--><!--]--> 父子组件的通信 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#behaviors" class="router-link-active router-link-exact-active sidebar-item" aria-label="behaviors"><!--[--><!--]--> behaviors <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#使用npm包" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用npm包"><!--[--><!--]--> 使用npm包 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#vant-weapp-小程序ui组件库" class="router-link-active router-link-exact-active sidebar-item" aria-label="Vant Weapp  小程序ui组件库"><!--[--><!--]--> Vant Weapp  小程序ui组件库 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#使用css变量来定制ui组件主题样式" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用css变量来定制ui组件主题样式"><!--[--><!--]--> 使用css变量来定制ui组件主题样式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#api的promise化" class="router-link-active router-link-exact-active sidebar-item" aria-label="api的promise化"><!--[--><!--]--> api的promise化 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#状态管理" class="router-link-active router-link-exact-active sidebar-item" aria-label="状态管理"><!--[--><!--]--> 状态管理 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#在页面中使用" class="router-link-active router-link-exact-active sidebar-item" aria-label="在页面中使用："><!--[--><!--]--> 在页面中使用： <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#在组件中使用" class="router-link-active router-link-exact-active sidebar-item" aria-label="在组件中使用："><!--[--><!--]--> 在组件中使用： <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#分包" class="router-link-active router-link-exact-active sidebar-item" aria-label="分包"><!--[--><!--]--> 分包 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#独立分包" class="router-link-active router-link-exact-active sidebar-item" aria-label="独立分包"><!--[--><!--]--> 独立分包 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#分包预下载" class="router-link-active router-link-exact-active sidebar-item" aria-label="分包预下载"><!--[--><!--]--> 分包预下载 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#自定义tabbar" class="router-link-active router-link-exact-active sidebar-item" aria-label="自定义tabBar"><!--[--><!--]--> 自定义tabBar <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#获取用户基本信息" class="router-link-active router-link-exact-active sidebar-item" aria-label="获取用户基本信息"><!--[--><!--]--> 获取用户基本信息 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#wx-getuserinfo" class="router-link-active router-link-exact-active sidebar-item" aria-label="wx.getUserInfo"><!--[--><!--]--> wx.getUserInfo <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#wx-getuserprofile" class="router-link-active router-link-exact-active sidebar-item" aria-label="wx.getUserProfile"><!--[--><!--]--> wx.getUserProfile <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/more/%E5%B0%8F%E7%A8%8B%E5%BA%8F.html#iconfont的使用" class="router-link-active router-link-exact-active sidebar-item" aria-label="iconfont的使用"><!--[--><!--]--> iconfont的使用 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h2 id="项目结构-项目初始化-调式基础库-2-14-4" tabindex="-1"><a class="header-anchor" href="#项目结构-项目初始化-调式基础库-2-14-4" aria-hidden="true">#</a> 项目结构（项目初始化）： 调式基础库--2.14.4</h2><p><img src="/xjblog/assets/image-20220121221004346-70b4e3a3.png" alt="image-20220121221004346"></p><ul><li><p><strong>sitemap.json</strong>：sitemap的配置文件，用于配置小程序及其页面是否允许被微信索引（搜索）。如果没有此文件则默认为所有页面都允许被索引。详情配置见官方文档。</p></li><li><p><strong>app.js</strong>:整个项目必须要有一个app.js文件，不能改名。里面必须执行App（）函数，且只能调用一次，用于注册整个小程序应用</p></li><li><p><strong>app.json</strong>:小程序的全局配置文件 。</p></li></ul><p><img src="/xjblog/assets/image-20220121222248830-7e93e6b4.png" alt="image-20220121222248830"></p><p><strong>pages</strong>对应项目里的页面路经，注意最前面没有 /</p><p><strong>entryPagePath</strong>配置项目初始页。如果没有这个配置项，小程序会默认去找pages数组里的第一个路经页面为首页。</p><p><a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#window" target="_blank" rel="noopener noreferrer">window里的是 用于设置小程序的状态栏、导航条、标题、窗口背景色。<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><strong>style</strong>是小程序的样式版本号</p><p><strong>sitemapLocation</strong>就是小程序sitemap文件路经</p><p><strong>lazyCodeLoading</strong>配置自定义组件代码按需注入,只有requiredComponents，代表按需注入</p><ul><li><strong>app.wxss</strong>:全局的样式文件。</li></ul><p>注意要配置,因为小程序基本使用flex布局，需要设定根标签高度为百分百</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>page{
	height:100%;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/xjblog/assets/image-20220121223640953-c32c4f1f.png" alt="image-xxx"></p><p>每个页面文件夹里都含有js,json,wxml,wxss四个文件。</p><p>js文件里都必须执行Page（{}）函数，用于注册当前页面的实例</p><p>json文件中可以配置页面头标题，背景色，直接配置即可，不需要像全局的json文件那样写个window对象</p><h2 id="wxml与html的不同" tabindex="-1"><a class="header-anchor" href="#wxml与html的不同" aria-hidden="true">#</a> wxml与html的不同</h2><ol><li><p>标签名称不同</p><ul><li><p>view == div</p></li><li><p>text == span</p></li><li><p>image == img</p></li><li><p>navigator == a</p></li></ul></li><li><p>标签属性节点不同</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
===
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/pages/home/home<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigator</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>提供了类似vue的模板语法</p></li></ol><ul><li>数据绑定</li><li>列表渲染</li><li>条件渲染</li></ul><h2 id="wxss与css的不同" tabindex="-1"><a class="header-anchor" href="#wxss与css的不同" aria-hidden="true">#</a> wxss与css的不同</h2><ol><li>新增了rpx尺寸单位，用于适应不同的屏幕大小</li><li>提供了全局样式和局部样式 <ul><li>根目录的app.wxss作用于所有页面</li><li>局部页面的wxss样式只对当前页面生效</li></ul></li><li>wxss仅支持部分css选择器（过于生僻的选择器不要使用）</li></ol><h2 id="小程序宿主环境" tabindex="-1"><a class="header-anchor" href="#小程序宿主环境" aria-hidden="true">#</a> 小程序宿主环境</h2><p>小程序的宿主环境是基于微信客户端的。</p><p>小程序宿主环境包含的内容：</p><ol><li>通信模型 <ul><li>小程序通信的主体是渲染层和逻辑层。wxml和wxss工作在渲染层，js脚本工作在逻辑层</li><li>小程序的通信模型分为两部分 <ol><li>渲染层和逻辑层的通信是由微信客户端进行的转发</li><li>逻辑层和第三方服务器的通信也是由微信客户端转发</li></ol></li></ul></li><li>运行机制 <ol><li>下载小程序的代码包到本地</li><li>解析app.json全局配置文件</li><li>执行app.js小程序入口文件，调用App（）创建小程序实例</li><li>渲染小程序首页 <ol><li>解析页面的json配置文件</li><li>加载页面的wxml和wxss样式</li><li>执行页面的js文件，调用Page（）创建页面实例</li><li>渲染完成</li></ol></li></ol></li><li>组件 <ol><li>常用的视图容器类组件 <ul><li>view。类似于div，是个块级元素。</li><li>scroll-view。可滚动的视图区域，常用于实现滚动列表。需要设置scroll-x，scroll-y来允许滚动。竖向滚动时，必须设置固定高度。</li><li>swiper、swiper-item。轮播图。</li></ul></li><li>基础内容组件 <ul><li>text</li><li>rich-text。通过设置nodes=”string“，可以将html字符串渲染成html结构</li></ul></li><li>其他常用组件 <ul><li>button 通过open-type属性可以调用微信的其他功能（客服、转发、获取用户授权、获取用户信息等）</li><li>image 默认宽300px，高240px。通过mode属性指定图片的缩放、裁剪 <ul><li>scaleToFill 默认值。不保持纵横比缩放图片，填满整个image标签。</li><li>aspectFit 保持纵横比。使图片的长边能完全显示出来，可以完整的显示图片</li><li>aspectFill 保持纵横比，使图片的短边能完全显示出来，通常只在一个方向是完整的，另一个方向会截取。</li><li>widthFix 宽度固定，高度自动变化。保持宽高比。</li><li>heightFix 高度固定，宽度自动变化。保持宽高比。</li></ul></li><li>navigator 页面导航组件类似于a标签</li></ul></li></ol></li><li>API <ol><li>事件监听Api。以on开头，如wx.onWindowResize（function callback）监听窗口尺寸变化的事件</li><li>同步Api。以Sync结尾的Api都是同步Api。执行结果通过函数返回值直接获取。如wx.setStorageSync（‘key’，‘value’）向本地存储写入内容</li><li>异步Api。需要通过success、fail、complete接受调用结果。如wx.request（）发起网络请求，通过success回调函数接受数据。</li></ol></li></ol><h2 id="像素单位-rpx" tabindex="-1"><a class="header-anchor" href="#像素单位-rpx" aria-hidden="true">#</a> 像素单位 rpx</h2><p>任何设备的宽度都为750rpx，而iPhone6s的实际宽度像素是375px，</p><p>想要设置一个宽高都为 X px的块时，则width为750*X / 375 rpx。</p><p>即750÷设备宽度像素×所需长度</p><p>换成其他设备时，也能等比例缩放进行适配。</p><h2 id="数据绑定" tabindex="-1"><a class="header-anchor" href="#数据绑定" aria-hidden="true">#</a> 数据绑定</h2><p>初始化的数据在Page的data里</p><p><img src="/xjblog/assets/image-20220122210336728-f92b2a1b.png" alt="image-20220122210336728"></p><p>在wxml中用来使用变量，和vue一致的插值表达式。</p><p><strong>动态绑定属性</strong>：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{imgSrc}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在js页面，this为当前页面实例。在js页中使用变量则是this.data.xxx</p><p>修改变量则使用</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

	<span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token string">&#39;xxxx&#39;</span>
	<span class="token string-property property">&#39;obj.name&#39;</span><span class="token operator">:</span><span class="token string">&#39;name&#39;</span>  <span class="token comment">//还可以直接对对象的某个属性修改</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>并且这个api是同步的。</p><p>而在react中，this.setState在自身的生命周期钩子函数中是异步的，在setTimeout或其他js的原生绑定事件中是同步的。而hook中的setXXX在任何情况下都是异步的</p><p>在vue中，在script里使用变量是this.xxx，修改变量是this.xxx=xxx。</p><p>小程序并没有实现数据的双向绑定。</p><h3 id="简易的数据双向绑定" tabindex="-1"><a class="header-anchor" href="#简易的数据双向绑定" aria-hidden="true">#</a> 简易的数据双向绑定</h3><p><strong>基础库 2.9.3 开始支持</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name"><span class="token namespace">model:</span>myData</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{msg}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!--输入框的值就会和msg绑定，修改输入框的值，wxml里所有绑定了msg的位置会一同更新--&gt;</span>
<span class="token comment">&lt;!--但是不能data路径，如下--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name"><span class="token namespace">model:</span>myData</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{test.a}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="事件绑定" tabindex="-1"><a class="header-anchor" href="#事件绑定" aria-hidden="true">#</a> 事件绑定</h2><p><a href="https://developers.weixin.qq.com/ebook?action=get_post_info&amp;volumn=1&amp;lang=zh_CN&amp;book=miniprogram&amp;docid=000846df9a03909b0086a50025180a" target="_blank" rel="noopener noreferrer">事件绑定--微信官方文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>事件流的三个阶段：</p><p>1.捕获（从外向内）</p><p>2.执行目标阶段</p><p>3.冒泡（从内向外）</p><p>冒泡事件：当一个组件上的事件被触发后，该事件会向父节点传递。</p><p>非冒泡事件：当一个组件上的事件被触发后，该事件不会向父节点传递。</p><p><strong>小程序中常用的事件</strong>：tap（短触，类似于click）、input（文本输入事件）、change（状态改变时触发）</p><h3 id="bind绑定" tabindex="-1"><a class="header-anchor" href="#bind绑定" aria-hidden="true">#</a> bind绑定：</h3><p>事件绑定不会阻止冒泡事件向上传递。</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleClick<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>   <span class="token comment">&lt;!-- 或者  &lt;view bind:tap=&quot;handleClick&quot;&gt;    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>Test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">bindinput</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleinput<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{msg}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token string">&#39;xxx&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;ccc&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">handleinput</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;e&#39;</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
        <span class="token comment">//e.detail.value是变化后的最新值</span>
        <span class="token comment">//实现与输入框的双向绑定</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">msg</span><span class="token operator">:</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="catch绑定" tabindex="-1"><a class="header-anchor" href="#catch绑定" aria-hidden="true">#</a> catch绑定：</h3><p>事件绑定会阻止冒泡事件向上传递。</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">catchtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleClick<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>Test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="capture-绑定捕获阶段" tabindex="-1"><a class="header-anchor" href="#capture-绑定捕获阶段" aria-hidden="true">#</a> capture-绑定捕获阶段：</h3><p>bind和catch前还可以加上capture-来表示捕获阶段。</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span>
  <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>outer<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">bind:</span>touchstart</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleTap1<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">capture-bind:</span>touchstart</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleTap2<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
  outer view
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span>
    <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inner<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">bind:</span>touchstart</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleTap3<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">capture-bind:</span>touchstart</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleTap4<span class="token punctuation">&quot;</span></span>
  <span class="token punctuation">&gt;</span></span>
    inner view
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>点击 inner view 会先后调用handleTap2、handleTap4、handleTap3、handleTap1。</p><p>如果将上面代码中的第一个capture-bind改为capture-catch，将只触发handleTap2(<strong>capture-catch将中断捕获阶段和取消冒泡阶段</strong>)</p><h3 id="向事件传参-data" tabindex="-1"><a class="header-anchor" href="#向事件传参-data" aria-hidden="true">#</a> 向事件传参：data-*</h3><p>xxx可以为任意值</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">catchtap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleClick<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-hi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>  
    /**		data-hi=&quot;{{ msg }}&quot;     使用变量时  **/  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>Test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>获取值：event.target.dataset.xxx || event.currentTarget.dataset.xxx</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  
    <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">msg</span><span class="token operator">:</span><span class="token string">&#39;xxx&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;event&#39;</span>，event<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/xjblog/assets/image-20220122220355260-9c312091.png" alt=""></p><h3 id="wxs响应事件" tabindex="-1"><a class="header-anchor" href="#wxs响应事件" aria-hidden="true">#</a> wxs响应事件</h3><p><em>wxs文件是小程序中的逻辑文件，它和wxml结合使用。</em><em>不同于js， wxs可以直接作用到视图层，而不需要进行视图层和逻辑层的setData数据交互；</em><em>因为这个特性，wxs非常适合应用于优化小程序的频繁交互操作中；</em></p><p>在ios设备，wxs比JavaScript代码快2~20倍，在android设备几乎无异。</p><p>典型的应用场景就是过滤器</p><p><strong>限制：</strong></p><ul><li><p>wxs不支持es6，如let、const、展开运算符、箭头函数。<strong>变量首字符必须是字母或下划线</strong></p></li><li><p>wxs遵循CommonJS规范</p></li><li><p>wxs的函数<strong>不能做事件的回调</strong>，如给button绑定事件。</p></li><li><p>wxs不能调用js中的函数</p></li><li><p>wxs不能调用wx提供的api</p></li></ul><p><strong>内联wxs脚本：</strong></p><p>wxs代码可以编写在wxml文件中的wxs标签内，<strong>每个wxs标签必须提供module属性</strong>，用来指定wxs的模块名称。</p><p><img src="/xjblog/assets/image-20220712172540385-c341d6ed.png" alt="image-20220712172540385"></p><p><strong>外联wxs脚本：</strong></p><p>代码编写在wxs文件中。外联引入<strong>必须提供module和src属性，而且必须是相对路径</strong></p><p><img src="/xjblog/assets/image-20220712172944255-eb9902ee.png" alt="image-20220712172944255"></p><p><img src="/xjblog/assets/image-20220712173226747-9cc56341.png" alt="image-20220712173226747"></p><h2 id="条件渲染" tabindex="-1"><a class="header-anchor" href="#条件渲染" aria-hidden="true">#</a> 条件渲染</h2><p>wx:if</p><p>wx:elif</p><p>wx:else</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token comment">&lt;!--pages/test/test.wxml--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserInfo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">bindgetuserinfo</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleGetInfo<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{!userInfo.nickName}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>获取用户信息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name"><span class="token namespace">wx:</span>else</span><span class="token punctuation">&gt;</span></span>{{userInfo.nickName}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对应的vue是：</p><p>v-if 、v-else-if 、v-else</p><p><strong>结合block标签</strong>，实现多个组件的显隐。block标签类似于vue中的template，只做包裹作用，不会在页面中渲染</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name">wx-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{true}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="hidden" tabindex="-1"><a class="header-anchor" href="#hidden" aria-hidden="true">#</a> hidden</h3><p>也是控制元素的显隐。<strong>为true时隐藏，为false时展示</strong></p><p>wx-if和hidden的区别就是v-if和v-show的区别</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{false}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="列表渲染" tabindex="-1"><a class="header-anchor" href="#列表渲染" aria-hidden="true">#</a> 列表渲染</h2><p><strong>wx:for</strong></p><p><strong>wx:for-index:修改index索引变量名</strong></p><p><strong>wx:for-item：修改item索引值变量名</strong></p><p><strong>wx:key : 类似于vue中的：key，提高渲染效率,不需要插值语法。没有唯一字段时可以用index，如果修改了index索引名，就用修改后的索引名</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{arr}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>{{index}}:{{item.value}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--index为子项索引，item为子项的值--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

 <span class="token comment">&lt;!--手动指定index和item变量名--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{{arr}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>for-index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>idx<span class="token punctuation">&quot;</span></span>  <span class="token attr-name"><span class="token namespace">wx:</span>for-item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>itemName<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>idx<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>{{idx}}:{{itemName.value}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--idx为子项索引，itemName为子项的值--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">arr</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span>
            <span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">value</span><span class="token operator">:</span><span class="token number">1</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
            <span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token literal-property property">value</span><span class="token operator">:</span><span class="token number">2</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="常用的全局配置项" tabindex="-1"><a class="header-anchor" href="#常用的全局配置项" aria-hidden="true">#</a> 常用的全局配置项</h2><ol><li>pages <ul><li>记录当前小程序页面的存放路径</li></ul></li><li><strong>window</strong><ul><li>设置小程序窗口外观</li></ul></li><li><strong>tabBar</strong><ul><li>设置小程序底部tabBar效果</li></ul></li><li>style <ul><li>是否使用新版组件样式</li></ul></li></ol><p><strong>window：</strong></p><p><img src="/xjblog/assets/image-20220704215957103-8f8dc14e.png" alt="image-20220704215957103"></p><p><img src="/xjblog/assets/image-20220704220102793-d3082f12.png" alt="image-20220704220102793"></p><p><strong>tabBar: 又分为顶部tabBar和底部tabBar</strong></p><p>tabBar只能配置<strong>最少两个，最多五个</strong>tabBar页签。</p><p>渲染顶部tabBar时，不显示icon，只显示文本。</p><p><img src="/xjblog/assets/image-20220704221652773-b3536f01.png" alt="image-20220704221652773"></p><p>tabBar主要配置项：</p><p><img src="/xjblog/assets/image-20220704221749231-4f4a71eb.png" alt="image-20220704221749231"></p><p>其中list的配置项：</p><p><img src="/xjblog/assets/image-20220704221859978-7eedc72f.png" alt="image-20220704221859978"></p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;tabBar&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;list&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span><span class="token string">&quot;pages/index/index&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;iconPath&quot;</span><span class="token operator">:</span><span class="token string">&quot;xx&quot;</span><span class="token punctuation">,</span>     icon 大小限制为 40kb，建议尺寸为 81px * 81px，不支持网络图片。
                <span class="token property">&quot;selectedIconPath&quot;</span><span class="token operator">:</span><span class="token string">&quot;xx&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span><span class="token string">&quot;pages/two/two&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;two&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>注意</strong>：tabBar的页面在pages配置项里，任意一个tabBar页必须排在第一，否则不显示。（待测试）</p><h2 id="网络请求" tabindex="-1"><a class="header-anchor" href="#网络请求" aria-hidden="true">#</a> 网络请求</h2><p>小程序官方对数据接口的限制：</p><ul><li>只能请求https的接口</li><li>必须将接口的域名添加到信任列表中</li></ul><p>注意事项：</p><ul><li>域名只支持https协议</li><li>域名不能使用ip地址或localhost</li><li>域名必须经过icp备案</li></ul><p>配置合法域名步骤：</p><p>登录微信小程序管理后台（网页）==》开发设置==》服务器域名==》修改request合法域名</p><p>平时开发也可以在本地设置中打开不校验合法域名和https证书的设置。</p><p>跨域问题<strong>只存在</strong>基于浏览器的web开发中。因为小程序的<strong>宿主环境</strong>是微信客户端，所以没有跨域问题。</p><h3 id="wx-request" tabindex="-1"><a class="header-anchor" href="#wx-request" aria-hidden="true">#</a> wx.request( { } )</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>wx<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>      <span class="token comment">//请求地址</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>   <span class="token comment">//请求方法.get,post</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>   <span class="token comment">//发送数据</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    <span class="token comment">//请求成功的回调</span>
        
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="路由跳转" tabindex="-1"><a class="header-anchor" href="#路由跳转" aria-hidden="true">#</a> 路由跳转</h2><h3 id="声明式导航" tabindex="-1"><a class="header-anchor" href="#声明式导航" aria-hidden="true">#</a> 声明式导航：</h3><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token comment">&lt;!--导航到tabBar页面，需要指定url属性和open-type属性。--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/pages/message/message<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>switchTab<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigator</span><span class="token punctuation">&gt;</span></span> 
<span class="token comment">&lt;!--url必须以/开头。open-tupe表示跳转方式，必须未switchTab--&gt;</span>

<span class="token comment">&lt;!--导航到非tabBar页面,open-type为navigate。这个可以省略不写--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/pages/info/info<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>navigate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigator</span><span class="token punctuation">&gt;</span></span> 

<span class="token comment">&lt;!--传参拼接在url上,参数通过onLoad函数的第一个参数接收。一般接收后setData到data中，可以供其他函数使用--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/pages/info/info?name=test&amp;age=16<span class="token punctuation">&quot;</span></span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>navigate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigator</span><span class="token punctuation">&gt;</span></span> 

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="后退导航" tabindex="-1"><a class="header-anchor" href="#后退导航" aria-hidden="true">#</a> 后退导航：</h3><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token comment">&lt;!--返回上级或多级页面，需要指定open-type为navigateBack，delta的值必须为数字,delta默认为1--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>navigator</span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>navigateBack<span class="token punctuation">&quot;</span></span> <span class="token attr-name">delta</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>navigator</span><span class="token punctuation">&gt;</span></span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="编程式导航" tabindex="-1"><a class="header-anchor" href="#编程式导航" aria-hidden="true">#</a> 编程式导航：</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>wx<span class="token punctuation">.</span><span class="token function">switchTab</span><span class="token punctuation">(</span><span class="token punctuation">{</span>     <span class="token comment">//跳转到 tabBar 页面，并关闭其他所有非 tabBar 页面</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">&quot;/pages/home/home?name=xxx&amp;age=19&quot;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>   <span class="token comment">//成功回调</span>
    <span class="token function-variable function">fail</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>	<span class="token comment">//失败回调</span>
    <span class="token function-variable function">complete</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span>		<span class="token comment">//不论成功失败都会执行的回调</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


wx<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    <span class="token comment">//这个方法的特点是保留当前页面并跳转，即左上角能返回到原页面。但不允许跳转到tabbar页面</span>
	<span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>   <span class="token comment">//地址必须加根路径/ ，否则会判定为相对路经</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

wx<span class="token punctuation">.</span><span class="token function">navigateBack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">delta</span><span class="token operator">:</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span><span class="token comment">//返回页面数，大于现有页面数则回到首页，默认为1</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


wx<span class="token punctuation">.</span><span class="token function">redirectTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    <span class="token comment">//这个方法的特点是关闭当前页面并跳转。左上角原本的返回变成回到主页。但不允许跳转到tabbar页面</span>
	<span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


wx<span class="token punctuation">.</span><span class="token function">reLaunch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>	<span class="token comment">//关闭所有页面，打开到某个页面</span>
	<span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="下拉刷新" tabindex="-1"><a class="header-anchor" href="#下拉刷新" aria-hidden="true">#</a> 下拉刷新</h2><p>在json文件中设置enablePullDownRefresh为true开启下拉刷新。</p><p>backgroundColor：&quot;#efefef&quot; 背景色</p><p>backgroundTextColor：&quot;dark&quot; loading颜色</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">onPullDownRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//监听下拉刷新事件</span>
    wx<span class="token punctuation">.</span><span class="token function">stopPullDownRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//需要手动调用停止刷新</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="上拉触底" tabindex="-1"><a class="header-anchor" href="#上拉触底" aria-hidden="true">#</a> 上拉触底</h2><p>通过手指上滑操作，从而加载更多数据的行为。</p><p>可以在json文件中配置onReachBottomDistance配置上拉触底触发的距离。默认为50px</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">onReachBottom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//监听上拉触底事件</span>
    wx<span class="token punctuation">.</span><span class="token function">stopPullDownRefresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//需要手动调用停止刷新</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对上拉触底进行节流：</p><ol><li>data中设置一个loading值，默认为false</li><li>在请求函数开头setData loading为true，complete里setData loading为false</li><li>在onReachBottom里判断loading的值，为false才去执行请求函数</li></ol><p><strong>分页请求时，判断数据是否请求完毕：</strong></p><p>当currentPage X pageSize &lt; total 时，说明下一页存在数据，可进行下一页数据请求操作。</p><p>如：共77条数据，若每页十条，则可分8页。</p><p>8x10&gt;77,所以没有下一页数据了。</p><h2 id="自定义编译模式" tabindex="-1"><a class="header-anchor" href="#自定义编译模式" aria-hidden="true">#</a> 自定义编译模式</h2><p>每次修改页面后，重新编译都会回到首页，如果是调试其他页面会非常麻烦。</p><p>只需要修改开发者工具的编译模式，自己修改即可</p><p><img src="/xjblog/assets/image-20220710221001283-989904fd.png" alt="image-20220710221001283"></p><h2 id="常用api" tabindex="-1"><a class="header-anchor" href="#常用api" aria-hidden="true">#</a> 常用api</h2><h3 id="显示loading提示框" tabindex="-1"><a class="header-anchor" href="#显示loading提示框" aria-hidden="true">#</a> 显示loading提示框</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>wx<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">{</span>     <span class="token comment">//显示loading提示框，需要主动调用wx.hideLoading才能关闭。一般在请求中的complete回调调用关闭的方法</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>	<span class="token comment">//提示内容</span>
    <span class="token literal-property property">mask</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>	<span class="token comment">//是否显示透明蒙层，防止触摸穿透，默认为false</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>  
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="设置当前页面标题" tabindex="-1"><a class="header-anchor" href="#设置当前页面标题" aria-hidden="true">#</a> 设置当前页面标题</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function-variable function">onReady</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	wx<span class="token punctuation">.</span><span class="token function">setNavigationBarTitle</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>query<span class="token punctuation">.</span>name   
        <span class="token comment">//一般是接收路由跳转传参的字段做动态标题，options参数需要在onLoad生命周期接收并存储到data中。</span>
        <span class="token comment">//在onReady中动态修改标题</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="显示消息提示款" tabindex="-1"><a class="header-anchor" href="#显示消息提示款" aria-hidden="true">#</a> 显示消息提示款</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>wx<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>  <span class="token comment">//必填</span>
	<span class="token literal-property property">icon</span><span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span><span class="token comment">//图标，默认success，不展示写none</span>
    <span class="token literal-property property">image</span><span class="token operator">:</span><span class="token string">&#39;&#39;</span><span class="token punctuation">,</span><span class="token comment">//自定义图标本地路径，优先级高于icon</span>
    <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">1500</span><span class="token punctuation">,</span>  <span class="token comment">//提示延迟时间，默认1500ms</span>
    <span class="token literal-property property">mask</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">//透明蒙层</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="生命周期函数" tabindex="-1"><a class="header-anchor" href="#生命周期函数" aria-hidden="true">#</a> 生命周期函数：</h2><h3 id="应用生命周期" tabindex="-1"><a class="header-anchor" href="#应用生命周期" aria-hidden="true">#</a> 应用生命周期：</h3><p>小程序启动==》运行==》销毁</p><p>应用生命周期函数在app.js中声明</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">//小程序初始化完成时执行，全局只触发一次，可以坐一些初始化操作</span>
    <span class="token function-variable function">onLaunch</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//小程序启动或从后台进入前台时触发</span>
    <span class="token function-variable function">onShow</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//小程序从前台进入后台时触发</span>
    <span class="token function-variable function">onHide</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//错误监听函数</span>
    <span class="token function-variable function">onError</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//页面不存在监听函数</span>
    <span class="token function-variable function">onPageNotFound</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        wx<span class="token punctuation">.</span><span class="token function">redirectTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;pages/...&#39;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span> 
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//开发者可以添加任意的函数或数据变量到 Object 参数中，用 this 可以访问</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="页面生命周期" tabindex="-1"><a class="header-anchor" href="#页面生命周期" aria-hidden="true">#</a> 页面生命周期：</h3><p>页面加载==》渲染==》销毁</p><p>页面生命周期在页面的js文件中声明</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
   * 生命周期函数--监听页面加载，一个页面只调用一次
   */</span>
  <span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token doc-comment comment">/**
   * 生命周期函数--监听页面初次渲染完成
   */</span>
  <span class="token function-variable function">onReady</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token doc-comment comment">/**
   * 生命周期函数--监听页面显示
   */</span>
  <span class="token function-variable function">onShow</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token doc-comment comment">/**
   * 生命周期函数--监听页面隐藏
   */</span>
  <span class="token function-variable function">onHide</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token doc-comment comment">/**
   * 生命周期函数--监听页面卸载
   */</span>
  <span class="token function-variable function">onUnload</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token doc-comment comment">/**
   * 页面相关事件处理函数--监听用户下拉动作
   */</span>
  <span class="token function-variable function">onPullDownRefresh</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token doc-comment comment">/**
   * 页面上拉触底事件的处理函数
   */</span>
  <span class="token function-variable function">onReachBottom</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token doc-comment comment">/**
   * 用户点击右上角分享
   */</span>
  <span class="token function-variable function">onShareAppMessage</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="组件" tabindex="-1"><a class="header-anchor" href="#组件" aria-hidden="true">#</a> 组件</h2><p>在根目录创建名为components的文件夹，在里面新建一个文件夹，右键点击新建component即可创建组件对应的文件。</p><p>引用组件又分为全局引用和局部引用，和之前的一样，配置项分别写在app.json中和页面.json文件中。</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;usingComponents&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;my-test&quot;</span><span class="token operator">:</span><span class="token string">&quot;/components/test/test&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">//在wxml页面中使用组件</span>
&lt;my-test&gt;&lt;/my-test&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>组件和页面的不同：</p><ul><li>组件的json文件必须声明属性&quot;component&quot;:true</li><li>组件的js文件调用的是Component()函数，页面调用的是Page（）</li><li>组件的事件处理函数需要定义到methods节点中。</li></ul><p>组件和页面的样式相互隔离，互不干扰（包裹app.wxss）。<strong>但是只有类选择器不受干扰，id、属性、标签选择器还是会污染。</strong></p><p>但有时希望外界控制内部的样式，可以修改styleIsolation修改样式隔离。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//组件.js文件</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">styleIsolation</span><span class="token operator">:</span><span class="token string">&#39;isolated&#39;</span><span class="token punctuation">,</span><span class="token comment">//isolated启用样式隔离,默认值</span>
        <span class="token comment">//apply-shared表示页面wxss样式将影响自定义组件，但组件的的样式不会影响到页面的</span>
        <span class="token comment">//shared表示互相影响</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">//或在组件.json文件中</span>
<span class="token punctuation">{</span>
    <span class="token string-property property">&quot;styleIsolation&quot;</span><span class="token operator">:</span><span class="token string">&quot;isolated&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="properties" tabindex="-1"><a class="header-anchor" href="#properties" aria-hidden="true">#</a> properties</h3><p>用于接收外界传递到组件中的数据。data和properties都是可读可写的。并且this.data===this.properties，</p><p>所以同样的可以用setData来更新properties的值</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">properties</span><span class="token operator">:</span><span class="token punctuation">{</span>   <span class="token comment">//定义的属性在js文中中通过this.properties.xxx调用</span>
        <span class="token literal-property property">max</span><span class="token operator">:</span><span class="token punctuation">{</span>
              <span class="token comment">//完整声明方式</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span>Number<span class="token punctuation">,</span> <span class="token comment">//String Number Boolean Object Array 其一，也可以为 null 表示不限制类型</span>
            <span class="token literal-property property">value</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span>   <span class="token comment">//默认值</span>
            <span class="token function-variable function">observer</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newVal<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        		<span class="token comment">// 属性值变化时执行</span>
      		<span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">max</span><span class="token operator">:</span>Number  <span class="token comment">//简写</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//多数情况下，属性最好指定一个确切的类型。这样，在 WXML 中以字面量指定属性值时，值可以获得一个确切的类型</span>
<span class="token comment">//这里的10就是number类型的而非string</span>
<span class="token operator">&lt;</span>test max<span class="token operator">=</span><span class="token string">&quot;10&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>test<span class="token operator">&gt;</span>   
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="observers" tabindex="-1"><a class="header-anchor" href="#observers" aria-hidden="true">#</a> observers</h3><p>数据监听器，类似于vue的watch</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">observers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&#39;numberA, numberB&#39;</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">numberA<span class="token punctuation">,</span> numberB</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//可监听多个值，形参为监听顺序的最新值</span>
      <span class="token comment">// 在 numberA 或者 numberB 被设置时，执行这个函数</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">sum</span><span class="token operator">:</span> numberA <span class="token operator">+</span> numberB
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;obj.**&#39;</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//使用通配符监听obj里的所有属性</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="纯数据字段" tabindex="-1"><a class="header-anchor" href="#纯数据字段" aria-hidden="true">#</a> 纯数据字段</h3><p>指的是不用于页面渲染的数据，也不传递给其他组件，有利于提高页面更新的性能</p><p>在options字段中指定pureDataPattern为一个正则表达式，符合的就会成为纯数据字段</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
 	<span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">pureDataPattern</span><span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^_</span><span class="token regex-delimiter">/</span></span>   <span class="token comment">//指定以_开头的为纯数据字段</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">_b</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//纯数据字段</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="组件的生命周期" tabindex="-1"><a class="header-anchor" href="#组件的生命周期" aria-hidden="true">#</a> 组件的生命周期</h3><p><img src="/xjblog/assets/image-20220719210425968-8d1eabd6.png" alt="image-20220719210425968"></p><p>created：组件实例刚被创建时触发，不能调用setData。一般只能给this挂载一些自定义的属性字段。</p><p>attached：组件完全初始化，可以发送请求获取初始数据。</p><p>detached：组件被销毁时触发。</p><h3 id="lifetimes节点" tabindex="-1"><a class="header-anchor" href="#lifetimes节点" aria-hidden="true">#</a> lifetimes节点：</h3><p>生命周期可以直接定义在Components（）里，和data同级，也可以在lifetimes字段里声明（推荐，优先级更高，同时存在时会覆盖）</p><h3 id="组件所在页面的生命周期" tabindex="-1"><a class="header-anchor" href="#组件所在页面的生命周期" aria-hidden="true">#</a> 组件所在页面的生命周期</h3><p>有时自定义组件的行为依赖于页面状态的变化，就需要用到组件所在页面生命周期。</p><p><img src="/xjblog/assets/image-20220719213912163-450902ea.png" alt="image-20220719213912163"></p><h3 id="pagelifetimes节点" tabindex="-1"><a class="header-anchor" href="#pagelifetimes节点" aria-hidden="true">#</a> pageLifetimes节点：</h3><p>要监听上诉三个生命周期，需要声明在pageLifetimes字段。</p><h3 id="组件插槽" tabindex="-1"><a class="header-anchor" href="#组件插槽" aria-hidden="true">#</a> 组件插槽</h3><p>封装组件时，通过&lt;slot&gt;标签提供内容的占位符。</p><p>小程序默认每个自定义组件只允许使用一个slot标签占位。</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code>//自定义组件test
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>组件内部<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>


//组件使用者
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>test</span><span class="token punctuation">&gt;</span></span>  //组件包裹内容将呈现在slot标签里
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>测试<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>test</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>启用多插槽</strong>：组件.js</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
 	<span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">multipleSlots</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//启用多插槽支持</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
   
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code>//自定义组件test
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>组件内部<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>one<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>two<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>


//组件使用者
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>test</span><span class="token punctuation">&gt;</span></span>  //通过slot属性指定放入哪个插槽
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>one<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>测试<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>two<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>测试2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>test</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="父子组件的通信" tabindex="-1"><a class="header-anchor" href="#父子组件的通信" aria-hidden="true">#</a> 父子组件的通信</h3><ul><li>属性绑定。父组件向子组件的指定属性设置数据，不能传递函数</li></ul><p><img src="/xjblog/assets/image-20220725171935526-3449f396.png" alt=""></p><p><img src="/xjblog/assets/image-20220725172000352-010d5f8a.png" alt=""></p><ul><li>事件绑定。子组件向父组件传递任意数据</li></ul><p><img src="/xjblog/assets/image-20220725172313310-7a703b52.png" alt="image-20220725172313310"></p><p>声明函数：e.detail接收参数</p><p><img src="/xjblog/assets/image-20220725172750025-9e29c6b5.png" alt=""></p><p>传递函数给子组件：</p><p><img src="/xjblog/assets/image-20220725173008608-c7bed3d8.png" alt="image-20220725173008608"></p><p>子组件调用：this.triggerEvent(&#39;自定义事件名&#39;，{参数} )</p><p><img src="/xjblog/assets/image-20220725172904860-17c923c2.png" alt=""></p><ul><li>获取组件实例。父组件可通过this.selectComponent（id或类选择器）获取子组件实例对象。就可以访问子组件任意属性和方法。</li></ul><p><img src="/xjblog/assets/image-20220725225117131-e14ad884.png" alt="image-20220725225117131"></p><h3 id="behaviors" tabindex="-1"><a class="header-anchor" href="#behaviors" aria-hidden="true">#</a> behaviors</h3><p>behaviors是小程序<strong>用于实现组件间代码数据共享的</strong>，类似于vue的mixins</p><p>每个behaviors都包含一组属性、数据、生命周期函数和方法。组件引用它时，这些东西就会被合并到组件中。</p><p>调用 Behavior（obj）就可创建一个behavior对象。</p><p>新建一个behavior文件夹和一个js文件：</p><p><img src="/xjblog/assets/image-20220725225732382-2065b72e.png" alt=""></p><p>在某个组件中使用：</p><p><img src="/xjblog/assets/image-20220725225856539-33e4281b.png" alt=""></p><p><img src="/xjblog/assets/image-20220725230201467-d4540286.png" alt="image-20220725230201467"></p><h2 id="使用npm包" tabindex="-1"><a class="header-anchor" href="#使用npm包" aria-hidden="true">#</a> 使用npm包</h2><p>小程序对npm包有限制：</p><ul><li>不支持依赖node.js内置库的包</li><li>不支持依赖浏览器内置对象的包</li><li>不支持依赖c++插件的包</li></ul><h3 id="vant-weapp-小程序ui组件库" tabindex="-1"><a class="header-anchor" href="#vant-weapp-小程序ui组件库" aria-hidden="true">#</a> Vant Weapp 小程序ui组件库</h3><p>步骤：</p><ol><li><p>构建包管理文件,npm init -y</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code># 通过 npm 安装
npm i @vant/weapp -S --production

# 通过 yarn 安装
yarn add @vant/weapp --production
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>构建小程序npm包.新版的开发者工具构建npm后找不到使用npm模块，但是ui组件能正常用</p><p><img src="/xjblog/assets/image-20220730174858460-65128fab.png" alt="image-20220730174858460"></p></li><li><p>修改app.json</p><p>将 app.json 中的 <code>&quot;style&quot;: &quot;v2&quot;</code> 去除，小程序的<a href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#style" target="_blank" rel="noopener noreferrer">新版基础组件<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>强行加上了许多样式，难以覆盖，不关闭将造成部分组件样式混乱。</p></li><li><p>开发者工具创建的项目，<code>miniprogramRoot</code> 默认为 <code>miniprogram</code>，<code>package.json</code> 在其外部，npm 构建无法正常工作。</p><p>需要手动在 <code>project.config.json</code> 内添加如下配置，使开发者工具可以正确索引到 npm 依赖的位置。</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  ...
  <span class="token property">&quot;setting&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ...
    <span class="token property">&quot;packNpmManually&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;packNpmRelationList&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;packageJsonPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./package.json&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;miniprogramNpmDistDir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./miniprogram/&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意： 由于目前新版开发者工具创建的小程序目录文件结构问题，npm构建的文件目录为miniprogram_npm，并且开发工具会默认在当前目录下创建miniprogram_npm的文件名，所以<strong>新版本的miniprogramNpmDistDir配置为&#39;./&#39;即可</strong></p></li><li><p>在<code>app.json</code>或<code>index.json</code>中引入组件</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;usingComponents&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;van-button&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@vant/weapp/button/index&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="使用css变量来定制ui组件主题样式" tabindex="-1"><a class="header-anchor" href="#使用css变量来定制ui组件主题样式" aria-hidden="true">#</a> 使用css变量来定制ui组件主题样式</h2><p>声明一个自定义属性，属性名要以--开头，属性值可以是任意有效的css值。</p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token selector">element</span><span class="token punctuation">{</span>
	<span class="token property">--main-bg-color</span><span class="token punctuation">:</span>brown<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">//注意规则集定义了自定义属性的可见作用域，所以通常最佳实践是定义在根伪类：root或html下，就可以在任意地方使用
:root</span><span class="token punctuation">{</span>
    <span class="token property">--main-bg-color</span><span class="token punctuation">:</span>black<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">//引用时需要用var函数包裹
element</span><span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span><span class="token function">var</span><span class="token punctuation">(</span>--main-bg-color<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>定制全局主题样式，在app.wxss中写入css变量</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>page{
	//定制信息按钮的背景色和边框色
	--button-info-background-color: #00c050;
    --button-info-border-color:#00d652;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="api的promise化" tabindex="-1"><a class="header-anchor" href="#api的promise化" aria-hidden="true">#</a> api的promise化</h2><p>通过额外的配置，将官方提供的基于回调函数的异步api，升级改造为基于promise的异步api，提高代码可读性，解决回调地狱。</p><p>要实现api的promise化，主要依赖miniprogram-api-promise这个第三方npm包。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm install --save miniprogram-api-promise
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>安装完再次构建npm</p><p>在小程序入口文件app.js，调用一次promisifyAll（）方法就可实现</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> promisifyAll <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;miniprogram-api-promise&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> wxp <span class="token operator">=</span> wx<span class="token punctuation">.</span>p <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>   <span class="token comment">//挂载一个空对象p在wx上，并且指向wxp</span>
<span class="token function">promisifyAll</span><span class="token punctuation">(</span>wx<span class="token punctuation">,</span> wxp<span class="token punctuation">)</span>  <span class="token comment">//把wx的api经过处理后挂载到wxp上</span>

<span class="token comment">//直接promisifyAll(wx, wx.p={}) 也是一样的</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>//wxml
&lt;van-button bindtap=&quot;getInfo&quot;&gt;&lt;/van-button&gt;


//在页面的js文件中
async getInfo(){
	const res = await wx.p.request({
		method:&#39;get&#39;,
		url:&#39;https://www.escook.cn/api/get&#39;,
		data:{
			name:&#39;tt&#39;
		}
	})
	console.log(&#39;res&#39;,res)
}

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="状态管理" tabindex="-1"><a class="header-anchor" href="#状态管理" aria-hidden="true">#</a> 状态管理</h2><p>小程序使用<strong>mobx-miniprogram</strong>配合<strong>mobx-miniprogram-bindings</strong>实现全局数据共享</p><p>mobx-miniprogram用于创建store实例对象，bindings用来把store中共享的数据和方法绑定到页面或组件中使用</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm install --save mobx-miniprogram mobx-miniprogram-bindings
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>新建store文件夹，里面存放store实例对象的js文件。创建mobx实例</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//store.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> observable<span class="token punctuation">,</span> action <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;mobx-miniprogram&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">observable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">//数据字段</span>
  <span class="token literal-property property">num1</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">num2</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token comment">//计算属性,需要用get修饰符</span>
  <span class="token keyword">get</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num1 <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>num2
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">//actions方法，用来修改store的数据,函数用action函数包裹</span>
  <span class="token literal-property property">updateNum1</span><span class="token operator">:</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>num1 <span class="token operator">+=</span> data<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">updateNum2</span><span class="token operator">:</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>num2 <span class="token operator">+=</span> data<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="在页面中使用" tabindex="-1"><a class="header-anchor" href="#在页面中使用" aria-hidden="true">#</a> 在页面中使用：</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//页面的js文件</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createStoreBindings <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;mobx-miniprogram-bindings&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> store <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../../store/store&#39;</span>

<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>storeBindings <span class="token operator">=</span> <span class="token function">createStoreBindings</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      store<span class="token punctuation">,</span>
      <span class="token literal-property property">fields</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;num1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;num2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;count&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;updateNum1&#39;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function-variable function">onUnload</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>storeBindings<span class="token punctuation">.</span><span class="token function">destoryStoreBindings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
  <span class="token function-variable function">addNum</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateNum1</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>step<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">//wxml</span>
<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>num1<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">+</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>num2<span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>count <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>van<span class="token operator">-</span>button type<span class="token operator">=</span><span class="token string">&quot;info&quot;</span> <span class="token literal-property property">bind</span><span class="token operator">:</span>tap<span class="token operator">=</span><span class="token string">&quot;addNum&quot;</span> data<span class="token operator">-</span>step<span class="token operator">=</span><span class="token string">&quot;{{2}}&quot;</span><span class="token operator">&gt;</span>num1<span class="token operator">+</span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>van<span class="token operator">-</span>button<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="在组件中使用" tabindex="-1"><a class="header-anchor" href="#在组件中使用" aria-hidden="true">#</a> 在组件中使用：</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> storeBindingsBehavior <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;mobx-miniprogram-bindings&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> store <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../../store/store&#39;</span>
<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">behaviors</span><span class="token operator">:</span> <span class="token punctuation">[</span>storeBindingsBehavior<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//通过storeBindingsBehavior实现自动绑定</span>
  <span class="token literal-property property">storeBindings</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    store<span class="token punctuation">,</span>
    <span class="token literal-property property">fields</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">//通过对象方式声明可以取别名</span>
      <span class="token function-variable function">num1</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> store<span class="token punctuation">.</span>num1<span class="token punctuation">,</span><span class="token comment">//第一种方式,</span>
      <span class="token function-variable function">num2</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">store</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> store<span class="token punctuation">.</span>num2<span class="token punctuation">,</span><span class="token comment">//第二种方式</span>
      <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token string">&#39;count&#39;</span><span class="token punctuation">,</span><span class="token comment">//第三种方式</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">updateNum1</span><span class="token operator">:</span> <span class="token string">&#39;updateNum1&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="分包" tabindex="-1"><a class="header-anchor" href="#分包" aria-hidden="true">#</a> 分包</h2><p>分包是指把一个完整的小程序项目，按照需求划分为不同的子包，在构建时打包成不同的分包，用户在使用时<strong>按需加载</strong>。</p><p>好处：</p><ul><li>优化小程序首次渲染时间</li></ul><p>分包后的项目构成：一个主包+多个分包；单个包大小不能超过2M，所有包总和不能超过20M（以后可能还会增加）</p><p>主包一般只包含项目的启动页面或tabbar页面、以及所有分包需要用的公共资源。</p><p>配置方法：</p><p><img src="/xjblog/assets/image-20220801193446935-280fe741.png" alt=""></p><p><img src="/xjblog/assets/image-20220801193514236-2cb021c4.png" alt="image-20220801193514236"></p><p>subpackages里的pages都是以root里配置的值文件夹为根目录。</p><p>打包原则：</p><ul><li>小程序会按subpackages的配置进行分包，subpackages之外的目录将被打包的主包中。</li><li>tabbar页面必须在主包内</li><li>分包之间不能相互嵌套</li></ul><h3 id="独立分包" tabindex="-1"><a class="header-anchor" href="#独立分包" aria-hidden="true">#</a> 独立分包</h3><p>独立分包本质也是分包。不同的是，独立分包可以独立于主包和其他分包去单独运行。（不依赖主包，不下载主包的情况下独立运行）</p><p>独立分包不能和其他任何分包或主包有资源的相互引用。</p><p>配置方法：</p><p><img src="/xjblog/assets/image-20220801195640757-47caed93.png" alt=""></p><p><img src="/xjblog/assets/image-20220801195704817-696ef0da.png" alt="image-20220801195704817"></p><p>通过independent声明独立分包</p><h3 id="分包预下载" tabindex="-1"><a class="header-anchor" href="#分包预下载" aria-hidden="true">#</a> 分包预下载</h3><p>进入小程序某个页面时，由<strong>框架自动预下载可能需要的分包</strong>，加快进入分包的页面的启动速度</p><p>配置preloadRule项：app.json：</p><p><img src="/xjblog/assets/image-20220801200113400-98e4f3e2.png" alt="image-20220801200113400"></p><p><strong>同一个分包的页面享有共同的预下载的限额为2M</strong></p><p>如主包有a、b、c三个页面，三个页面都分别预下载一个大小为1M分包，总和就是3M，分包就会下载失败。</p><h2 id="自定义tabbar" tabindex="-1"><a class="header-anchor" href="#自定义tabbar" aria-hidden="true">#</a> 自定义tabBar</h2><ol><li>配置信息</li><li>添加tabBar代码文件</li></ol><p>1、app.json配置信息：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;tabBar&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;custom&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">//声明自定义</span>
    <span class="token property">&quot;color&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#000000&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;selectedColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#000000&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;backgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#000000&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/index/index&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;组件&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/API/index&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;接口&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;usingComponents&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2、在根目录添加文件：固定的</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>custom-tab-bar/index.js
custom-tab-bar/index.json
custom-tab-bar/index.wxml
custom-tab-bar/index.wxss
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="获取用户基本信息" tabindex="-1"><a class="header-anchor" href="#获取用户基本信息" aria-hidden="true">#</a> 获取用户基本信息</h2><p>（这个接口在不同的版本使用情况可能有所不同，下面的案例为2.14.4的调试基础库）</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token comment">&lt;!--pages/test/test.wxml--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getUserInfo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">bindgetuserinfo</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleGetInfo<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>获取用户信息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">handleGetInfo</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;res&#39;</span><span class="token punctuation">,</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">//点击了允许</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">userInfo</span><span class="token operator">:</span>res<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>userInfo
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>open-type里的值为微信官方设定的一些功能，详情见文档。getUserInfo就是获取用户的基本信息。后面的bindgetuserinfo为绑定授权回调函数。可以根据输出的res中detail里是否有userInfo判断是否授权成功。rawData为userInfo的json字符串格式</p><p><img src="/xjblog/assets/image-20220123223509987-a33b6f9f.png" alt=""></p><p>但是上面这种方法在用户重新进入小程序后，数据会被初始化，就需要新的api来获取信息。</p><h3 id="wx-getuserinfo" tabindex="-1"><a class="header-anchor" href="#wx-getuserinfo" aria-hidden="true">#</a> wx.getUserInfo</h3><p>这个api需要有上面获取用户授权的才回进入success的回调。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function-variable function">onLoad</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//授权以后获取用户信息</span>
    wx<span class="token punctuation">.</span><span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;成功&#39;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//res.userInfo</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">userInfo</span><span class="token operator">:</span> res<span class="token punctuation">.</span>userInfo
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">fail</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;失败&#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个接口在真机调试上好像有问题。真机调试为开发版</p><p>从2018年4月30日开始，小程序与小游戏的体验版、开发版调用 wx.getUserInfo 接口，将无法弹出授权询问框，默认调用失败。</p><p>正式版暂不受影响。（无法验证）</p><p>在文档里目前有个新的api： wx.getUserProfile</p><h3 id="wx-getuserprofile" tabindex="-1"><a class="header-anchor" href="#wx-getuserprofile" aria-hidden="true">#</a> wx.getUserProfile</h3><p>这个方法必须得绑定点击事件由用户触发，且必须填写desc字段，不然不弹窗</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    wx<span class="token punctuation">.</span><span class="token function">getUserProfile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token string">&#39;获取用户信息&#39;</span><span class="token punctuation">,</span><span class="token comment">//不写不弹窗</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>userInfo<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">userInfo</span><span class="token operator">:</span> res<span class="token punctuation">.</span>userInfo
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">fail</span><span class="token operator">:</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;err&#39;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="iconfont的使用" tabindex="-1"><a class="header-anchor" href="#iconfont的使用" aria-hidden="true">#</a> iconfont的使用</h2><p>生成了添加项目后，打开网址，将里面的内容复制到新的wxss文件。</p><p>然后导入到全局wxss文件中</p><p><img src="/xjblog/assets/image-20220124224947226-d669c08f.png" alt="image-20220124224947226"></p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token comment">/**app.wxss**/</span>
<span class="token atrule"><span class="token rule">@import</span> <span class="token string">&#39;/static/iconfont.wxss&#39;</span><span class="token punctuation">;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconfont icon-diantai<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/xjblog/assets/app-6fcf50f1.js" defer></script>
  </body>
</html>
