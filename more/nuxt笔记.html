<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.67">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>XJ-Blog</title><meta name="description" content="">
    <link rel="preload" href="/xjblog/assets/style-82cbce61.css" as="style"><link rel="stylesheet" href="/xjblog/assets/style-82cbce61.css">
    <link rel="modulepreload" href="/xjblog/assets/app-6fcf50f1.js"><link rel="modulepreload" href="/xjblog/assets/nuxt笔记.html-e8b0231b.js"><link rel="modulepreload" href="/xjblog/assets/nuxt笔记.html-46cec443.js"><link rel="prefetch" href="/xjblog/assets/index.html-2320b9e9.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-62e263ac.js" as="script"><link rel="prefetch" href="/xjblog/assets/css.html-4c80896c.js" as="script"><link rel="prefetch" href="/xjblog/assets/flex.html-1426b188.js" as="script"><link rel="prefetch" href="/xjblog/assets/grid.html-0f729e2f.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-ded121db.js" as="script"><link rel="prefetch" href="/xjblog/assets/less.html-6a112481.js" as="script"><link rel="prefetch" href="/xjblog/assets/scope.html-dc2a0b81.js" as="script"><link rel="prefetch" href="/xjblog/assets/tailwind.html-fa555d04.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-5752af20.js" as="script"><link rel="prefetch" href="/xjblog/assets/bibao.html-aa4d620f.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-aa0f78e5.js" as="script"><link rel="prefetch" href="/xjblog/assets/js.html-e4e97a5c.js" as="script"><link rel="prefetch" href="/xjblog/assets/jstrash.html-8f9c2822.js" as="script"><link rel="prefetch" href="/xjblog/assets/TypeScript.html-5672f6be.js" as="script"><link rel="prefetch" href="/xjblog/assets/centOS-mysql.html-850f04a1.js" as="script"><link rel="prefetch" href="/xjblog/assets/CentOs安装mysql5.7.html-2b49dce8.js" as="script"><link rel="prefetch" href="/xjblog/assets/del_package_quick.html-8b384235.js" as="script"><link rel="prefetch" href="/xjblog/assets/express脚手架新建项目.html-7dcab6d9.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-d3f5453d.js" as="script"><link rel="prefetch" href="/xjblog/assets/nginx.html-10c449c2.js" as="script"><link rel="prefetch" href="/xjblog/assets/node-cors解决跨域.html-08172e34.js" as="script"><link rel="prefetch" href="/xjblog/assets/package.html-e473e5a6.js" as="script"><link rel="prefetch" href="/xjblog/assets/快速打包部署.html-d358c00c.js" as="script"><link rel="prefetch" href="/xjblog/assets/antd-antdPro.html-6a7ae3a2.js" as="script"><link rel="prefetch" href="/xjblog/assets/baiduMap.html-e87d3acf.js" as="script"><link rel="prefetch" href="/xjblog/assets/hooks.html-534d4e22.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-836ae580.js" as="script"><link rel="prefetch" href="/xjblog/assets/react.html-61eaccd6.js" as="script"><link rel="prefetch" href="/xjblog/assets/g2.html-e7881cb2.js" as="script"><link rel="prefetch" href="/xjblog/assets/git.html-e83da039.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-2e88778c.js" as="script"><link rel="prefetch" href="/xjblog/assets/mongodb.html-a6bf983c.js" as="script"><link rel="prefetch" href="/xjblog/assets/network.html-3692f09e.js" as="script"><link rel="prefetch" href="/xjblog/assets/nuxt-Vuex.html-8a106ffb.js" as="script"><link rel="prefetch" href="/xjblog/assets/print.html-70bb765a.js" as="script"><link rel="prefetch" href="/xjblog/assets/uni-app.html-d71eedf1.js" as="script"><link rel="prefetch" href="/xjblog/assets/vuePress.html-93772d8e.js" as="script"><link rel="prefetch" href="/xjblog/assets/webpack.html-255e041e.js" as="script"><link rel="prefetch" href="/xjblog/assets/websocket.html-984bdb18.js" as="script"><link rel="prefetch" href="/xjblog/assets/xlsx.html-26dddaf0.js" as="script"><link rel="prefetch" href="/xjblog/assets/小程序.html-1cb9bfc3.js" as="script"><link rel="prefetch" href="/xjblog/assets/部署nuxt项目.html-8e91aa6c.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-4cdfc9c8.js" as="script"><link rel="prefetch" href="/xjblog/assets/TypeScript.html-0c0b7c77.js" as="script"><link rel="prefetch" href="/xjblog/assets/defineProperty.html-4bef435b.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-d8eb0dd7.js" as="script"><link rel="prefetch" href="/xjblog/assets/vue2.html-6b28cda9.js" as="script"><link rel="prefetch" href="/xjblog/assets/VUEX.html-2a509512.js" as="script"><link rel="prefetch" href="/xjblog/assets/doit.html-8ebb448e.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-ec34db96.js" as="script"><link rel="prefetch" href="/xjblog/assets/vite.html-6e541edd.js" as="script"><link rel="prefetch" href="/xjblog/assets/vue3.html-71883397.js" as="script"><link rel="prefetch" href="/xjblog/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-f301dcdc.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-2dad9f7a.js" as="script"><link rel="prefetch" href="/xjblog/assets/css.html-8fd74399.js" as="script"><link rel="prefetch" href="/xjblog/assets/flex.html-5d6fc163.js" as="script"><link rel="prefetch" href="/xjblog/assets/grid.html-8c95192b.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-15e51930.js" as="script"><link rel="prefetch" href="/xjblog/assets/less.html-b163e0af.js" as="script"><link rel="prefetch" href="/xjblog/assets/scope.html-2b00b30e.js" as="script"><link rel="prefetch" href="/xjblog/assets/tailwind.html-f4608faa.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-5aa22cd3.js" as="script"><link rel="prefetch" href="/xjblog/assets/bibao.html-6e185429.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-b70b97a4.js" as="script"><link rel="prefetch" href="/xjblog/assets/js.html-4ef7cd59.js" as="script"><link rel="prefetch" href="/xjblog/assets/jstrash.html-6f938127.js" as="script"><link rel="prefetch" href="/xjblog/assets/TypeScript.html-466479bb.js" as="script"><link rel="prefetch" href="/xjblog/assets/centOS-mysql.html-3533629d.js" as="script"><link rel="prefetch" href="/xjblog/assets/CentOs安装mysql5.7.html-f0b50638.js" as="script"><link rel="prefetch" href="/xjblog/assets/del_package_quick.html-82138503.js" as="script"><link rel="prefetch" href="/xjblog/assets/express脚手架新建项目.html-d0bac9df.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-fac93b33.js" as="script"><link rel="prefetch" href="/xjblog/assets/nginx.html-ad76d17a.js" as="script"><link rel="prefetch" href="/xjblog/assets/node-cors解决跨域.html-d919479a.js" as="script"><link rel="prefetch" href="/xjblog/assets/package.html-1680af4c.js" as="script"><link rel="prefetch" href="/xjblog/assets/快速打包部署.html-ba2952ce.js" as="script"><link rel="prefetch" href="/xjblog/assets/antd-antdPro.html-e38b041a.js" as="script"><link rel="prefetch" href="/xjblog/assets/baiduMap.html-38144312.js" as="script"><link rel="prefetch" href="/xjblog/assets/hooks.html-21aa2284.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-49401c60.js" as="script"><link rel="prefetch" href="/xjblog/assets/react.html-fa7d6f46.js" as="script"><link rel="prefetch" href="/xjblog/assets/g2.html-f635db4d.js" as="script"><link rel="prefetch" href="/xjblog/assets/git.html-35552097.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-58ea96b7.js" as="script"><link rel="prefetch" href="/xjblog/assets/mongodb.html-d67af31c.js" as="script"><link rel="prefetch" href="/xjblog/assets/network.html-4c136454.js" as="script"><link rel="prefetch" href="/xjblog/assets/nuxt-Vuex.html-7ec793c9.js" as="script"><link rel="prefetch" href="/xjblog/assets/print.html-07fa8979.js" as="script"><link rel="prefetch" href="/xjblog/assets/uni-app.html-67e96bd8.js" as="script"><link rel="prefetch" href="/xjblog/assets/vuePress.html-1b689bec.js" as="script"><link rel="prefetch" href="/xjblog/assets/webpack.html-ae6cb3f0.js" as="script"><link rel="prefetch" href="/xjblog/assets/websocket.html-eff628a7.js" as="script"><link rel="prefetch" href="/xjblog/assets/xlsx.html-75689a7d.js" as="script"><link rel="prefetch" href="/xjblog/assets/小程序.html-dcdb70c2.js" as="script"><link rel="prefetch" href="/xjblog/assets/部署nuxt项目.html-5dfe4e9c.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-ffdad007.js" as="script"><link rel="prefetch" href="/xjblog/assets/TypeScript.html-481bf9b4.js" as="script"><link rel="prefetch" href="/xjblog/assets/defineProperty.html-fd1c2a46.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-73649cac.js" as="script"><link rel="prefetch" href="/xjblog/assets/vue2.html-3bf7c541.js" as="script"><link rel="prefetch" href="/xjblog/assets/VUEX.html-94e0c565.js" as="script"><link rel="prefetch" href="/xjblog/assets/doit.html-930cb93b.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-6426e621.js" as="script"><link rel="prefetch" href="/xjblog/assets/vite.html-f25a706d.js" as="script"><link rel="prefetch" href="/xjblog/assets/vue3.html-281128a9.js" as="script"><link rel="prefetch" href="/xjblog/assets/404.html-0040bf83.js" as="script"><link rel="prefetch" href="/xjblog/assets/style-e9220a04.js" as="script"><link rel="prefetch" href="/xjblog/assets/docsearch-1d421ddb.js" as="script"><link rel="prefetch" href="/xjblog/assets/index-82585c84.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/xjblog/" class=""><img class="logo" src="/xjblog/images/t.png" alt="XJ-Blog"><span class="site-name can-hide">XJ-Blog</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/xjblog/html" class="" aria-label="Html"><!--[--><!--]--> Html <!--[--><!--]--></a></div><div class="navbar-item"><a href="/xjblog/css" class="" aria-label="Css"><!--[--><!--]--> Css <!--[--><!--]--></a></div><div class="navbar-item"><a href="/xjblog/js" class="" aria-label="Javascript"><!--[--><!--]--> Javascript <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue"><span class="title">Vue</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue"><span class="title">Vue</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/xjblog/vue2" class="" aria-label="Vue2"><!--[--><!--]--> Vue2 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/xjblog/vue3" class="" aria-label="Vue3"><!--[--><!--]--> Vue3 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/xjblog/react" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></div><div class="navbar-item"><a href="/xjblog/node" class="" aria-label="Node.js"><!--[--><!--]--> Node.js <!--[--><!--]--></a></div><div class="navbar-item"><a href="/xjblog/more" class="router-link-active" aria-label="更多"><!--[--><!--]--> 更多 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/xjblog/html" class="" aria-label="Html"><!--[--><!--]--> Html <!--[--><!--]--></a></div><div class="navbar-item"><a href="/xjblog/css" class="" aria-label="Css"><!--[--><!--]--> Css <!--[--><!--]--></a></div><div class="navbar-item"><a href="/xjblog/js" class="" aria-label="Javascript"><!--[--><!--]--> Javascript <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue"><span class="title">Vue</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue"><span class="title">Vue</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/xjblog/vue2" class="" aria-label="Vue2"><!--[--><!--]--> Vue2 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/xjblog/vue3" class="" aria-label="Vue3"><!--[--><!--]--> Vue3 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/xjblog/react" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></div><div class="navbar-item"><a href="/xjblog/node" class="" aria-label="Node.js"><!--[--><!--]--> Node.js <!--[--><!--]--></a></div><div class="navbar-item"><a href="/xjblog/more" class="router-link-active" aria-label="更多"><!--[--><!--]--> 更多 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading"> <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#seo-搜索引擎优化" class="router-link-active router-link-exact-active sidebar-item" aria-label="SEO：搜索引擎优化"><!--[--><!--]--> SEO：搜索引擎优化 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#服务端渲染-ssr-和客户端渲染" class="router-link-active router-link-exact-active sidebar-item" aria-label="服务端渲染（SSR）和客户端渲染"><!--[--><!--]--> 服务端渲染（SSR）和客户端渲染 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#客户端渲染" class="router-link-active router-link-exact-active sidebar-item" aria-label="客户端渲染："><!--[--><!--]--> 客户端渲染： <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#服务端渲染-ssr" class="router-link-active router-link-exact-active sidebar-item" aria-label="服务端渲染（SSR）："><!--[--><!--]--> 服务端渲染（SSR）： <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#为什么使用服务器端渲染-ssr" class="router-link-active router-link-exact-active sidebar-item" aria-label="为什么使用服务器端渲染（SSR）"><!--[--><!--]--> 为什么使用服务器端渲染（SSR） <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#nuxt-js" class="router-link-active router-link-exact-active sidebar-item" aria-label="Nuxt.js"><!--[--><!--]--> Nuxt.js <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#nuxt-js的工作原理" class="router-link-active router-link-exact-active sidebar-item" aria-label="Nuxt.js的工作原理"><!--[--><!--]--> Nuxt.js的工作原理 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#nuxt-js的生命周期图" class="router-link-active router-link-exact-active sidebar-item" aria-label="Nuxt.js的生命周期图"><!--[--><!--]--> Nuxt.js的生命周期图 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#nuxt脚手架工具-create-nuxt-app" class="router-link-active router-link-exact-active sidebar-item" aria-label="Nuxt脚手架工具：create-nuxt-app"><!--[--><!--]--> Nuxt脚手架工具：create-nuxt-app <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#目录结构" class="router-link-active router-link-exact-active sidebar-item" aria-label="目录结构"><!--[--><!--]--> 目录结构 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#别名" class="router-link-active router-link-exact-active sidebar-item" aria-label="别名~@"><!--[--><!--]--> 别名~@ <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#布局与错误页" class="router-link-active router-link-exact-active sidebar-item" aria-label="布局与错误页"><!--[--><!--]--> 布局与错误页 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#默认布局页面" class="router-link-active router-link-exact-active sidebar-item" aria-label="默认布局页面"><!--[--><!--]--> 默认布局页面 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#自定义页面布局" class="router-link-active router-link-exact-active sidebar-item" aria-label="自定义页面布局"><!--[--><!--]--> 自定义页面布局 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#组件布局" class="router-link-active router-link-exact-active sidebar-item" aria-label="组件布局"><!--[--><!--]--> 组件布局 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#错误页" class="router-link-active router-link-exact-active sidebar-item" aria-label="错误页"><!--[--><!--]--> 错误页 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#设置当前页面头部标签" class="router-link-active router-link-exact-active sidebar-item" aria-label="设置当前页面头部标签"><!--[--><!--]--> 设置当前页面头部标签 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#插件" class="router-link-active router-link-exact-active sidebar-item" aria-label="插件"><!--[--><!--]--> 插件 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#注入vue实例" class="router-link-active router-link-exact-active sidebar-item" aria-label="注入vue实例"><!--[--><!--]--> 注入vue实例 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#注入-context" class="router-link-active router-link-exact-active sidebar-item" aria-label="注入 context"><!--[--><!--]--> 注入 context <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#同时注入context、vue、vuex实例" class="router-link-active router-link-exact-active sidebar-item" aria-label="同时注入context、vue、vuex实例"><!--[--><!--]--> 同时注入context、vue、vuex实例 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#只在客户端或服务端使用的插件" class="router-link-active router-link-exact-active sidebar-item" aria-label="只在客户端或服务端使用的插件"><!--[--><!--]--> 只在客户端或服务端使用的插件 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#异步加载数据-asyncdata" class="router-link-active router-link-exact-active sidebar-item" aria-label="异步加载数据 asyncData"><!--[--><!--]--> 异步加载数据 asyncData <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#请求数据接口" class="router-link-active router-link-exact-active sidebar-item" aria-label="请求数据接口"><!--[--><!--]--> 请求数据接口 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#asyncdata里请求数据-刷新后网页报错" class="router-link-active router-link-exact-active sidebar-item" aria-label="asyncData里请求数据，刷新后网页报错"><!--[--><!--]--> asyncData里请求数据，刷新后网页报错 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#解决办法-补全请求地址和代理前缀" class="router-link-active router-link-exact-active sidebar-item" aria-label="解决办法：补全请求地址和代理前缀"><!--[--><!--]--> 解决办法：补全请求地址和代理前缀 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#nuxt-js中配置代理解决跨域" class="router-link-active router-link-exact-active sidebar-item" aria-label="Nuxt.js中配置代理解决跨域"><!--[--><!--]--> Nuxt.js中配置代理解决跨域 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#axios-拦截器" class="router-link-active router-link-exact-active sidebar-item" aria-label="$axios 拦截器"><!--[--><!--]--> $axios 拦截器 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#插件方式解耦在-nuxtjs-中调用-api" class="router-link-active router-link-exact-active sidebar-item" aria-label="插件方式解耦在 NuxtJs 中调用 api"><!--[--><!--]--> 插件方式解耦在 NuxtJs 中调用 api <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#路由vue-router" class="router-link-active router-link-exact-active sidebar-item" aria-label="路由vue-router"><!--[--><!--]--> 路由vue-router <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#基础路由" class="router-link-active router-link-exact-active sidebar-item" aria-label="基础路由"><!--[--><!--]--> 基础路由 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#动态路由" class="router-link-active router-link-exact-active sidebar-item" aria-label="动态路由"><!--[--><!--]--> 动态路由 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#下划线为前缀的目录" class="router-link-active router-link-exact-active sidebar-item" aria-label="下划线为前缀的目录"><!--[--><!--]--> 下划线为前缀的目录 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#嵌套路由" class="router-link-active router-link-exact-active sidebar-item" aria-label="嵌套路由"><!--[--><!--]--> 嵌套路由 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#中间件" class="router-link-active router-link-exact-active sidebar-item" aria-label="中间件"><!--[--><!--]--> 中间件 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#创建权限中间件" class="router-link-active router-link-exact-active sidebar-item" aria-label="创建权限中间件"><!--[--><!--]--> 创建权限中间件 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#使用中间件" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用中间件"><!--[--><!--]--> 使用中间件 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#keep-alive" class="router-link-active router-link-exact-active sidebar-item" aria-label="keep-alive"><!--[--><!--]--> keep-alive <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#完整引入antd-vue" class="router-link-active router-link-exact-active sidebar-item" aria-label="完整引入antd-vue"><!--[--><!--]--> 完整引入antd-vue <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#按需引入antd-vue" class="router-link-active router-link-exact-active sidebar-item" aria-label="按需引入antd-vue"><!--[--><!--]--> 按需引入antd-vue <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#antd-vue配置中文" class="router-link-active router-link-exact-active sidebar-item" aria-label="antd-vue配置中文"><!--[--><!--]--> antd-vue配置中文 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#使用less" class="router-link-active router-link-exact-active sidebar-item" aria-label="使用less"><!--[--><!--]--> 使用less <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#按需引用antd-vue后的bug" class="router-link-active router-link-exact-active sidebar-item" aria-label="按需引用antd-vue后的bug"><!--[--><!--]--> 按需引用antd-vue后的bug <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/more/nuxt%E7%AC%94%E8%AE%B0.html#antd-vue多选框不换行" class="router-link-active router-link-exact-active sidebar-item" aria-label="antd-vue多选框不换行"><!--[--><!--]--> antd-vue多选框不换行 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h2 id="seo-搜索引擎优化" tabindex="-1"><a class="header-anchor" href="#seo-搜索引擎优化" aria-hidden="true">#</a> SEO：搜索引擎优化</h2><p>采用vue.js开发的应用系统SEO不友好，右键查看源代码时，几乎没有什么标签内容。</p><p>新闻门户、博客系统等则希望被搜索引擎收录，百度排名靠前。所以需要利用搜索引擎的规则提高在搜索引擎里的排名。</p><h2 id="服务端渲染-ssr-和客户端渲染" tabindex="-1"><a class="header-anchor" href="#服务端渲染-ssr-和客户端渲染" aria-hidden="true">#</a> 服务端渲染（SSR）和客户端渲染</h2><h3 id="客户端渲染" tabindex="-1"><a class="header-anchor" href="#客户端渲染" aria-hidden="true">#</a> 客户端渲染：</h3><ol><li>浏览器（客户端）通过 AJAX 向服务端发送 http请求数据接口。</li><li>服务端将获取的接口数据封装成 JSON ，响应给浏览器。</li><li>浏览器拿到JSON就进行渲染html页面，生成DOM元素，然后将页面展示给用户。</li></ol><p>特点：</p><ol><li>服务端只响应数据，不生成 html 页面</li><li>浏览器（客户端）负责发送请求获取服务端的数据，然后渲染成 html 页面。</li></ol><h3 id="服务端渲染-ssr" tabindex="-1"><a class="header-anchor" href="#服务端渲染-ssr" aria-hidden="true">#</a> 服务端渲染（SSR）：</h3><ol><li>浏览器（客户端）向服务端发送 http请求数据接口。</li><li>服务端会生成html页面，响应给浏览器。</li><li>浏览器直接将接收到html页面进行展示。</li></ol><p>特点：</p><ol><li>在服务端生成html页面</li><li>浏览器（客户端）只负责显示html内容</li></ol><h2 id="为什么使用服务器端渲染-ssr" tabindex="-1"><a class="header-anchor" href="#为什么使用服务器端渲染-ssr" aria-hidden="true">#</a> 为什么使用服务器端渲染（SSR）</h2><p>与传统的SPA（单页面应用程序）相比，服务端渲染的优势主要有哪些：</p><p>更好的 SEO，由于搜索引擎爬虫抓取工具可以直接查看完全渲染的页面。 如果你的应用程序初始展示Loading菊花图，然后通过Ajax获取内容，抓取工具并不会等待异步完成后再行抓取页面内容。也就是说，如果SEO对你的站点至关重要，而你的页面又是异步获取内容，则你可能需要服务器 端渲染(SSR)解决此问题。 更快的内容到达时间（首屏加载更快），因为服务端只需要返回渲染好的HTML，这部分代码量很小的，所以用户体验更好。</p><p>使用服务器端渲染(SSR)时还需要有一些权衡之处：</p><p>首先就是开发成本比较高，比如某些声明周期钩子函数（如beforeCreate、created）能同时运行在服务端和 客户端，因此第三方库要做特殊处理，才能在服务器渲染应用程序中运行。 由于服务端渲染要用Nodejs做中间层，所以部署项目时，需要处于Node.js server运行环境。在高流量环境下，还要做好服务器负载和缓存策略。</p><h2 id="nuxt-js" tabindex="-1"><a class="header-anchor" href="#nuxt-js" aria-hidden="true">#</a> Nuxt.js</h2><p>1.Nuxt.js是一个基于Vue.js的通用应用框架。</p><p>2.通过对 客户端/服务端 基础框架的抽象组织，Nuxt.js主要关注的是应用的UI渲染。</p><p>3.Nuxt.js的目标是创建一个灵活的应用框架，你可以基于它初始化新项目的基础代码结构。或者在已有的 Node.js项目中使用Nuxt.js。其中预设了利用Vue.js开发服务端渲染的应用所需的各种配置。</p><p>4.作为框架Nuxt.js为 客户端/服务端 这种典型的应用架构模式提供了许多有用的特性，例如异步数据加载、中间件支持、布局支持等。</p><h2 id="nuxt-js的工作原理" tabindex="-1"><a class="header-anchor" href="#nuxt-js的工作原理" aria-hidden="true">#</a> Nuxt.js的工作原理</h2><ol><li>浏览器（客户端）发送 http 请求到 Node.js 服务端 。</li><li>部署在 Node.js 的应用 Nuxt.js 接收到浏览器请求，它会去请求后台接口服务端。</li><li>后台接口服务端会响应 JSON 数据，Nuxt.js 获取数据后进行服务端渲染成 html 。</li><li>然后 Nuxt.js 将 html 页面响应给浏览器。</li><li>浏览器直接将接收到html页面进行展示。</li></ol><h2 id="nuxt-js的生命周期图" tabindex="-1"><a class="header-anchor" href="#nuxt-js的生命周期图" aria-hidden="true">#</a> Nuxt.js的生命周期图</h2><p><img src="/xjblog/assets/image-20220105214336147-fae1b493.png" alt="image-20220105214336147"></p><p>红框内的是Nuxt的生命周期(运行在服务端)，黄框内同时运行在服务端&amp;&amp;客户端上，绿框内则运行在客户端</p><p>红框、黄框周期内的都不存在Window对象。</p><h2 id="nuxt脚手架工具-create-nuxt-app" tabindex="-1"><a class="header-anchor" href="#nuxt脚手架工具-create-nuxt-app" aria-hidden="true">#</a> Nuxt脚手架工具：create-nuxt-app</h2><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm install -g create-nuxt-app
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>初始化项目：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>create-nuxt-app &lt;项目名&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>npx:，npx 是 npm 的高级版本，npx 具有更强大的功能。作用是避免全局安装模块：npx 临时安装一个 create-nuxt-app 模块，来初始化项目，使用过后会自动删除 create-nuxt-app 模块(下面不需要全局安装)</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npx create-nuxt-app &lt;项目名&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>启动项目</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm run dev
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>更改端口号和主机（nuxt.config.js）</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
<span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;universal&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 代表SSR，还可取值 `spa` 单体应用</span>
<span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">8000</span><span class="token punctuation">,</span>
	<span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&#39;0.0.0.0&#39;</span> <span class="token comment">// 默认: localhost</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// 其他配置项</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="目录结构" tabindex="-1"><a class="header-anchor" href="#目录结构" aria-hidden="true">#</a> 目录结构</h2><p><img src="/xjblog/assets/image-20220105215726534-5744674f.png" alt="image-20220105215726534"></p><p>1 .nuxt：执行 npm run dev 命令后编译的目录文件。</p><p>2 components：用于组织应用的 Vue.js 组件。Nuxt.js 不会扩展增强该目录下 Vue.js 组件，即这些组件不会像页面组件那样有 asyncData 方法的特性。</p><p>3 assets（该脚手架版本没有生成）：用于组织未编译的静态资源如 LESS 、 SASS 或 JavaScript 。</p><p>4 layouts（该脚手架版本没有生成，后续自行添加）：用于组织应用的布局组件。</p><p>5 middleware（该脚手架版本没有生成）：用于存放应用的中间件。</p><p>6 pages：用于组织应用的路由及视图。Nuxt.js 框架读取该目录下所有的.vue文件并自动生成对应的路由配置。</p><p>7 plugins（该脚手架版本没有生成，后续自行添加）：用于组织那些需要在根vue.js应用 实例化之前需要运行的 Javascript 插件。</p><p>8 static：静态文件目录 static 用于存放应用的静态文件，此类文件不会被 Nuxt.js 调用 Webpack 进行构建编译处理。 服务器启动的时候，该目录下的文件会映射至应用的根路径 / 下。</p><p>9 store：用于组织应用的 Vuex 状态树 文件。 Nuxt.js 框架集成了 Vuex 状态树 的相关功能配置，在 store 目录下创建一个 index.js 文件可激活这些配置。</p><p>10 .editorconfig：用于指定编辑器编写项目的代码风格。</p><p>11 nuxt.config.js 文件用于组织 Nuxt.js 应用的个性化配置，以便覆盖默认配置。</p><h2 id="别名" tabindex="-1"><a class="header-anchor" href="#别名" aria-hidden="true">#</a> 别名~@</h2><p>~或@ 目录：srcDir</p><p>~~或@@ 目录：rootDir</p><p>默认情况下，srcDir 和 rootDir相同。</p><p>提示: 在您的 vue 模板中, 如果你需要引入 assets 或者 static 目录, 使用 ~/assets/image.png 和 ~/static/image.png 方式</p><h2 id="布局与错误页" tabindex="-1"><a class="header-anchor" href="#布局与错误页" aria-hidden="true">#</a> 布局与错误页</h2><h3 id="默认布局页面" tabindex="-1"><a class="header-anchor" href="#默认布局页面" aria-hidden="true">#</a> 默认布局页面</h3><p>1.当执行 npm run dev 后，在会生成一个默认的 html 模板页面 .nuxt/views/app.template.html 内容如 下：</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">{{</span> <span class="token attr-name">HTML_ATTRS</span> <span class="token attr-name">}}</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span> <span class="token attr-name">{{</span> <span class="token attr-name">HEAD_ATTRS</span> <span class="token attr-name">}}</span><span class="token punctuation">&gt;</span></span>
		{{ HEAD }}
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token attr-name">{{</span> <span class="token attr-name">BODY_ATTRS</span> <span class="token attr-name">}}</span><span class="token punctuation">&gt;</span></span>
		{{ APP }}   
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p> 渲染的是主体内容，就是 /pages 下的页面组件</p><p>2.页面中的表达式引用的是 nuxt.config.js 文件中 head 属性值：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">head</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">htmlAttrs</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 对应 {{ HTML_ATTRS }} ，html标签属性</span>
		<span class="token literal-property property">lang</span><span class="token operator">:</span> <span class="token string">&#39;en&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">headAttrs</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 对应 {{ HEAD_ATTRS }}, head标签属性</span>
		<span class="token comment">// 一般没有什么可设置的，随便设置个</span>
		<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;headname&#39;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token literal-property property">bodyAttrs</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 对应 {{ HOBDY_ATTRS }} body标签属性</span>
		<span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token string">&#39;background-color: green&#39;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// 对应 {{ HEAD }} 即 head标签体内容----start</span>
	<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;梦学谷博客社区站点_IT技术&quot;</span><span class="token punctuation">,</span> <span class="token comment">// p<wbr>rocess.env.npm_package_name || &#39;&#39;, // package.js的 name</span>
	<span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">[</span>
	<span class="token punctuation">{</span> <span class="token literal-property property">charset</span><span class="token operator">:</span> <span class="token string">&#39;utf-8&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;viewport&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">&#39;width=device-width, initial-scale=1&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span> <span class="token literal-property property">hid</span><span class="token operator">:</span> <span class="token string">&#39;description&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;description&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">content</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>npm_package_description <span class="token operator">||</span> <span class="token string">&#39;&#39;</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token literal-property property">link</span><span class="token operator">:</span> <span class="token punctuation">[</span>
	<span class="token punctuation">{</span> <span class="token literal-property property">rel</span><span class="token operator">:</span> <span class="token string">&#39;icon&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;image/x-icon&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">href</span><span class="token operator">:</span> <span class="token string">&#39;/favicon.ico&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span> <span class="token literal-property property">rel</span><span class="token operator">:</span> <span class="token string">&#39;stylesheet&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">href</span><span class="token operator">:</span> <span class="token string">&#39;//static.aliyin.com/service/css/element.css?v=123&#39;</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token comment">// 对应 {{ HEAD }}即 head标签体内容----end</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.重新运行项目后，访问页面右键查看源代码即可看到标签属性的变化。</p><h3 id="自定义页面布局" tabindex="-1"><a class="header-anchor" href="#自定义页面布局" aria-hidden="true">#</a> 自定义页面布局</h3><p>定制模板页面，只需要在应用根目录下创建一个 app.html 的文件，就可以覆盖 Nuxt.js 默认模板。</p><p>（但一般不这么用，因为实际项目使用.vue组件化文件开发）</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">{{</span> <span class="token attr-name">HTML_ATTRS</span> <span class="token attr-name">}}</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span> <span class="token attr-name">{{</span> <span class="token attr-name">HEAD_ATTRS</span> <span class="token attr-name">}}</span><span class="token punctuation">&gt;</span></span>
{{ HEAD }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token attr-name">{{</span> <span class="token attr-name">BODY_ATTRS</span> <span class="token attr-name">}}</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>这是导航栏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 主体内容 --&gt;</span>
{{ APP }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="组件布局" tabindex="-1"><a class="header-anchor" href="#组件布局" aria-hidden="true">#</a> 组件布局</h3><p>添加layouts目录，并添加default.vue文件</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>Test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nuxt</span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在布局文件中添加 <!----> 组件用于显示页面的主体内容。</p><h4 id="自定义组件布局" tabindex="-1"><a class="header-anchor" href="#自定义组件布局" aria-hidden="true">#</a> 自定义组件布局</h4><p>在 layouts 目录中的创建 .vue 文件来自定义布局， 然后通过页面组件（pages目录下的文件）中的 layout 属性来引用自定义布局。</p><p>示例：</p><ol><li>下面我们创建 layouts/blog.vue 文件，在其中定义一个博客上下结构的布局文，如下</li></ol><p>注意：在布局文件中添加 组件, 用于显示页面的主体内容。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 头部导航 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>博客导航栏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 主体内容 --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nuxt</span> <span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>在 pages 目录下面的页面组件通过 layout 属性引用自定义组件布局，如 pages/atricle.vue</li></ol><p>layout 默认值是 default。注意不写 layout ，则页面组件默认采用的是 default.vue 布局。context为上下文对象</p><p>注意： 删除根目录下创建的 app.html 页面布局文件，组件布局才会生效。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>这是主体内容-文章列表<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
<span class="token comment">// 引用的是 /layouts/blog.vue 布局</span>
<span class="token comment">// 第一种方式：</span>
<span class="token comment">// layout: &#39;blog&#39;,</span>
<span class="token comment">// 第二种方式：</span>
<span class="token function">layout</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;context&#39;</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token string">&#39;blog&#39;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>. 注意：如果是 layouts/blog 目录下放了 index.vue ，直接通过 layout: &#39;blog&#39; 是找不到这个页面的，</p><p>需 要指定文件名 index 才找得到，即 layout: &#39;blog/index&#39; 。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
<span class="token function">layout</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;context&#39;</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span>
	<span class="token comment">// 要写完整路径，加上 index, 才可引用 blog/index.vue 布局</span>
	<span class="token keyword">return</span> <span class="token string">&#39;blog/index&#39;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="错误页" tabindex="-1"><a class="header-anchor" href="#错误页" aria-hidden="true">#</a> 错误页</h3><ol><li><p>通过编辑 layouts/error.vue 文件来定制化错误页面（404，500等）。</p><p>警告: 虽然此文件放在 layouts 文件夹中, 但应该将它看作是一个页面(page) ，而不是布局使用。</p></li><li><p>示例 layouts/error.vue</p></li></ol><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>error.statusCode === 404<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
您访问的页面不存在：{{error.message}}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>请求接口失败或超时！请刷新重试<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
<span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 直接引用Error错误对象</span>
<span class="token comment">// 可只为 blog 布局定制的错误页面, 默认 default 所有布局的错误页</span>
<span class="token comment">// layout: &#39;blog&#39;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="设置当前页面头部标签" tabindex="-1"><a class="header-anchor" href="#设置当前页面头部标签" aria-hidden="true">#</a> 设置当前页面头部标签</h2><p>使用 head 方法设置当前页面的头部标签。</p><p>在 head 方法里可通过 this 关键字来获取组件的数据，可以利用页面组件的数据来设置个性化的 meta 标 签。</p><ol><li>修改首页组件 page/index.vue</li></ol><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">&gt;</span></span>这是主体内容-首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;博客文章列表页&#39;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// 使用 head 方法设置当前页面的头部标签。</span>
<span class="token comment">// 在 head 方法里可通过 this 关键字来获取组件的数据，你可以利用页面组件的数据来设置个性化的 meta 标签</span>
<span class="token function">head</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">bodyAttrs</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 对应 {{ HOBDY_ATTRS }} body标签属性</span>
			<span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token string">&#39;background-color: #fff&#39;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>title<span class="token punctuation">,</span>
		<span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">[</span>
<span class="token comment">// hid 指定标识，防止不能覆盖父组件的 &lt;meta name=&quot;description&quot; &gt; 标签，</span>
<span class="token comment">// hid: &#39;description&#39; 就会覆盖父组件中的属性为 name=&quot;description&quot; 的meta标签</span>
				<span class="token punctuation">{</span> <span class="token literal-property property">hid</span><span class="token operator">:</span> <span class="token string">&#39;description&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;description&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">&#39;nuxt.js技术栈&#39;</span> <span class="token punctuation">}</span>
			 <span class="token punctuation">]</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意：为了避免子组件中的meta标签，不能正确覆盖父组件中相同的name名称的meta标签，而产生重复meta的 现象，可使用 hid 键指定要覆盖的父组件name值与hid相同的meta标签。</p><p>请阅读关于 vue-meta (https://vue-meta.nuxtjs.org/api/#debouncewait)的更多信息。 如上面 hid: &#39;description&#39; 就会覆盖父组件中的属性为 name=&quot;description&quot; 的meta标签，不会出现多个的<meta name="description"></p><h2 id="插件" tabindex="-1"><a class="header-anchor" href="#插件" aria-hidden="true">#</a> 插件</h2><p>Nuxt.js允许您在运行Vue.js应用程序之前执行js插件。</p><p>这在您需要使用自己的库或第三方模块时特别有用。</p><p>可以将自定义插件注入到 Vue 实例（客户端），context（服务器端）、store(Vuex)。 新增的属性或方法名使用 $ 作为前缀。</p><h3 id="注入vue实例" tabindex="-1"><a class="header-anchor" href="#注入vue实例" aria-hidden="true">#</a> 注入vue实例</h3><p>将内容注入Vue实例，避免重复引入，在Vue原型上挂载注入一个函数，所有组件内都可以访问(不包含服务器端)。</p><p>plugins/vue-inject.js :</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">$myVueFunction</span> <span class="token operator">=</span> <span class="token parameter">string</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;绑定到Vue实例的方法参数&#39;</span><span class="token punctuation">,</span> string<span class="token punctuation">)</span>


<span class="token comment">//事件总线的两种注入方式</span>
<span class="token comment">//1---</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$bus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//2---这种应该是直接注入到实例，使每个组件实例this身上都能直接找到$bus，而方式1是通过原型链查找</span>
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> inject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">&#39;bus&#39;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>nuxt.config.js:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token string">&#39;~/plugins/vue-inject.js&#39;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这样，您就可以在所有Vue组件中使用该函数。</p><p>plugin-vue.vue :</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code>export default {
	mounted () {
		this.$myVueFunction(&#39;test&#39;)
		}
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="注入-context" tabindex="-1"><a class="header-anchor" href="#注入-context" aria-hidden="true">#</a> 注入 context</h3><p>context注入方式和在其它vue应用程序中注入类似。</p><p>plugins/ctx-inject.js : {app}为解析context对象。然后一样需要在nuxt.config.js的plugins中导入</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> app <span class="token punctuation">}</span><span class="token punctuation">,</span> inject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
app<span class="token punctuation">.</span><span class="token function-variable function">myContextFunction</span> <span class="token operator">=</span> <span class="token parameter">string</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;绑定到Context的方法参数&#39;</span><span class="token punctuation">,</span> string<span class="token punctuation">)</span>
    <span class="token comment">//直接绑定在context上也是可以的</span>
    <span class="token comment">// context.injectTest=()=&gt;{	console.log(&#39;inject test&#39;) }</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>现在，只要您获得context，你就可以使用该函数。 plugin-ctx.vue :</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
	<span class="token function">asyncData</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		context<span class="token punctuation">.</span>app<span class="token punctuation">.</span><span class="token function">myContextFunction</span><span class="token punctuation">(</span><span class="token string">&#39;ctx!&#39;</span><span class="token punctuation">)</span>
		<span class="token comment">//context.injectTest()</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="同时注入context、vue、vuex实例" tabindex="-1"><a class="header-anchor" href="#同时注入context、vue、vuex实例" aria-hidden="true">#</a> 同时注入context、vue、vuex实例</h3><p>如果需要将上述的东西同时注入，则可以使用inject方法，它是plugin导出函数的第二个参数，将内容注入vue实例的方式与在Vue应用程序中进行注入类似。系统会自动将 $ 添加到方法名的前面</p><p>plugins/all-inject.js:</p><p>然后一样需要在nuxt.config.js的plugins中导入。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> app <span class="token punctuation">}</span><span class="token punctuation">,</span> inject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">&#39;myAllFunction&#39;</span><span class="token punctuation">,</span> <span class="token parameter">string</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;绑定到Context和Vue的方法参数&#39;</span><span class="token punctuation">,</span> string<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注入后，context.$xxx可以执行，context.app.$xxx也可以执行</p><p>现在您就可以在 context ，或者 Vue 实例中的 this ，</p><p>或者 Vuex 的 actions/mutations 方法中的 this 来调用 myAllFunction 方法。</p><p>plugin-all.vue :</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
	<span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$myAllFunction</span><span class="token punctuation">(</span><span class="token string">&#39;mounted钩子调用myAllFunction&#39;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function">asyncData</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		context<span class="token punctuation">.</span>app<span class="token punctuation">.</span><span class="token function">$myAllFunction</span><span class="token punctuation">(</span><span class="token string">&#39;asyncData调用myAllFunction&#39;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="只在客户端或服务端使用的插件" tabindex="-1"><a class="header-anchor" href="#只在客户端或服务端使用的插件" aria-hidden="true">#</a> 只在客户端或服务端使用的插件</h3><p>nuxt.config.js:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
<span class="token punctuation">{</span> <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">&#39;~/plugins/combined-inject.js&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span> <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">&#39;~/plugins/combined-inject.js&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;client&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 插件只会在客户端运行。</span>
<span class="token punctuation">{</span> <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">&#39;~/plugins/combined-inject.js&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;server&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 插件只会在服务端运行。</span>
<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="异步加载数据-asyncdata" tabindex="-1"><a class="header-anchor" href="#异步加载数据-asyncdata" aria-hidden="true">#</a> 异步加载数据 asyncData</h2><p>Nuxt.js 扩展了 Vue.js，增加了一个叫 asyncData 的方法，使得我们可以在渲染组件之前异步获取数据。</p><p>asyncData 方法会在组件（限于页面组件）每次加载之前被调用。它可以在服务端或路由更新之前被调用。 在这 个方法被调用的时候，第一个参数 context 被设定为当前页面的上下文对象，你可以利用 asyncData 方法来获取 数据，Nuxt.js 会将 asyncData 返回的数据与 data 方法返回的数据一起合并后返回给当前组件。</p><p>Nuxt.js 官方提供了 @nuxtjs/axios 模块，此模块中还包含了 axios 、@nuxtjs/proxy 模块。其中 @nuxtjs/proxy 是解决 Nuxt 中跨域问题，进行代理转发请求。 所以我们只要安装 @nuxtjs/axios 即可：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>npm install @nuxtjs/axios
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li><p>在 nuxt.config.js 引入 @nuxtjs/axios 模块</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>modules: [
&#39;@nuxtjs/axios&#39;,
],
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="请求数据接口" tabindex="-1"><a class="header-anchor" href="#请求数据接口" aria-hidden="true">#</a> 请求数据接口</h3><p>Nuxt.js 提供了几种不同的方法来使用 asyncData 方法，你可以选择自己熟悉的一种来用：</p><ol><li>返回一个 Promise , nuxt.js会等待该 Promise 被解析之后才会设置组件的数据，从而渲染组件.</li><li>使用 async 或 await</li></ol><p>注意 ：因为 asyncData方法是在当前组件加载之前被调用，不能在 asyncData 方法体中用 this 传值</p><p>/pages/index.vue中：</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span> 首页标题： {{title}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>标题：{{data.title}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>内容：{{data.content}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>作者：{{data.author}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
<span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;博客文章列表页&#39;</span>
		<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// 加载组件之前服务端会调用</span>
<span class="token comment">// 方式1：使用了两个return</span>
<span class="token function">asyncData</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>$axios<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">return</span> $axios<span class="token punctuation">.</span><span class="token function">$get</span><span class="token punctuation">(</span><span class="token string">&#39;http://mengxuegu.com:7300/mock/5ea4394b2a2f716419f893be/blogweb/test&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;response&#39;</span><span class="token punctuation">,</span> response<span class="token punctuation">)</span>
	<span class="token keyword">const</span> data <span class="token operator">=</span> response<span class="token punctuation">.</span>data
	<span class="token keyword">return</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span><span class="token comment">// {data: data}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
    <span class="token comment">// 方式2 请求数据接口 async await</span>
<span class="token keyword">async</span> <span class="token function">asyncData</span><span class="token punctuation">(</span> <span class="token parameter"><span class="token punctuation">{</span>$axios<span class="token punctuation">}</span></span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> $axios<span class="token punctuation">.</span><span class="token function">$get</span><span class="token punctuation">(</span><span class="token string">&#39;http://mengxuegu.com:7300/mock/5ea4394b2a2f716419f893be/blog-web/test&#39;</span><span class="token punctuation">)</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;response&#39;</span><span class="token punctuation">,</span> response<span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token literal-property property">data</span><span class="token operator">:</span> response<span class="token punctuation">.</span>data<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="asyncdata里请求数据-刷新后网页报错" tabindex="-1"><a class="header-anchor" href="#asyncdata里请求数据-刷新后网页报错" aria-hidden="true">#</a> asyncData里请求数据，刷新后网页报错</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token function">asyncData</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> $axios<span class="token punctuation">,</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">await</span> $axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/note/getNotesById&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> params<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;err&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>从其他页面跳转过来时，是正常请求到数据的，刷新网页后报错：</p><p>Error: connect ECONNREFUSED 127.0.0.1:80 at TCPConnectWrap.afterConnect</p><p>大概意思就是跑去请求了80端口号。</p><p><strong>测试asyncData里输出process.client和process.server参数时，</strong></p><p>由其他页面跳转时，client为true，server为false，意思是来自客户端渲染。</p><p>而刷新页面时，client为false，server为true，并且这些已不在浏览器里输出，证明确实是来自服务端的渲染。</p><p><strong>经过测试可以推断：asyncData里的东西初次渲染是客户端，如果是网页刷新或通过手动url进入的则是服务端渲染。</strong></p><p><strong>推断：</strong></p><p>客户端渲染时，请求&quot;/note/xxx&quot;这类地址，它能帮你做代理转发。</p><p>而服务端渲染时，面对&quot;/note/xxx&quot;这类地址，它给你默认请求了本机地址的80端口。所以理论上补充完整请求地址是可以解决的。</p><h3 id="解决办法-补全请求地址和代理前缀" tabindex="-1"><a class="header-anchor" href="#解决办法-补全请求地址和代理前缀" aria-hidden="true">#</a> 解决办法：补全请求地址和代理前缀</h3><p>在asyncData里补全请求路径即可。因为端口号可能改变，为了以后打包项目不做过多的更改，新建一个文件来管理端口号。</p><p>plugins/port.js:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">3000</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> port<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>nuxt.config.js:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> port <span class="token keyword">from</span> <span class="token string">&#39;./plugins/port&#39;</span>   <span class="token comment">//不知道为什么路径用@的话会找不到。</span>
<span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{</span>
    <span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token comment">//配置项目端口号</span>
        <span class="token literal-property property">port</span><span class="token operator">:</span> port
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最后文件里：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> port <span class="token keyword">from</span> <span class="token string">&quot;@/plugins/port&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">asyncData</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> $axios<span class="token punctuation">,</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">await</span> $axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://localhost:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/api/note/getNotesById</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
              <span class="token literal-property property">id</span><span class="token operator">:</span> params<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;err&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>asyncData里的东西初次渲染是客户端，如果是网页刷新或通过手动url进入的则是服务端渲染。</p><p>个人实践推论：服务端渲染发送axios请求时，如果不补充完整地址，它会默认请求127.0.0.1:80，会导致请求失败。所以在asyncData里要补充完整请求地址。</p><h2 id="nuxt-js中配置代理解决跨域" tabindex="-1"><a class="header-anchor" href="#nuxt-js中配置代理解决跨域" aria-hidden="true">#</a> Nuxt.js中配置代理解决跨域</h2><p>nuxt.config.js开启代理配置:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 数组</span>
	<span class="token string">&#39;@nuxtjs/axios&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 引用模块</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token literal-property property">axios</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 对象</span>
	<span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 开启代理</span>
	<span class="token literal-property property">prefix</span><span class="token operator">:</span> <span class="token string">&#39;/api&#39;</span> <span class="token comment">// 添加请求前缀（不写这个，vue文件里请求就要前缀就要自己加了）</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token literal-property property">proxy</span><span class="token operator">:</span><span class="token punctuation">{</span> <span class="token comment">// 对象</span>
	<span class="token comment">// 将 /api 替换为 &#39;&#39;, 然后代理转发到 target 指定的 url</span>
	<span class="token string-property property">&#39;/api&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;http://mengxuegu.com:7300/blog-web&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">&#39;^/api&#39;</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> 
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>pages/index.vue:</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
<span class="token comment">// 方式2 请求数据接口 async await</span>
<span class="token keyword">async</span> <span class="token function">asyncData</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>$axios<span class="token punctuation">,</span> error<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> $axios<span class="token punctuation">.</span><span class="token function">$get</span><span class="token punctuation">(</span><span class="token string">&#39;/test&#39;</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token literal-property property">data</span><span class="token operator">:</span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">statusCode</span><span class="token operator">:</span> <span class="token number">404</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&#39;未找到请求资源。&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment">//这个会导致网页跳转至错误页</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="axios-拦截器" tabindex="-1"><a class="header-anchor" href="#axios-拦截器" aria-hidden="true">#</a> $axios 拦截器</h2><ol><li>创建 plugins/interceptor.js 请求拦截器</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> store<span class="token punctuation">,</span> route<span class="token punctuation">,</span> redirect<span class="token punctuation">,</span> $axios<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
    $axios<span class="token punctuation">.</span><span class="token function">onRequest</span><span class="token punctuation">(</span> <span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;请求拦截器&#39;</span><span class="token punctuation">)</span> 
        <span class="token keyword">return</span> config <span class="token punctuation">}</span><span class="token punctuation">)</span>
    $axios<span class="token punctuation">.</span><span class="token function">onResponse</span><span class="token punctuation">(</span> <span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;响应拦截器&#39;</span><span class="token punctuation">,</span> response<span class="token punctuation">)</span> 
        <span class="token keyword">return</span> response <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">)</span>
    $axios<span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span> <span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;error.response.status&#39;</span><span class="token punctuation">,</span> error<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status<span class="token punctuation">)</span> 
    <span class="token punctuation">}</span>
             <span class="token punctuation">)</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><p>nuxt.config.js引入插件</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>plugins: [&#39;~/plugins/interceptor.js&#39;]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><h2 id="插件方式解耦在-nuxtjs-中调用-api" tabindex="-1"><a class="header-anchor" href="#插件方式解耦在-nuxtjs-中调用-api" aria-hidden="true">#</a> <strong>插件方式解耦在</strong> <strong>NuxtJs</strong> <strong>中调用</strong> <strong>api</strong></h2><p>创建api插件api/test.js:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> $axios <span class="token punctuation">}</span><span class="token punctuation">,</span> inject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
    <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">&#39;test&#39;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token keyword">await</span> $axios<span class="token punctuation">.</span><span class="token function">$get</span><span class="token punctuation">(</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/test</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> 
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>引入插件</strong>:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;~/api/test.js&#39;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>组件中调用</strong>:</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">async</span> <span class="token function">asyncData</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> app <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> app<span class="token punctuation">.</span><span class="token function">$test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span> 
<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span> 
        <span class="token function">testApiPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
            <span class="token punctuation">}</span> 
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="路由vue-router" tabindex="-1"><a class="header-anchor" href="#路由vue-router" aria-hidden="true">#</a> 路由vue-router</h2><p>Nuxt.js 依据 pages 目录结构自动生成 vue-router 模块的路由配置，不需要我们去额外的配置路由。</p><ol><li>Nuxt 根据 pages 下面的 article.vue 和 index.vue 页面组件，生成如下路由配置：</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
<span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/article&quot;</span><span class="token punctuation">,</span>
<span class="token literal-property property">component</span><span class="token operator">:</span> <span class="token string">&quot;pages/article.vue&quot;</span><span class="token punctuation">,</span>
<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;article&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
<span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
<span class="token literal-property property">component</span><span class="token operator">:</span> <span class="token string">&quot;pages/index.vue&quot;</span><span class="token punctuation">,</span>
<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;index&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/xjblog/assets/image-20220116213226970-507fbbe0.png" alt="image-20220116213226970"></p><ol start="2"><li>在页面之间使用路由跳转，官方建议使用&lt;nuxt-link&gt; 标签,作用与Vue的 &lt;router-link&gt;一致</li></ol><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 头部导航 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- &lt;li&gt;&lt;a href=&quot;&quot;&gt;首页&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;&quot;&gt;文章&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;&quot;&gt;问答&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;&quot;&gt;个人中心&lt;/a&gt;&lt;/li&gt; --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nuxt-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>首页<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nuxt-link</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nuxt-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/article<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>文章<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nuxt-link</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nuxt-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>问答<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nuxt-link</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nuxt-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>个人中心<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nuxt-link</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 主体内容 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nuxt</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="基础路由" tabindex="-1"><a class="header-anchor" href="#基础路由" aria-hidden="true">#</a> 基础路由</h3><ol><li>在 pages 下创建 user 目录，user目录下创建 index.vue 和 one.vue 结构如下：</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>pages/
--| user/ ++++++
-----| index.vue ++++++
-----| one.vue ++++++
--| article.vue
--| index.vue
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>，Nuxt.js 自动生成的路由配置如下：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">router</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
	<span class="token punctuation">{</span>
		<span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/user&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">component</span><span class="token operator">:</span> <span class="token string">&#39;pages/user/index.vue&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;user&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>
		<span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/user/one&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">component</span><span class="token operator">:</span> <span class="token string">&#39;pages/user/one.vue&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;user-one&#39;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>	
		<span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/article&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">component</span><span class="token operator">:</span> <span class="token string">&quot;pages/article.vue&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;article&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>
		<span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">component</span><span class="token operator">:</span> <span class="token string">&quot;pages/index.vue&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;index&quot;</span>
	<span class="token punctuation">}</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="动态路由" tabindex="-1"><a class="header-anchor" href="#动态路由" aria-hidden="true">#</a> 动态路由</h3><p>在 Nuxt.js 里面定义带参数的动态路由，需要创建对应的以 _ 下划线作为前缀的 Vue 文件 或 目录</p><ol><li>在 pages/user 目录下创建以 _ 下划线作为前缀的 Vue 文件 _id.vue</li></ol><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code>pages/
--| user/
-----| _id.vue # 通过id查看用户详情，++++++
-----| index.vue
-----| one.vue
--| article.vue
--| index.vue
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2.Nuxt.js 生成对应的路由配置表为：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>router: {
routes: [
{
	path: &quot;/user/:id&quot;,
	component: &quot;pages/user/_id.vue&quot;,
	name: &quot;user-id&quot;
},
]
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.路由地址中 :id 用于匹配请求参数。</p><p>在 user/_id.vue 组件中使用 validate 校验参数值是否合法。</p><p>asyncData 通过 {params} 获取参数值，不能通过 this.$route.params.id 这种获取方式获取</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>
获取到的用户id是：{{ $route.params.id }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
<span class="token comment">// 校验参数值</span>
<span class="token function">validate</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">// 必须是number类型</span>
	<span class="token keyword">return</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\d+$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span>  <span class="token comment">//return true才会进入该页面</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// 查询数据</span>
<span class="token function">asyncData</span><span class="token punctuation">(</span> <span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">// this.$route.params.id 这种获取方式是错的</span>
<span class="token keyword">const</span> id <span class="token operator">=</span> params<span class="token punctuation">.</span>id
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">查询id=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">的用户数据</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/xjblog/assets/image-20220116214006261-792e5fb9.png" alt="image-20220116214006261"></p><h3 id="下划线为前缀的目录" tabindex="-1"><a class="header-anchor" href="#下划线为前缀的目录" aria-hidden="true">#</a> 下划线为前缀的目录</h3><p>在 pages 目录下创建 以 _ 下划线作为前缀的问答模块目录 _question ，并创建两个文件 index.vue 和 view.vue 以下目录结构：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>pages/
--| _question/ # 问答模块，热门hot，最新new，待回答wait
-----| index.vue # 问答列表，根据不同类型问题，显示不同列表
-----| view.vue # 问题详情
--| user/
-----| _id.vue
-----| index.vue
-----| one.vue
--| article.vue
--| index.vue

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Nuxt.js 生成对应的路由配置表为：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">router</span><span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
<span class="token comment">// http://localhost:8000/hot</span>
<span class="token punctuation">{</span>
<span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/:question&quot;</span><span class="token punctuation">,</span>
<span class="token literal-property property">component</span><span class="token operator">:</span> <span class="token string">&quot;pages/_question/index.vue&quot;</span><span class="token punctuation">,</span>
<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;question&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// http://localhost:8000/hot/view</span>
<span class="token punctuation">{</span>
<span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/:question/view&quot;</span><span class="token punctuation">,</span>
<span class="token literal-property property">component</span><span class="token operator">:</span> <span class="token string">&quot;pages/_question/view.vue&quot;</span><span class="token punctuation">,</span>
<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;question-view&quot;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>路由地址中 :question 用于匹配请求参数。</p><p>在 pages/_question/index.vue 组件中使用 validate 校验参数值是否合法。</p><p>asyncData 通过 {params} 获取参数值，不能通过 this.$route.params.id 这种获取方式获取。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>问答列表页面—— {{ $route.params.question }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
<span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>params<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;接收的参数值为&#39;</span><span class="token punctuation">,</span> params<span class="token punctuation">.</span>question<span class="token punctuation">)</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;hot&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;wait&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;red&#39;</span><span class="token punctuation">]</span>
<span class="token comment">// 必须是为数组中的某一个元素</span>
<span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>question<span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">asyncData</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>params<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;查询问题列表&#39;</span><span class="token punctuation">,</span> params<span class="token punctuation">.</span>question<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后就可以访问localhost:8080/hot 、localhost:8080/hot/view等</p><h3 id="嵌套路由" tabindex="-1"><a class="header-anchor" href="#嵌套路由" aria-hidden="true">#</a> 嵌套路由</h3><ol><li>创建内嵌子路由，你需要添加一个 Vue 文件，同时添加一个与该文件同名的目录用来存放子视图组件。</li><li>在父组件( .vue 文件) 内增加 &lt;nuxt-child&gt; 用于显示子视图内容。</li></ol><p>比如： 针对首页 pages/index.vue 添加子路由，则文件结构如下：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>pages/
--| index/ # 创建一个 index 同名的目录名
-----| _id.vue # 子路由组件
--| index.vue
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Nuxt.js 自动生成的路由配置如下：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">router</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// http://localhost:8000/</span>
	<span class="token punctuation">{</span>
		<span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">component</span><span class="token operator">:</span> <span class="token string">&#39;pages/index.vue&#39;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;index&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
		<span class="token comment">// ?表示可传可不传，如果一定要，则index目录下创建一个 index.html</span>
		<span class="token comment">// http://localhost:8000/1</span>
		<span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;:id?&quot;</span><span class="token punctuation">,</span>   <span class="token comment">//删掉问号，而又没有index.vue时，访问：8000/则为404</span>
		<span class="token literal-property property">component</span><span class="token operator">:</span><span class="token string">&quot;pages/index/_id.vue&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;index-id&quot;</span>
		<span class="token punctuation">}</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span>
		<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="中间件" tabindex="-1"><a class="header-anchor" href="#中间件" aria-hidden="true">#</a> 中间件</h2><p>中间件允许您定义一个自定义函数运行在一个页面或一组页面渲染之前。可用于权限判断，有权限才可访问 对应页面</p><p>每一个中间件应放置在 middleware/ 目录。</p><p>文件名的名称将成为中间件名称 ( middleware/auth.js 将成为 auth 中间件)。</p><p>在 nuxt.config.js 、 layouts 或者 pages 中使用中间件。</p><h3 id="创建权限中间件" tabindex="-1"><a class="header-anchor" href="#创建权限中间件" aria-hidden="true">#</a> 创建权限中间件</h3><ol><li>创建 nuxt-demo2\middleware\auth.js ，其中文件名 auth 就是中间件名称 。 一个中间件接收 context 作为第一个参数。</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> store<span class="token punctuation">,</span> redirect <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;auth.js认证中间件被执行&#39;</span><span class="token punctuation">)</span>
    <span class="token comment">// 有store实例，且有userInfo</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>store <span class="token operator">||</span> <span class="token operator">!</span>store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>userInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>   <span class="token comment">//重定向回首页</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="使用中间件" tabindex="-1"><a class="header-anchor" href="#使用中间件" aria-hidden="true">#</a> 使用中间件</h3><p>在 nuxt.config.js 、 layouts 或者 pages 中使用中间件</p><ol><li>在 nuxt-demo2\pages\user\index.vue 页面组件中使用中间件</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">middleware</span><span class="token operator">:</span> <span class="token string">&#39;auth&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">middleware</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;check&quot;</span><span class="token punctuation">,</span><span class="token string">&#39;check2&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment">//多种中间件使用方法</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果是layout文件使用了中间件，则只要引用了这个布局的页面组件，当浏览器访问时都先执行中间件。</p><p>2.在 nuxt.config.js 中使用中间件</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">router</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">middleware</span><span class="token operator">:</span> <span class="token string">&#39;auth&#39;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>auth 中间件在每个路由改变时被调用 。</p><h2 id="keep-alive" tabindex="-1"><a class="header-anchor" href="#keep-alive" aria-hidden="true">#</a> keep-alive</h2><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code>&lt;nuxt-child
  keep-alive
  :keep-alive-props=&quot;{ include: includeArr }&quot;   //除了包含include，还有排除exclude
&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nuxt-child</span><span class="token punctuation">&gt;</span></span>

data() {
    return {
      includeArr: [&quot;Category&quot;, &quot;Note&quot;],   //这里要名字要对应组件里的name属性
    };
},
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code>export default{
	name:&#39;Category&#39;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="完整引入antd-vue" tabindex="-1"><a class="header-anchor" href="#完整引入antd-vue" aria-hidden="true">#</a> 完整引入antd-vue</h2><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>yarn add ant-design-vue
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>antd-ui.js:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> Antd <span class="token keyword">from</span> <span class="token string">&#39;ant-design-vue/lib&#39;</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Antd<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>nuxt.config.js:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">css</span><span class="token operator">:</span> <span class="token punctuation">[</span>
     <span class="token string">&#39;ant-design-vue/dist/antd.css&#39;</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&#39;@/plugins/antd-ui&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="按需引入antd-vue" tabindex="-1"><a class="header-anchor" href="#按需引入antd-vue" aria-hidden="true">#</a> 按需引入antd-vue</h2><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>yarn add ant-design-vue
yarn add babel-plugin-import -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>nuxt.config.js:(不再需要css里引入全局样式和创建plugin文件)</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token literal-property property">build</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 配置 按需加载功能 需 babel-plugin-import 支持</span>
    <span class="token literal-property property">transpile</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;ant-design-vue&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">babel</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">[</span>
          <span class="token string">&quot;import&quot;</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">libraryName</span><span class="token operator">:</span> <span class="token string">&quot;ant-design-vue&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">libraryDirectory</span><span class="token operator">:</span> <span class="token string">&quot;es&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token string">&quot;css&quot;</span> <span class="token comment">// 如果需要使用 less 方式去按需加载的话，则需要改为 true ，并且添加下面loaders 配置</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">&quot;ant-design-vue&quot;</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 此处是 style 为 true 时所需添加的配置 </span>
    <span class="token literal-property property">loaders</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">less</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">lessOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">javascriptEnabled</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token comment">// modifyVars 可用来自定义主题</span>
          <span class="token literal-property property">modifyVars</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;primary-color&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#41b883&quot;</span><span class="token punctuation">,</span>
            <span class="token string-property property">&quot;layout-body-background&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#fff&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="antd-vue配置中文" tabindex="-1"><a class="header-anchor" href="#antd-vue配置中文" aria-hidden="true">#</a> antd-vue配置中文</h2><p>根文件：pages/index.vue:</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ConfigProvider</span> <span class="token attr-name">:locale</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>locale<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Home</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ConfigProvider</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> locale <span class="token keyword">from</span> <span class="token string">&quot;ant-design-vue/lib/locale-provider/zh_CN&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ConfigProvider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;ant-design-vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;IndexPage&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ConfigProvider
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      locale<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意：引入dataPicker后，点击后会报错</p><p>[Vue warn]: Failed to resolve directive: ant-input。</p><p>引入Input并加载就不会报错了。</p><p>或者引入Vue，Vue.use（DatePicker）也可以解决。并且加载文件大小比第一种小一点。</p><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> DatePicker<span class="token punctuation">,</span> Input <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;ant-design-vue&quot;</span><span class="token punctuation">;</span>      <span class="token comment">//方法一</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">==</span>方法二
<span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>DatePicker<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">==</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;Home&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    DatePicker<span class="token punctuation">,</span>
    Input<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="使用less" tabindex="-1"><a class="header-anchor" href="#使用less" aria-hidden="true">#</a> 使用less</h2><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>yarn add less@4.1.1 less-loader@7.3.0
yarn add @nuxtjs/style-resources -D
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>安装完即可在vue文件中使用lang=&#39;less&#39;。</p><p>如果需要全局引入less文件还需配置</p><p>nuxt.config.js:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>	
	<span class="token literal-property property">buildModules</span><span class="token operator">:</span> <span class="token punctuation">[</span>   
        <span class="token string">&#39;@nuxtjs/style-resources&#39;</span><span class="token punctuation">,</span>  
   <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">css</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&#39;@/assets/global.less&#39;</span>  
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">styleResources</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">less</span><span class="token operator">:</span> <span class="token string">&#39;./assets/global.less&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="按需引用antd-vue后的bug" tabindex="-1"><a class="header-anchor" href="#按需引用antd-vue后的bug" aria-hidden="true">#</a> 按需引用antd-vue后的bug</h2><p>比如a.b皆为子路由展示组件（content区）。</p><p>在a页面的组件中没有引入任何antd的组件，在跳转到b页面（引入过任意antd组件并声明注册组件）时，顶部栏（header区）和侧边栏（sider区）的字体和颜色都发生了肉眼可见的变化。</p><p>经测试，这种变化就是由于b页面引入并注册了任意antd组件造成的，跳转到其他页面并不会有这种情况。</p><p>猜测这种变化的原因是引入时样式被覆盖了，并且优先级特别高，有的甚至！important都无法修改。</p><p>一劳永逸的结局办法：</p><p>在一个插件文件中，</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Input <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;ant-design-vue&#39;</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Input<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="antd-vue多选框不换行" tabindex="-1"><a class="header-anchor" href="#antd-vue多选框不换行" aria-hidden="true">#</a> antd-vue多选框不换行</h2><div class="language-less line-numbers-mode" data-ext="less"><pre class="language-less"><code><span class="token selector">/deep/ .ant-select-selection--multiple</span> <span class="token punctuation">{</span>
  <span class="token property">overflow-x</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
  <span class="token property">max-height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 4px 0<span class="token punctuation">;</span>
  <span class="token comment">//可以修改一下滚动条样式</span>
  <span class="token comment">// &amp;::-webkit-scrollbar {</span>
  <span class="token comment">//   width: 4px;</span>
  <span class="token comment">// }</span>
  <span class="token comment">// &amp;::-webkit-scrollbar-thumb {</span>
  <span class="token comment">//   background-color: #caccd0;</span>
  <span class="token comment">//   outline: none;</span>
  <span class="token comment">//   border-radius: 4px;</span>
  <span class="token comment">// }</span>
<span class="token punctuation">}</span>
<span class="token comment">// 重要两行</span>
<span class="token selector">/deep/ .ant-select-selection--multiple .ant-select-selection__rendered</span> <span class="token punctuation">{</span>
  <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline<span class="token operator">-</span>flex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/xjblog/assets/app-6fcf50f1.js" defer></script>
  </body>
</html>
