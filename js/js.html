<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.67">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>JavaScript: ECMAScript+DOM+BOM | XJ-Blog</title><meta name="description" content="">
    <link rel="preload" href="/xjblog/assets/style-82cbce61.css" as="style"><link rel="stylesheet" href="/xjblog/assets/style-82cbce61.css">
    <link rel="modulepreload" href="/xjblog/assets/app-6fcf50f1.js"><link rel="modulepreload" href="/xjblog/assets/js.html-e4e97a5c.js"><link rel="modulepreload" href="/xjblog/assets/js.html-4ef7cd59.js"><link rel="prefetch" href="/xjblog/assets/index.html-2320b9e9.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-62e263ac.js" as="script"><link rel="prefetch" href="/xjblog/assets/css.html-4c80896c.js" as="script"><link rel="prefetch" href="/xjblog/assets/flex.html-1426b188.js" as="script"><link rel="prefetch" href="/xjblog/assets/grid.html-0f729e2f.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-ded121db.js" as="script"><link rel="prefetch" href="/xjblog/assets/less.html-6a112481.js" as="script"><link rel="prefetch" href="/xjblog/assets/scope.html-dc2a0b81.js" as="script"><link rel="prefetch" href="/xjblog/assets/tailwind.html-fa555d04.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-5752af20.js" as="script"><link rel="prefetch" href="/xjblog/assets/bibao.html-aa4d620f.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-aa0f78e5.js" as="script"><link rel="prefetch" href="/xjblog/assets/jstrash.html-8f9c2822.js" as="script"><link rel="prefetch" href="/xjblog/assets/TypeScript.html-5672f6be.js" as="script"><link rel="prefetch" href="/xjblog/assets/centOS-mysql.html-850f04a1.js" as="script"><link rel="prefetch" href="/xjblog/assets/CentOs安装mysql5.7.html-2b49dce8.js" as="script"><link rel="prefetch" href="/xjblog/assets/del_package_quick.html-8b384235.js" as="script"><link rel="prefetch" href="/xjblog/assets/express脚手架新建项目.html-7dcab6d9.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-d3f5453d.js" as="script"><link rel="prefetch" href="/xjblog/assets/nginx.html-10c449c2.js" as="script"><link rel="prefetch" href="/xjblog/assets/node-cors解决跨域.html-08172e34.js" as="script"><link rel="prefetch" href="/xjblog/assets/package.html-e473e5a6.js" as="script"><link rel="prefetch" href="/xjblog/assets/快速打包部署.html-d358c00c.js" as="script"><link rel="prefetch" href="/xjblog/assets/antd-antdPro.html-6a7ae3a2.js" as="script"><link rel="prefetch" href="/xjblog/assets/baiduMap.html-e87d3acf.js" as="script"><link rel="prefetch" href="/xjblog/assets/hooks.html-534d4e22.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-836ae580.js" as="script"><link rel="prefetch" href="/xjblog/assets/react.html-61eaccd6.js" as="script"><link rel="prefetch" href="/xjblog/assets/g2.html-e7881cb2.js" as="script"><link rel="prefetch" href="/xjblog/assets/git.html-e83da039.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-2e88778c.js" as="script"><link rel="prefetch" href="/xjblog/assets/mongodb.html-a6bf983c.js" as="script"><link rel="prefetch" href="/xjblog/assets/network.html-3692f09e.js" as="script"><link rel="prefetch" href="/xjblog/assets/nuxt-Vuex.html-8a106ffb.js" as="script"><link rel="prefetch" href="/xjblog/assets/nuxt笔记.html-e8b0231b.js" as="script"><link rel="prefetch" href="/xjblog/assets/print.html-70bb765a.js" as="script"><link rel="prefetch" href="/xjblog/assets/uni-app.html-d71eedf1.js" as="script"><link rel="prefetch" href="/xjblog/assets/vuePress.html-93772d8e.js" as="script"><link rel="prefetch" href="/xjblog/assets/webpack.html-255e041e.js" as="script"><link rel="prefetch" href="/xjblog/assets/websocket.html-984bdb18.js" as="script"><link rel="prefetch" href="/xjblog/assets/xlsx.html-26dddaf0.js" as="script"><link rel="prefetch" href="/xjblog/assets/小程序.html-1cb9bfc3.js" as="script"><link rel="prefetch" href="/xjblog/assets/部署nuxt项目.html-8e91aa6c.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-4cdfc9c8.js" as="script"><link rel="prefetch" href="/xjblog/assets/TypeScript.html-0c0b7c77.js" as="script"><link rel="prefetch" href="/xjblog/assets/defineProperty.html-4bef435b.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-d8eb0dd7.js" as="script"><link rel="prefetch" href="/xjblog/assets/vue2.html-6b28cda9.js" as="script"><link rel="prefetch" href="/xjblog/assets/VUEX.html-2a509512.js" as="script"><link rel="prefetch" href="/xjblog/assets/doit.html-8ebb448e.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-ec34db96.js" as="script"><link rel="prefetch" href="/xjblog/assets/vite.html-6e541edd.js" as="script"><link rel="prefetch" href="/xjblog/assets/vue3.html-71883397.js" as="script"><link rel="prefetch" href="/xjblog/assets/404.html-f9875e7b.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-f301dcdc.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-2dad9f7a.js" as="script"><link rel="prefetch" href="/xjblog/assets/css.html-8fd74399.js" as="script"><link rel="prefetch" href="/xjblog/assets/flex.html-5d6fc163.js" as="script"><link rel="prefetch" href="/xjblog/assets/grid.html-8c95192b.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-15e51930.js" as="script"><link rel="prefetch" href="/xjblog/assets/less.html-b163e0af.js" as="script"><link rel="prefetch" href="/xjblog/assets/scope.html-2b00b30e.js" as="script"><link rel="prefetch" href="/xjblog/assets/tailwind.html-f4608faa.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-5aa22cd3.js" as="script"><link rel="prefetch" href="/xjblog/assets/bibao.html-6e185429.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-b70b97a4.js" as="script"><link rel="prefetch" href="/xjblog/assets/jstrash.html-6f938127.js" as="script"><link rel="prefetch" href="/xjblog/assets/TypeScript.html-466479bb.js" as="script"><link rel="prefetch" href="/xjblog/assets/centOS-mysql.html-3533629d.js" as="script"><link rel="prefetch" href="/xjblog/assets/CentOs安装mysql5.7.html-f0b50638.js" as="script"><link rel="prefetch" href="/xjblog/assets/del_package_quick.html-82138503.js" as="script"><link rel="prefetch" href="/xjblog/assets/express脚手架新建项目.html-d0bac9df.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-fac93b33.js" as="script"><link rel="prefetch" href="/xjblog/assets/nginx.html-ad76d17a.js" as="script"><link rel="prefetch" href="/xjblog/assets/node-cors解决跨域.html-d919479a.js" as="script"><link rel="prefetch" href="/xjblog/assets/package.html-1680af4c.js" as="script"><link rel="prefetch" href="/xjblog/assets/快速打包部署.html-ba2952ce.js" as="script"><link rel="prefetch" href="/xjblog/assets/antd-antdPro.html-e38b041a.js" as="script"><link rel="prefetch" href="/xjblog/assets/baiduMap.html-38144312.js" as="script"><link rel="prefetch" href="/xjblog/assets/hooks.html-21aa2284.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-49401c60.js" as="script"><link rel="prefetch" href="/xjblog/assets/react.html-fa7d6f46.js" as="script"><link rel="prefetch" href="/xjblog/assets/g2.html-f635db4d.js" as="script"><link rel="prefetch" href="/xjblog/assets/git.html-35552097.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-58ea96b7.js" as="script"><link rel="prefetch" href="/xjblog/assets/mongodb.html-d67af31c.js" as="script"><link rel="prefetch" href="/xjblog/assets/network.html-4c136454.js" as="script"><link rel="prefetch" href="/xjblog/assets/nuxt-Vuex.html-7ec793c9.js" as="script"><link rel="prefetch" href="/xjblog/assets/nuxt笔记.html-46cec443.js" as="script"><link rel="prefetch" href="/xjblog/assets/print.html-07fa8979.js" as="script"><link rel="prefetch" href="/xjblog/assets/uni-app.html-67e96bd8.js" as="script"><link rel="prefetch" href="/xjblog/assets/vuePress.html-1b689bec.js" as="script"><link rel="prefetch" href="/xjblog/assets/webpack.html-ae6cb3f0.js" as="script"><link rel="prefetch" href="/xjblog/assets/websocket.html-eff628a7.js" as="script"><link rel="prefetch" href="/xjblog/assets/xlsx.html-75689a7d.js" as="script"><link rel="prefetch" href="/xjblog/assets/小程序.html-dcdb70c2.js" as="script"><link rel="prefetch" href="/xjblog/assets/部署nuxt项目.html-5dfe4e9c.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-ffdad007.js" as="script"><link rel="prefetch" href="/xjblog/assets/TypeScript.html-481bf9b4.js" as="script"><link rel="prefetch" href="/xjblog/assets/defineProperty.html-fd1c2a46.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-73649cac.js" as="script"><link rel="prefetch" href="/xjblog/assets/vue2.html-3bf7c541.js" as="script"><link rel="prefetch" href="/xjblog/assets/VUEX.html-94e0c565.js" as="script"><link rel="prefetch" href="/xjblog/assets/doit.html-930cb93b.js" as="script"><link rel="prefetch" href="/xjblog/assets/index.html-6426e621.js" as="script"><link rel="prefetch" href="/xjblog/assets/vite.html-f25a706d.js" as="script"><link rel="prefetch" href="/xjblog/assets/vue3.html-281128a9.js" as="script"><link rel="prefetch" href="/xjblog/assets/404.html-0040bf83.js" as="script"><link rel="prefetch" href="/xjblog/assets/style-e9220a04.js" as="script"><link rel="prefetch" href="/xjblog/assets/docsearch-1d421ddb.js" as="script"><link rel="prefetch" href="/xjblog/assets/index-82585c84.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/xjblog/" class=""><img class="logo" src="/xjblog/images/t.png" alt="XJ-Blog"><span class="site-name can-hide">XJ-Blog</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/xjblog/html" class="" aria-label="Html"><!--[--><!--]--> Html <!--[--><!--]--></a></div><div class="navbar-item"><a href="/xjblog/css" class="" aria-label="Css"><!--[--><!--]--> Css <!--[--><!--]--></a></div><div class="navbar-item"><a href="/xjblog/js" class="router-link-active" aria-label="Javascript"><!--[--><!--]--> Javascript <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue"><span class="title">Vue</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue"><span class="title">Vue</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/xjblog/vue2" class="" aria-label="Vue2"><!--[--><!--]--> Vue2 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/xjblog/vue3" class="" aria-label="Vue3"><!--[--><!--]--> Vue3 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/xjblog/react" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></div><div class="navbar-item"><a href="/xjblog/node" class="" aria-label="Node.js"><!--[--><!--]--> Node.js <!--[--><!--]--></a></div><div class="navbar-item"><a href="/xjblog/more" class="" aria-label="更多"><!--[--><!--]--> 更多 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/xjblog/html" class="" aria-label="Html"><!--[--><!--]--> Html <!--[--><!--]--></a></div><div class="navbar-item"><a href="/xjblog/css" class="" aria-label="Css"><!--[--><!--]--> Css <!--[--><!--]--></a></div><div class="navbar-item"><a href="/xjblog/js" class="router-link-active" aria-label="Javascript"><!--[--><!--]--> Javascript <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Vue"><span class="title">Vue</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Vue"><span class="title">Vue</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/xjblog/vue2" class="" aria-label="Vue2"><!--[--><!--]--> Vue2 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/xjblog/vue3" class="" aria-label="Vue3"><!--[--><!--]--> Vue3 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a href="/xjblog/react" class="" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a></div><div class="navbar-item"><a href="/xjblog/node" class="" aria-label="Node.js"><!--[--><!--]--> Node.js <!--[--><!--]--></a></div><div class="navbar-item"><a href="/xjblog/more" class="" aria-label="更多"><!--[--><!--]--> 更多 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a aria-current="page" href="/xjblog/js/js.html" class="router-link-active router-link-exact-active router-link-active sidebar-item sidebar-heading active" aria-label="javascript"><!--[--><!--]--> javascript <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/js/js.html#bom" class="router-link-active router-link-exact-active sidebar-item" aria-label="BOM"><!--[--><!--]--> BOM <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#dom" class="router-link-active router-link-exact-active sidebar-item" aria-label="DOM"><!--[--><!--]--> DOM <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/js/js.html#节点" class="router-link-active router-link-exact-active sidebar-item" aria-label="节点"><!--[--><!--]--> 节点 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#获取元素节点" class="router-link-active router-link-exact-active sidebar-item" aria-label="获取元素节点"><!--[--><!--]--> 获取元素节点 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#data-自定义数据属性" class="router-link-active router-link-exact-active sidebar-item" aria-label="data- 自定义数据属性"><!--[--><!--]--> data- 自定义数据属性 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#节点对象的三个属性" class="router-link-active router-link-exact-active sidebar-item" aria-label="节点对象的三个属性"><!--[--><!--]--> 节点对象的三个属性 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#元素节点的增删改查" class="router-link-active router-link-exact-active sidebar-item" aria-label="元素节点的增删改查"><!--[--><!--]--> 元素节点的增删改查 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#_0" class="router-link-active router-link-exact-active sidebar-item" aria-label="$0"><!--[--><!--]--> $0 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/js/js.html#storage" class="router-link-active router-link-exact-active sidebar-item" aria-label="storage"><!--[--><!--]--> storage <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#cookies" class="router-link-active router-link-exact-active sidebar-item" aria-label="cookies"><!--[--><!--]--> cookies <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#console" class="router-link-active router-link-exact-active sidebar-item" aria-label="console"><!--[--><!--]--> console <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#变量" class="router-link-active router-link-exact-active sidebar-item" aria-label="变量"><!--[--><!--]--> 变量 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#变量类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="变量类型"><!--[--><!--]--> 变量类型 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#object和map的区别" class="router-link-active router-link-exact-active sidebar-item" aria-label="Object和Map的区别"><!--[--><!--]--> Object和Map的区别 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#array和set的区别" class="router-link-active router-link-exact-active sidebar-item" aria-label="Array和Set的区别"><!--[--><!--]--> Array和Set的区别 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#weakmap、weakset" class="router-link-active router-link-exact-active sidebar-item" aria-label="WeakMap、WeakSet"><!--[--><!--]--> WeakMap、WeakSet <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#判断数据类型" class="router-link-active router-link-exact-active sidebar-item" aria-label="判断数据类型"><!--[--><!--]--> 判断数据类型 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#数字转字符串" class="router-link-active router-link-exact-active sidebar-item" aria-label="数字转字符串"><!--[--><!--]--> 数字转字符串 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#字符串转数字" class="router-link-active router-link-exact-active sidebar-item" aria-label="字符串转数字"><!--[--><!--]--> 字符串转数字 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#非原始数据-引用数据类型-转数字" class="router-link-active router-link-exact-active sidebar-item" aria-label="非原始数据（引用数据类型）转数字"><!--[--><!--]--> 非原始数据（引用数据类型）转数字 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#小数操作方法" class="router-link-active router-link-exact-active sidebar-item" aria-label="小数操作方法"><!--[--><!--]--> 小数操作方法 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#三元运算符" class="router-link-active router-link-exact-active sidebar-item" aria-label="三元运算符"><!--[--><!--]--> 三元运算符 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#比较运算符" class="router-link-active router-link-exact-active sidebar-item" aria-label="比较运算符"><!--[--><!--]--> 比较运算符 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#逻辑运算符" class="router-link-active router-link-exact-active sidebar-item" aria-label="逻辑运算符"><!--[--><!--]--> 逻辑运算符 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#break和continue" class="router-link-active router-link-exact-active sidebar-item" aria-label="break和continue"><!--[--><!--]--> break和continue <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#var、let、const" class="router-link-active router-link-exact-active sidebar-item" aria-label="var、let、const"><!--[--><!--]--> var、let、const <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#对象解构" class="router-link-active router-link-exact-active sidebar-item" aria-label="对象解构"><!--[--><!--]--> 对象解构 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#函数声明" class="router-link-active router-link-exact-active sidebar-item" aria-label="函数声明"><!--[--><!--]--> 函数声明 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/js/js.html#参数默认值" class="router-link-active router-link-exact-active sidebar-item" aria-label="参数默认值"><!--[--><!--]--> 参数默认值 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/js/js.html#模板字符串" class="router-link-active router-link-exact-active sidebar-item" aria-label="模板字符串"><!--[--><!--]--> 模板字符串 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#数组操作" class="router-link-active router-link-exact-active sidebar-item" aria-label="数组操作"><!--[--><!--]--> 数组操作 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/js/js.html#对原数组产生影响的方法" class="router-link-active router-link-exact-active sidebar-item" aria-label="对原数组产生影响的方法："><!--[--><!--]--> 对原数组产生影响的方法： <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#不对原数组产生影响的方法" class="router-link-active router-link-exact-active sidebar-item" aria-label="不对原数组产生影响的方法："><!--[--><!--]--> 不对原数组产生影响的方法： <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/js/js.html#字符串操作" class="router-link-active router-link-exact-active sidebar-item" aria-label="字符串操作"><!--[--><!--]--> 字符串操作 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#for-in、for-await-in、for-of、for-await-of-待补充" class="router-link-active router-link-exact-active sidebar-item" aria-label="for in、for await in、for of、for await of    待补充"><!--[--><!--]--> for in、for await in、for of、for await of    待补充 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#箭头函数和普通函数的区别" class="router-link-active router-link-exact-active sidebar-item" aria-label="箭头函数和普通函数的区别"><!--[--><!--]--> 箭头函数和普通函数的区别 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#this指向" class="router-link-active router-link-exact-active sidebar-item" aria-label="this指向"><!--[--><!--]--> this指向 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#call、apply、bind" class="router-link-active router-link-exact-active sidebar-item" aria-label="call、apply、bind"><!--[--><!--]--> call、apply、bind <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#new一个对象的过程" class="router-link-active router-link-exact-active sidebar-item" aria-label="new一个对象的过程"><!--[--><!--]--> new一个对象的过程 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#instanceof" class="router-link-active router-link-exact-active sidebar-item" aria-label="instanceof"><!--[--><!--]--> instanceof <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#原型和原型链" class="router-link-active router-link-exact-active sidebar-item" aria-label="原型和原型链"><!--[--><!--]--> 原型和原型链 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/js/js.html#原型-prototype" class="router-link-active router-link-exact-active sidebar-item" aria-label="原型 prototype"><!--[--><!--]--> 原型 prototype <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#原型链" class="router-link-active router-link-exact-active sidebar-item" aria-label="原型链"><!--[--><!--]--> 原型链 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#object-setprototypeof" class="router-link-active router-link-exact-active sidebar-item" aria-label="Object.setPrototypeOf"><!--[--><!--]--> Object.setPrototypeOf <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/js/js.html#作用域" class="router-link-active router-link-exact-active sidebar-item" aria-label="作用域"><!--[--><!--]--> 作用域 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#作用域链" class="router-link-active router-link-exact-active sidebar-item" aria-label="作用域链"><!--[--><!--]--> 作用域链 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#作用域内部原理的五个过程" class="router-link-active router-link-exact-active sidebar-item" aria-label="作用域内部原理的五个过程："><!--[--><!--]--> 作用域内部原理的五个过程： <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/js/js.html#编译-了解" class="router-link-active router-link-exact-active sidebar-item" aria-label="编译（了解）"><!--[--><!--]--> 编译（了解） <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#执行阶段-了解" class="router-link-active router-link-exact-active sidebar-item" aria-label="执行阶段（了解）"><!--[--><!--]--> 执行阶段（了解） <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#查询阶段-了解" class="router-link-active router-link-exact-active sidebar-item" aria-label="查询阶段（了解）"><!--[--><!--]--> 查询阶段（了解） <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/js/js.html#执行上下文" class="router-link-active router-link-exact-active sidebar-item" aria-label="执行上下文"><!--[--><!--]--> 执行上下文 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#深浅拷贝" class="router-link-active router-link-exact-active sidebar-item" aria-label="深浅拷贝"><!--[--><!--]--> 深浅拷贝 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#数组随机排序" class="router-link-active router-link-exact-active sidebar-item" aria-label="数组随机排序"><!--[--><!--]--> 数组随机排序 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#心跳为什么用settimeout而不用setinterval" class="router-link-active router-link-exact-active sidebar-item" aria-label="心跳为什么用setTimeout而不用setInterval"><!--[--><!--]--> 心跳为什么用setTimeout而不用setInterval <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#面向过程" class="router-link-active router-link-exact-active sidebar-item" aria-label="面向过程"><!--[--><!--]--> 面向过程 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#面向对象" class="router-link-active router-link-exact-active sidebar-item" aria-label="面向对象"><!--[--><!--]--> 面向对象 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#类-class" class="router-link-active router-link-exact-active sidebar-item" aria-label="类 class"><!--[--><!--]--> 类 class <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/js/js.html#传统构造函数的问题" class="router-link-active router-link-exact-active sidebar-item" aria-label="传统构造函数的问题"><!--[--><!--]--> 传统构造函数的问题 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#装饰器-decorator" class="router-link-active router-link-exact-active sidebar-item" aria-label="装饰器 decorator"><!--[--><!--]--> 装饰器 decorator <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#继承" class="router-link-active router-link-exact-active sidebar-item" aria-label="继承"><!--[--><!--]--> 继承 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#抽象类" class="router-link-active router-link-exact-active sidebar-item" aria-label="抽象类"><!--[--><!--]--> 抽象类 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/js/js.html#promise" class="router-link-active router-link-exact-active sidebar-item" aria-label="Promise"><!--[--><!--]--> Promise <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/js/js.html#promise-a-规范" class="router-link-active router-link-exact-active sidebar-item" aria-label="Promise A+规范"><!--[--><!--]--> Promise A+规范 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#promise-api" class="router-link-active router-link-exact-active sidebar-item" aria-label="Promise Api"><!--[--><!--]--> Promise Api <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#链式调用" class="router-link-active router-link-exact-active sidebar-item" aria-label="链式调用"><!--[--><!--]--> 链式调用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#静态方法" class="router-link-active router-link-exact-active sidebar-item" aria-label="静态方法"><!--[--><!--]--> 静态方法 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/xjblog/js/js.html#async-await" class="router-link-active router-link-exact-active sidebar-item" aria-label="async / await"><!--[--><!--]--> async / await <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#绝对路径-相对路径" class="router-link-active router-link-exact-active sidebar-item" aria-label="绝对路径 / 相对路径"><!--[--><!--]--> 绝对路径 / 相对路径 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#防抖、节流" class="router-link-active router-link-exact-active sidebar-item" aria-label="防抖、节流"><!--[--><!--]--> 防抖、节流 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#filereader" class="router-link-active router-link-exact-active sidebar-item" aria-label="FileReader"><!--[--><!--]--> FileReader <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#模块化" class="router-link-active router-link-exact-active sidebar-item" aria-label="模块化"><!--[--><!--]--> 模块化 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/xjblog/js/js.html#commonjs" class="router-link-active router-link-exact-active sidebar-item" aria-label="CommonJS"><!--[--><!--]--> CommonJS <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#nodejs对commonjs的实现" class="router-link-active router-link-exact-active sidebar-item" aria-label="nodejs对CommonJS的实现"><!--[--><!--]--> nodejs对CommonJS的实现 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#浏览器端模块化的难题" class="router-link-active router-link-exact-active sidebar-item" aria-label="浏览器端模块化的难题"><!--[--><!--]--> 浏览器端模块化的难题 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#amd" class="router-link-active router-link-exact-active sidebar-item" aria-label="AMD"><!--[--><!--]--> AMD <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#cmd" class="router-link-active router-link-exact-active sidebar-item" aria-label="CMD"><!--[--><!--]--> CMD <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#umd" class="router-link-active router-link-exact-active sidebar-item" aria-label="UMD"><!--[--><!--]--> UMD <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#es-module" class="router-link-active router-link-exact-active sidebar-item" aria-label="ES Module"><!--[--><!--]--> ES Module <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/xjblog/js/js.html#es6-module-和-commonjs的差异" class="router-link-active router-link-exact-active sidebar-item" aria-label="ES6 module 和 CommonJs的差异"><!--[--><!--]--> ES6 module 和 CommonJs的差异 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/xjblog/js/typescript.html" class="sidebar-item sidebar-heading" aria-label="typescript"><!--[--><!--]--> typescript <!--[--><!--]--></a><!----></li><li><a href="/xjblog/js/bibao.html" class="sidebar-item sidebar-heading" aria-label="闭包"><!--[--><!--]--> 闭包 <!--[--><!--]--></a><!----></li><li><a href="/xjblog/js/jstrash.html" class="sidebar-item sidebar-heading" aria-label="垃圾回收"><!--[--><!--]--> 垃圾回收 <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="javascript-ecmascript-dom-bom" tabindex="-1"><a class="header-anchor" href="#javascript-ecmascript-dom-bom" aria-hidden="true">#</a> JavaScript: ECMAScript+DOM+BOM</h1><h2 id="bom" tabindex="-1"><a class="header-anchor" href="#bom" aria-hidden="true">#</a> BOM</h2><p>BOM（浏览器对象模型）是指浏览器提供的一组对象和方法，用于与浏览器窗口进行交互和控制。BOM 不属于 JavaScript 的核心规范，但它是 JavaScript 在浏览器环境中的扩展，允许开发者与浏览器窗口进行交互、控制浏览器的行为、获取浏览器信息等。以下是一些常见的 BOM 对象和功能：</p><ol><li><p><strong>Window 对象</strong>：</p><ul><li><code>window</code> 对象代表浏览器窗口。它是 BOM 的顶级对象，包含了全局变量和方法，例如 <code>setTimeout</code> 和 <code>setInterval</code>、alert、prompt等</li><li>可以使用 <code>window</code> 对象来访问浏览器窗口的属性，如窗口大小、位置、URL 等。</li></ul></li><li><p><strong>Navigator 对象</strong>：</p><ul><li><code>navigator</code> 对象提供了有关浏览器的信息，如浏览器名称、版本、用户代理字符串等。</li><li>这些信息可以用于识别用户所使用的浏览器和操作系统。</li></ul></li><li><p><strong>Location 对象</strong>：</p><ul><li><p><code>location</code> 对象表示当前窗口中加载的文档的 URL 信息。你可以使用它来获取或修改当前页面的 URL。</p></li><li><p>例如，<code>location.href</code> 可以获取当前页面的完整 URL。hash获取带#的哈希值，search获取带？的参数，host获取hostname+port，主机名+端口，protocol 获取协议，pathname获取路径,origin获取的是protocol+host</p></li><li><p>location.reload刷新网页、assign跳转地址有记录，replace跳转地址无记录</p></li></ul></li><li><p><strong>History 对象</strong>：</p><ul><li><code>history</code> 对象允许你在浏览器的历史记录中前进或后退。它提供了方法如 <code>back()</code>、<code>forward()</code> 和 <code>go()</code>，用于导航浏览历史。</li></ul></li><li><p><strong>Screen 对象</strong>：</p><ul><li><code>screen</code> 对象包含了关于用户屏幕的信息，如屏幕的宽度、高度、颜色深度等。</li><li>这些信息可用于根据用户的屏幕尺寸调整网页布局或功能。</li></ul></li><li><p><strong>Document 对象</strong>：</p><ul><li><code>document</code> 对象表示当前页面的 DOM 结构。虽然 <code>document</code> 是 DOM 的一部分，但它也可以被视为 BOM 的一部分，因为它用于操作页面内容。</li></ul></li></ol><p>需要注意的是，BOM 的功能在不同的浏览器中可能会有一些差异，因此在使用 BOM 方法和属性时需要小心处理跨浏览器兼容性问题。通常，开发者可以使用 JavaScript 库和框架来简化 BOM 操作，并提供跨浏览器支持。</p><h2 id="dom" tabindex="-1"><a class="header-anchor" href="#dom" aria-hidden="true">#</a> DOM</h2><p>DOM（文档对象模型）用于在网页上操作和访问文档的内容和结构。它允许开发者使用脚本语言与网页文档进行交互，动态地修改页面内容、结构和样式，以实现交互性和动态性的网页应用程序。DOM 将网页文档表示为一个树状结构，每个部分都是一个节点，允许开发者以编程方式访问和操作这些节点。</p><h3 id="节点" tabindex="-1"><a class="header-anchor" href="#节点" aria-hidden="true">#</a> 节点</h3><ul><li>元素节点 element node 文档中的 HTML 或 XML 元素都表示为元素节点。每个元素节点都有对应的属性和方法，允许你访问和修改它们的内容、属性和样式。</li><li>文本节点 text node 文档中的文本内容表示为文本节点。可以使用 DOM 来获取和修改文本节点的内容。</li><li>属性节点 attribute node 元素节点可以具有属性，属性节点表示元素的属性。</li></ul><p><strong>获取非常规元素</strong></p><ul><li>获取html: document.documentElement</li><li>获取head: document.head</li><li>获取body: document. body</li></ul><h3 id="获取元素节点" tabindex="-1"><a class="header-anchor" href="#获取元素节点" aria-hidden="true">#</a> 获取元素节点</h3><ul><li><p><strong>getElementById(id):</strong> 通过元素的 ID 获取元素节点，获取不到为null</p></li><li><p><strong>getElementsByClassName(className):</strong> 通过元素的类名获取元素节点集合（返回一个 HTMLCollection，伪可以遍历，无法使用数组的常用方法）</p></li><li><p><strong>getElementsByTagName(tagName):</strong> 通过元素的标签名获取元素节点集合（返回一个 HTMLCollection）</p></li><li><p><strong>getElementsByName(name):</strong> 通过标签的name属性获取元素节点集合（适用于一些特定元素，如表单元素，返回一个 HTMLCollection）。</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
 var eles = document.getElementsByName(&#39;username&#39;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>querySelector(selector):</strong> 使用选择器语法选择并返回匹配的第一个元素节点。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 获取页面中的第一个 div 元素</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>docuemnt<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.box&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 获取页面中第一个有 box 类名的元素</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;#box&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 获取页面中第一个 id 名为 box 的元素</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;#id .class [tagname]&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">//可同时作用</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>querySelectorAll(selector):</strong> 使用选择器语法选择并返回所有匹配的元素节点集合（返回一个 NodeList）。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&#39;[data-res=thunder]&#39;</span><span class="token punctuation">)</span>   <span class="token comment">//查找所有标签属性data-res=thunder的元素</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><p><strong>获取属性和设置属性 setAttribute(),getAttribute()</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;myElement&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

<span class="token keyword">var</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;myElement&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
element<span class="token punctuation">.</span>nodeType<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>

element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height<span class="token operator">=</span><span class="token string">&#39;500px&#39;</span> <span class="token comment">//操作样式</span>

<span class="token keyword">var</span> attributeNode <span class="token operator">=</span> element<span class="token punctuation">.</span>attributes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 假设第一个属性是 attribute node</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>attributeNode<span class="token punctuation">.</span>nodeType<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 2，表示 attribute node, nodeName:id,nodeValue:myElement</span>

element<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">)</span>   <span class="token comment">//myElement,获取不到为null</span>
element<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;box&#39;</span><span class="token punctuation">)</span>  <span class="token comment">//修改id的值，也可以通过element.attributes[0].nodeValue=&#39;box&#39;修改</span>
element<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&#39;class&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;box one&#39;</span><span class="token punctuation">)</span>  <span class="token comment">//会覆盖原有值</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>操作样式</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 除了getAttribute(&#39;class&#39;)也可以通过element.classList获取类名，是个数组</span>
classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">//添加类名</span>
classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//删除类名</span>
classList<span class="token punctuation">.</span><span class="token function">contain</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//校验类名是否存在</span>
classList<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//切换类名，存在就移除，不存在就添加</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="data-自定义数据属性" tabindex="-1"><a class="header-anchor" href="#data-自定义数据属性" aria-hidden="true">#</a> data- 自定义数据属性</h3><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-test</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>name<span class="token punctuation">&#39;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>box<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">var</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;box&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    element<span class="token punctuation">.</span>dataset  <span class="token comment">// DOMStringMap { test:&#39;name&#39; }</span>
    element<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>age<span class="token operator">=</span><span class="token number">18</span><span class="token punctuation">;</span>  <span class="token comment">//生效  &lt;div data-test=&#39;name&#39; id=&#39;box&#39; data-age=&quot;18&quot;&gt;&lt;/div&gt;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>getElementsByClassName 和 querySelectorAll 获取元素集合的区别</strong></p><p><strong>querySelectorAll返回的类型为NodeList(静态集合，不会随文档变化而更新)，而getElementsByClassName返回的类型却是HTMLCollection(动态集合，每次访问集合都会重新查询匹配的元素)</strong></p><p>比如返回的两个集合都是1，动态插入一个相同的节点，再次输出，getElementsByClassName的长度是2，而querySelectorAll依旧是1</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code> <span class="token keyword">var</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;box&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//获取到现有ul里面的li</span>
  <span class="token keyword">var</span> list <span class="token operator">=</span> ul<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&#39;li&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> list<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    ul<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;li&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//动态追加li </span>
      <span class="token comment">//会陷入死循环，i &lt; list.length 这个循环条件。 因为每当往 ul 里添加了新元素后，list便会更新其值，重新获取ul里的所有li。</span>
      <span class="token comment">//如果用的是querySelectorAll ，list.length就不会变</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>childNodes:</strong> 通过 <code>childNodes</code> 属性获取当前节点的所有子节点（返回一个 NodeList）。子节点可能是任意类型的节点</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> childNodes <span class="token operator">=</span> parentElement<span class="token punctuation">.</span>childNodes<span class="token punctuation">;</span>  <span class="token comment">//获取孩子节点时，可能因为换行有多余的text存在，需要用nodeType过滤</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>firstChild:</strong> 通过 <code>firstChild</code> 属性获取当前节点的第一个子节点。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> firstChild <span class="token operator">=</span> parentElement<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>lastChild:</strong> 通过 <code>lastChild</code> 属性获取当前节点的最后一个子节点。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> lastChild <span class="token operator">=</span> parentElement<span class="token punctuation">.</span>lastChild<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>parentNode:</strong> 通过 <code>parentNode</code> 属性获取当前节点的父节点。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> parentNode <span class="token operator">=</span> childElement<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>上一个节点 - previousSibling:</strong> 用于获取当前节点在文档中的前一个节点，不论其类型是元素节点、文本节点还是其他类型的节点。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> previousNode <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>previousSibling<span class="token punctuation">;</span>

<span class="token comment">// 检查节点类型</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>previousNode<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;上一个节点是元素节点&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>需要注意的是，<code>previousSibling</code> 返回的节点可能是元素节点、文本节点、注释节点等，甚至可能是空白文本节点。因此，在使用之前最好检查节点类型，以确保得到预期的节点。</p><p><strong>下一个节点 - nextSibling:</strong> 用于获取当前节点在文档中的后一个节点，同样不论其类型是什么。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> nextNode <span class="token operator">=</span> currentNode<span class="token punctuation">.</span>nextSibling<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>**innerHTML:**返回的内容是元素内包含的所有 HTML，包括标签、属性等。如果你设置了新的 HTML 内容，它会替换元素原有的所有内容。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;exampleElement&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取元素的HTML内容</span>
element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&#39;&lt;p&gt;New HTML content&lt;/p&gt;&#39;</span><span class="token punctuation">;</span> <span class="token comment">// 设置元素的HTML内容</span>
<span class="token comment">//要小心防范潜在的安全风险，因为它允许插入任意的 HTML 代码，可能导致跨站脚本攻击（XSS）</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>**innerText:**返回的内容是元素内的纯文本，不包含 HTML 标签。如果你设置了新的文本内容，它会替换元素原有的文本内容。</p><h3 id="节点对象的三个属性" tabindex="-1"><a class="header-anchor" href="#节点对象的三个属性" aria-hidden="true">#</a> 节点对象的三个属性</h3><ul><li>nodeName 节点的名称</li><li>nodeValue 节点的值</li><li>nodeType 节点类型</li></ul><p>nodeName：<strong>只读</strong>、</p><ol><li>元素节点nodeName和标签名相同</li><li>属性节点nodeName和属性名相同</li><li>文本节点nodeName永远是#text</li><li>文档节点nodeName永远是#document</li></ol><p>nodeValue:</p><ol><li>元素节点nodeValue是undefined或null</li><li>属性节点nodeValue是属性的值</li><li>文本节点nodeValue是文本自身</li></ol><p>nodeType：<strong>只读</strong></p><table><thead><tr><th>元素类型</th><th>节点类型</th></tr></thead><tbody><tr><td>元素</td><td>1</td></tr><tr><td>属性</td><td>2</td></tr><tr><td>文本</td><td>3</td></tr><tr><td>注释</td><td>8</td></tr><tr><td>文档</td><td>9</td></tr></tbody></table><p>为9的只有document.nodeType</p><p>document.documentElement获取的也是1</p><h3 id="元素节点的增删改查" tabindex="-1"><a class="header-anchor" href="#元素节点的增删改查" aria-hidden="true">#</a> 元素节点的增删改查</h3><ul><li>创建节点 createElement()</li><li>插入节点 appendChild() insertBefore(newNode,node)--把节点插入在参考节点前</li><li>删除节点 removeChild()</li><li>替换节点 replaceChild(newNode,node) --替换掉参考节点</li><li>创建文本节点 createTextNode()</li></ul><h3 id="_0" tabindex="-1"><a class="header-anchor" href="#_0" aria-hidden="true">#</a> $0</h3><p>在f12的element选项卡中可以看到选中元素时，后面有个 == $0</p><p>然后只要在控制台中输出$0就可以直接获取该dom元素，是个快速获取dom元素的调试技巧</p><h2 id="storage" tabindex="-1"><a class="header-anchor" href="#storage" aria-hidden="true">#</a> storage</h2><p><strong>localStorage</strong></p><ul><li>数据永久存储，除非用户清除浏览器缓存或通过JavaScript代码删除</li><li>数据可在相同域名下的不同页面和标签页之间共享</li></ul><p><strong>sessionStorage</strong></p><ul><li>数据仅在当前会话期间存储。关闭浏览器标签页或窗口后，数据将被清除。</li><li>数据仅在同一标签页或窗口中共享</li></ul><h2 id="cookies" tabindex="-1"><a class="header-anchor" href="#cookies" aria-hidden="true">#</a> cookies</h2><p>通过 <code>document.cookie</code> 属性，你可以读取和设置浏览器中的 cookies。</p><h2 id="console" tabindex="-1"><a class="header-anchor" href="#console" aria-hidden="true">#</a> console</h2><ol><li><p><strong><code>console.log()</code></strong>：</p><ul><li>用于输出普通的信息或变量的值到控制台。</li></ul></li><li><p><strong><code>console.error()</code></strong>：</p><ul><li>用于输出错误消息到控制台，并会伴随着一个红色的错误图标。</li></ul></li><li><p><strong><code>console.warn()</code></strong>：</p><ul><li>用于输出警告消息到控制台，并通常会伴随着一个黄色的警告图标。</li></ul></li><li><p><strong><code>console.info()</code></strong>：</p><ul><li>用于输出信息消息到控制台，并通常会伴随着一个蓝色的信息图标。</li></ul></li><li><p><strong><code>console.table()</code></strong>：</p><ul><li>用于以表格形式输出数组或对象的内容，使其更易于查看和分析。</li></ul></li><li><p><strong><code>console.dir(obj)</code></strong>：打印出该对象的所有属性和属性值</p></li></ol><p>给输出内容添加样式：使用 <code>%c</code> 占位符来指定要应用的样式，然后将样式作为后续参数传递</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&quot;Alice&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">%cHello, %c</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token string">&quot;font-weight: bold; color: blue;&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;color: green;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//hello加粗蓝字，name绿字</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="变量" tabindex="-1"><a class="header-anchor" href="#变量" aria-hidden="true">#</a> 变量</h2><p>变量名必须以 <strong>字母、下划线、$开头</strong></p><p>驼峰命名法：</p><ul><li>大驼峰：第一个字母大写，后续单词首字母大写---- MyName</li><li>小驼峰：第一个字母小写，后续单词首字母大写---- myName</li></ul><h2 id="变量类型" tabindex="-1"><a class="header-anchor" href="#变量类型" aria-hidden="true">#</a> 变量类型</h2><p><strong>基础数据类型（原始数据类型）</strong>:</p><ol><li><strong>Number（数字）</strong>: 用于表示数字，包括整数和浮点数。例如：<code>let num = 42;</code></li><li><strong>String（字符串）</strong>: 用于表示文本。例如：<code>let text = &quot;Hello, World!&quot;;</code></li><li><strong>Boolean（布尔）</strong>: 用于表示真值或假值。例如：<code>let isTrue = true;</code></li><li><strong>null</strong>: 用于表示一个空值。例如：<code>let emptyValue = null;</code></li><li><strong>undefined</strong>: 用于表示未定义的变量或属性。例如：<code>let undefinedValue;</code></li><li><strong>Symbol（符号）</strong>: 用于创建唯一的标识符。例如：<code>const uniqueSymbol = Symbol(&quot;description&quot;);</code></li><li><strong>BigInt（高精度整数）</strong>:直接通过在<strong>整数字面量</strong>后加上 &quot;n&quot; 来创建 <code>BigInt</code></li></ol><p><strong>引用数据类型（复杂数据类型或对象类型）</strong>:</p><ol><li><strong>Object（对象）</strong>: 用于表示复杂数据结构，可以包含多个属性和方法。例如：<code>let person = { name: &quot;John&quot;, age: 30 };</code></li><li><strong>Array（数组）</strong>: 用于存储多个值的有序集合。例如：<code>let numbers = [1, 2, 3, 4, 5];</code></li><li><strong>Function（函数）</strong>: 用于定义可执行的代码块。例如：<code>function add(a, b) { return a + b; }</code></li><li><strong>Date（日期）</strong>: 用于表示日期和时间。例如：<code>let today = new Date();</code></li><li><strong>RegExp（正则表达式）</strong>: 用于匹配和处理文本的模式。例如：<code>let regex = /pattern/;</code></li><li><strong>Map（映射）</strong>: 用于存储键值对的集合（采用Hash结构存储），其中键可以是任何数据类型。例如：<code>let myMap = new Map();</code></li><li><strong>Set（集合）</strong>: 用于存储唯一值的集合。例如：<code>let mySet = new Set();</code></li></ol><h2 id="object和map的区别" tabindex="-1"><a class="header-anchor" href="#object和map的区别" aria-hidden="true">#</a> Object和Map的区别</h2><p><strong>Map和Set比Object和Array整体执行要快</strong>；</p><p><strong>键的类型：</strong></p><p>Map有序结构，key任意类型，按照插入的顺序返回；</p><p>Object无序结构，key两种类型（string或者Symbol，如果非String类型，会进行<strong>数据类型转换</strong>），不会按照添加到顺序返回</p><p>排序顺序：</p><ol><li>对于大于等于0的整数，会按照大小的顺序进行排序，对于小数和负数会当做字符串处理</li><li>对于string类型，按照定义的顺序进行输出</li><li>对于Symbol类型，同string</li></ol><p>如果想要输出Symbol类型属性，通过Reflect.ownKeys()、Object.keys()、Object.getOwnPropertyNames()、Object.getOwnPropertySymbols()方法</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//如果是混合类型,先按照自然数升序进行排序，然后按照非数字的 String 的加入时间排序，然后按照 Symbol 的时间顺序进行排序，也就是说他们会先按照上述的分类进行拆分，先按照自然数、非自然数、Symbol 的顺序进行排序，然后根据上述三种类型下内部的顺序进行排序</span>
<span class="token keyword">const</span> objWithStrings <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&quot;002&quot;</span><span class="token operator">:</span> <span class="token string">&quot;002&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;first&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">&quot;first&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;100&quot;</span><span class="token operator">:</span> <span class="token string">&quot;100&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;001&quot;</span><span class="token operator">:</span> <span class="token string">&quot;001&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;second&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">&quot;second&quot;</span><span class="token punctuation">,</span>
  <span class="token number">20</span><span class="token operator">:</span><span class="token number">1</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> objWithStrings<span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;xx&#39;</span><span class="token punctuation">,</span>i<span class="token punctuation">,</span>objWithStrings<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token number">20</span>、<span class="token number">100</span>、<span class="token number">002</span>、c、b、<span class="token number">001</span>、symbol<span class="token operator">...</span>


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>键值对size：</strong></p><p>Object：只能手动计算，通过Object.keys()方法或者通过for…in循环统计</p><p>Map：直接通过size属性访问</p><p><strong>键值对的访问：</strong></p><p>Object：添加或者修改属性，通过点或者中括号的形式</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> Obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;wwj&#39;</span><span class="token punctuation">;</span>
Obj<span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;age&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;18&#39;</span><span class="token punctuation">;</span>

<span class="token comment">//判断属性是否存在</span>
Obj<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
Obj<span class="token punctuation">[</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>

<span class="token comment">//删除属性，通过delete关键字</span>
<span class="token keyword">delete</span> Obj<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Map: 添加和修改Key-value</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;wwj&#39;</span><span class="token punctuation">)</span>
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;age&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;18&#39;</span><span class="token punctuation">)</span>

<span class="token comment">//判断属性是否存在</span>

map<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
map<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">&#39;age&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>


map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 取值</span>
map<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 删除键值对</span>
map<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取所有的属性名</span>
map<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 清空map</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>迭代器：</strong></p><p>Object本身不具有iterator特性，默认情况下不能使用for…of进行遍历</p><p>通过for of遍历会抛出异常。for in是遍历对象的可枚举属性，所以能用</p><p>对象本身不是可迭代对象。可迭代对象是那些实现了 <code>[Symbol.iterator]</code> 方法的对象，而普通对象没有默认实现这个方法。数组、字符串、<code>Map</code> 和 <code>Set</code> 等内置对象则是可迭代的，因为它们实现了 <code>[Symbol.iterator]</code> 方法</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">of</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">yield</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 输出:</span>
<span class="token comment">// a 1</span>
<span class="token comment">// b 2</span>
<span class="token comment">// c 3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Map结构的keys(), values(), entries()方法返回值都具有iterator特性</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;wwj&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&#39;age&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;18&#39;</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> map<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>   <span class="token comment">//map.entries()可以得到一个MapIterator </span>

map<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token comment">//注意key、value的位置</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>json序列化：</strong></p><p>Object类型可以通过JSON.stringify()进行序列化操作,转换成json字符串。可通过JSON.parse反转换</p><p>Map结构不能直接进行JSON序列化</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;wwj&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&#39;age&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;18&#39;</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//  {&#39;name&#39; =&gt; &#39;wwj&#39;, &#39;age&#39; =&gt; &#39;18&#39;}</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">strigify</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span> <span class="token comment">// 返回 &#39;{}&#39;</span>
<span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 返回 &#39;[[&#39;name&#39;, &#39;wwj&#39;], [&#39;age&#39;, &#39;18&#39;]]&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>使用 <code>Map</code> 的场景：</strong></p><ul><li>需要键为非字符串的情况。</li><li>需要保持插入顺序的情况。</li><li>需要直接获取键值对数量的情况</li></ul><h2 id="array和set的区别" tabindex="-1"><a class="header-anchor" href="#array和set的区别" aria-hidden="true">#</a> Array和Set的区别</h2><p>Set自动去重；</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//add添加元素，返回 Set 结构本身</span>
a<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span>size <span class="token comment">// 2</span>

<span class="token comment">//has判断是否为成员，返回一个Boolean,和数组的includes异曲同工，比传统的indexOf简洁</span>
a<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
a<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
a<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// false</span>

<span class="token comment">//delete删除某个值，返回一个布尔值，表示删除是否成功</span>
a<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
a<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">// false</span>

<span class="token comment">//clear清除所有成员，没有返回值</span>

<span class="token comment">//keys()，values()，entries()，由于Set没有键名，所以keys,values的效果一样，entries则返回一个数组，两个成员都是Set的值</span>
<span class="token keyword">let</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> set<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 8</span>
<span class="token comment">// 9</span>
<span class="token comment">// 5</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> set<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// [8, 8]</span>
<span class="token comment">// [9, 9]</span>
<span class="token comment">// [5, 5]</span>

<span class="token comment">//forEach同上，key和value相同</span>


<span class="token comment">//交集、并集和差集操作</span>
<span class="token keyword">const</span> set1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> set2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 交集</span>
<span class="token keyword">const</span> intersection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>set1<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> set2<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 并集</span>
<span class="token keyword">const</span> union <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>set1<span class="token punctuation">,</span> <span class="token operator">...</span>set2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 差集</span>
<span class="token keyword">const</span> difference <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>set1<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>set2<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>intersection<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Set { 2, 3 }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>union<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Set { 1, 2, 3, 4 }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>difference<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Set { 1 }</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用Set的场景：</p><ul><li>需要去重</li><li>频繁查询、删除操作-速度比array快</li></ul><h2 id="weakmap、weakset" tabindex="-1"><a class="header-anchor" href="#weakmap、weakset" aria-hidden="true">#</a> WeakMap、WeakSet</h2><p>WeakMap:</p><ol><li><strong>只能接受对象作为键：</strong> 在 <code>WeakMap</code> 中，只有对象可以作为键，而且键是弱引用的。</li><li><strong>弱引用关系：</strong> <code>WeakMap</code> 不会阻止垃圾回收，如果没有其他引用指向键对象，它会被垃圾回收。这有助于避免内存泄漏。<code>Map</code> 会保留对键的引用，即使键是对象，也会防止垃圾回收。这可能导致内存泄漏，因为 <code>Map</code> 会持续引用键。</li><li><strong>不可迭代：</strong> 由于没有 <code>size</code> 属性，也没有提供迭代方法，所以不能直接遍历 <code>WeakMap</code> 中的内容。</li><li><strong>没有清空方法：</strong> 无法直接清空 <code>WeakMap</code> 中的内容。当键对象被垃圾回收时，相应的键值对也会被自动移除。</li></ol><p>WeakSet:</p><ol><li><strong>只能存储对象：</strong> 在 <code>WeakSet</code> 中，只有对象可以作为元素，而且元素是弱引用的。</li><li><strong>弱引用关系：</strong> <code>WeakSet</code> 不会阻止垃圾回收，如果没有其他引用指向元素对象，它会被垃圾回收。这有助于避免内存泄漏。</li><li><strong>不可迭代：</strong> 由于没有 <code>size</code> 属性，也没有提供迭代方法，所以不能直接遍历 <code>WeakSet</code> 中的内容。</li><li><strong>没有清空方法：</strong> 无法直接清空 <code>WeakSet</code> 中的内容。当元素对象被垃圾回收时，相应的元素也会被自动移除。</li></ol><p>场景：想临时记录数据或关系</p><p>作用：不会被标记引用（js引擎现在的垃圾回收算法都是<strong>标记清除</strong>，很久以前是引用计数，因为循环引用的问题会导致无法清除而内存泄漏）。防止内存泄漏</p><h2 id="判断数据类型" tabindex="-1"><a class="header-anchor" href="#判断数据类型" aria-hidden="true">#</a> 判断数据类型</h2><ol><li><strong>typeof 操作符</strong>：<code>typeof</code> 操作符可用于检查一个值的数据类型。它返回一个表示数据类型的字符串。例如：</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">typeof</span> <span class="token number">42</span><span class="token punctuation">;</span> <span class="token comment">// 返回 &quot;number&quot;</span>
<span class="token keyword">typeof</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 返回 &quot;string&quot;</span>
<span class="token keyword">typeof</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 返回 &quot;boolean&quot;</span>
<span class="token keyword">typeof</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span> <span class="token comment">// 返回 &quot;undefined&quot;</span>
<span class="token keyword">typeof</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 返回 &quot;object&quot;（这是 typeof 的一个历史性 bug）</span>
<span class="token keyword">typeof</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 返回 &quot;object&quot;</span>
<span class="token keyword">typeof</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 返回 &quot;object&quot;</span>
<span class="token keyword">typeof</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 返回 &quot;function&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>请注意，<code>typeof null</code> 返回 &quot;object&quot; 是一个已知的 JavaScript 引擎的历史性错误。</p><ol start="2"><li><strong>instanceof 操作符</strong>：<code>instanceof</code> 操作符用于检查对象是否属于特定类或构造函数的实例。例如：</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回 true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回 true，因为数组也是对象</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li><strong>constructor 属性</strong>：对象的 <code>constructor</code> 属性可以用于检查它的构造函数。例如：</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Number<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回 true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li><strong>Object.prototype.toString.call()</strong>：这是一种通用的方法，可以用于检查几乎所有数据类型，包括内置对象和自定义对象。例如：</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> type <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回 &quot;[object Array]&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li><strong>Array.isArray()</strong>：用于检查一个值是否为数组。</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回 true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li><p><strong>isNaN()、Number.isNaN()</strong>：都用于检查一个值是否为 NaN（Not-a-Number），但它们之间有重要的区别：</p><ol><li><p><strong>强制类型转换</strong>：</p><ul><li><p><code>isNaN()</code>：<code>isNaN()</code> 函数会尝试将其参数转换为数字，然后检查是否为 NaN。如果参数不能被转换为数字，它会返回 <code>true</code>。这就是 <code>isNaN()</code> 的一个特殊之处，因为它会对参数进行隐式的类型转换。这可能导致一些意外的结果，特别是对于非空字符串。例如：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token string">&quot;42&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回 false，因为 &quot;42&quot; 能被转换为数字 42</span>
<span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回 true，因为 &quot;Hello&quot; 不能被转换为数字</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>Number.isNaN()</code>：<code>Number.isNaN()</code> 不会进行强制类型转换。它只会检查其参数是否为 NaN。如果参数不是 NaN，它会返回 <code>false</code>。这使得它更适合用于精确地检查一个值是否为 NaN，而不受类型转换的干扰。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token string">&quot;42&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回 false，因为它不会进行类型转换</span>
Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回 false，同样不会进行类型转换</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><strong>全局变量问题</strong>：</p><ul><li><p><code>isNaN()</code>：在全局作用域中，如果你尝试检查一个未声明的变量是否为 NaN，<code>isNaN()</code> 会抛出一个 ReferenceError。这是因为在此情况下，JavaScript 将参数视为变量名，并尝试查找该变量。例如：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">isNaN</span><span class="token punctuation">(</span>unDeclaredVariable<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 抛出 ReferenceError</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p><code>Number.isNaN()</code>：<code>Number.isNaN()</code> 不会引发全局变量问题。它仅检查参数是否为 NaN，并且不会尝试查找变量。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span>unDeclaredVariable<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回 false，不会抛出错误</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul></li></ol><p>总之，主要区别在于 <code>isNaN()</code> 会进行强制类型转换并具有全局变量问题，而 <code>Number.isNaN()</code> 不会进行类型转换，也不会引发全局变量问题。通常情况下，推荐使用 <code>Number.isNaN()</code> 来精确地检查一个值是否为 NaN。</p></li></ol><h2 id="数字转字符串" tabindex="-1"><a class="header-anchor" href="#数字转字符串" aria-hidden="true">#</a> 数字转字符串</h2><ol><li><p><strong>使用 <code>String()</code> 构造函数</strong>：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将数字 42 转换为字符串 &quot;42&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>使用数字的 <code>.toString()</code> 方法</strong>：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将数字 42 转换为字符串 &quot;42&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>使用空字符串拼接</strong>：通过将数字与空字符串 <code>&#39;&#39;</code> 相加，可以将其隐式转换为字符串。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> num <span class="token operator">+</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span> <span class="token comment">// 使用空字符串拼接将数字 42 转换为字符串 &quot;42&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="字符串转数字" tabindex="-1"><a class="header-anchor" href="#字符串转数字" aria-hidden="true">#</a> 字符串转数字</h2><ol><li><p><strong>使用 <code>parseInt()</code> 函数</strong>：<code>parseInt()</code> 函数用于将字符串转换为整数。它会从字符串的开头开始解析，直到遇到非数字字符为止。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;42&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将字符串 &quot;42&quot; 转换为数字 42</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>使用 <code>parseFloat()</code> 函数</strong>：<code>parseFloat()</code> 函数用于将字符串转换为浮点数。它会解析字符串中的数字，直到遇到非数字字符或第二个小数点为止。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;3.14&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将字符串 &quot;3.14&quot; 转换为浮点数 3.14</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>使用 <code>Number()</code> 构造函数</strong>：<code>Number()</code> 构造函数可以将字符串转换为数字，它会尝试解析整个字符串并转换为相应的数字类型（整数或浮点数）。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;42&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将字符串 &quot;42&quot; 转换为数字 42</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>使用运算符 <code>+</code></strong>：通过使用一元加法运算符 <code>+</code>，你可以将字符串转换为数字。这种方法通常用于将字符串转换为数字，但要确保字符串包含有效的数字。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;42&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token operator">+</span>str<span class="token punctuation">;</span> <span class="token comment">// 将字符串 &quot;42&quot; 转换为数字 42</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>-0</strong>：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;42&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> num <span class="token operator">=</span> str<span class="token operator">-</span><span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p><strong>使用 <code>parseInt()</code> 或 <code>parseFloat()</code> 函数并提供基数（用于解析特定进制的字符串）</strong>：你可以通过在 <code>parseInt()</code> 或 <code>parseFloat()</code> 中提供第二个参数来指定基数。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;1010&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> binaryNum <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将二进制字符串 &quot;1010&quot; 转换为十进制数字 10</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>这些方法可以根据你的需求选择使用，但需要注意的是，当字符串无法完全解析为数字时，这些方法可能返回 <code>NaN</code>（Not-a-Number）。因此，在使用这些方法之前，最好检查输入字符串以确保它包含有效的数字。</p><h2 id="非原始数据-引用数据类型-转数字" tabindex="-1"><a class="header-anchor" href="#非原始数据-引用数据类型-转数字" aria-hidden="true">#</a> 非原始数据（引用数据类型）转数字</h2><ol><li>如果对象具有 <code>valueOf</code> 方法，JavaScript 将首先调用这个方法。</li><li>如果 <code>valueOf</code> 方法返回一个原始值（primitive value 就是基础数据类型），则该原始值将被转换为数字。</li><li>如果 <code>valueOf</code> 方法返回的不是原始值，JavaScript 将尝试调用对象的 <code>toString</code> 方法。</li><li>如果 <code>toString</code> 方法返回一个原始值，那么该值将被转换为数字。</li><li>如果以上两个方法都没有返回原始值，那么转换将产生一个 <code>TypeError</code> 错误。</li></ol><h2 id="小数操作方法" tabindex="-1"><a class="header-anchor" href="#小数操作方法" aria-hidden="true">#</a> 小数操作方法</h2><p>js中的四舍五入到底是怎么算的？</p><ol><li><p><strong><code>toFixed()</code> 方法</strong>：将一个数字四舍五入为指定小数位数的字符串表示。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">3.1415926</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> rounded <span class="token operator">=</span> num<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 结果为 &quot;3.14&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong><code>toPrecision()</code> 方法</strong>：返回一个表示指定精度的字符串，对数字进行四舍五入。精度是从左至右第一个不为0的数开始数起</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">3.1415926</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> precision <span class="token operator">=</span> num<span class="token punctuation">.</span><span class="token function">toPrecision</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 结果为 &quot;3.142&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong><code>Math.round()</code> 方法</strong>：将一个数字四舍五入向上取整。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">3.7</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> rounded <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 结果为 4</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong><code>Math.floor()</code> 方法</strong>：将一个数字向下取整。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">3.9</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> floorValue <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 结果为 3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong><code>Math.ceil()</code> 方法</strong>：将一个数字向上取整为最接近的整数。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">3.1</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> ceilValue <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 结果为 4</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong><code>Math.trunc()</code> 方法</strong>：移除一个数字的小数部分，返回整数部分。一开始个人感觉跟floor没什么区别，但是trunc（-4.9）是-4，floor（-4.9）是-5</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">3.9</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> truncValue <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">trunc</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 结果为 3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>需要注意的是：JavaScript采用的是IEEE754标准中的双精度64位，某些小数转换成二进制后是无限循环的，而计算机的存储是有限的，一个错误的数运算后自然是错误的结果。经典例子：0.1+0.2=0.30000000000000004。还有上面toPrecision里列举的，也是因为这个原因。</p><p>为了解决精度问题，可以考虑安装某些js库，或把运算交给后端。</p><ol><li><p><strong>decimal.js:</strong> <code>decimal.js</code> 是一个 JavaScript 库，用于高精度的十进制数学运算。它提供了精确的浮点数运算，可以帮助开发者避免浮点数精度问题。</p><p>GitHub 地址：https://github.com/shinuza/decimal-js</p></li><li><p><strong>math.js：</strong> <code>math.js</code> 是一个广泛用于数学计算的库，它包含了高精度数学运算的功能，可以处理复数、矩阵等复杂数学操作。</p><p>GitHub 地址：https://github.com/josdejong/mathjs</p></li><li><p><strong>bignumber.js：</strong> <code>bignumber.js</code> 是用于处理大整数的库，它允许你执行高精度整数操作。</p><p>GitHub 地址：https://github.com/MikeMcl/bignumber.js/</p></li><li><p><strong>Big.js：</strong> 与 <code>decimal.js</code> 类似，<code>Big.js</code> 也是一个用于高精度数学计算的库。它提供了大整数和大浮点数的支持。</p><p>GitHub 地址：https://github.com/MikeMcl/big.js/</p></li></ol><h2 id="三元运算符" tabindex="-1"><a class="header-anchor" href="#三元运算符" aria-hidden="true">#</a> 三元运算符</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>条件 <span class="token operator">?</span> 表达式<span class="token number">1</span> <span class="token operator">:</span> 表达式<span class="token number">2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>如果条件为真，则返回表达式1的值。</li><li>如果条件为假，则返回表达式2的值。</li></ul><p>表达式里也可以套三元运算符</p><h2 id="比较运算符" tabindex="-1"><a class="header-anchor" href="#比较运算符" aria-hidden="true">#</a> 比较运算符</h2><ol><li><p><strong>等于 (<code>==</code>)：</strong> 用于比较两个值是否相等。它会进行类型转换，因此可以比较不同数据类型的值。</p></li><li><p><strong>全等 (<code>===</code>)：</strong> 用于比较两个值是否严格相等，包括值和类型。它不进行类型转换，只有在值和类型都相同的情况下才返回 <code>true</code>。</p></li><li><p><strong>不等于 (<code>!=</code>)：</strong> 用于比较两个值是否不相等。它会进行类型转换。</p></li><li><p><strong>不全等 (<code>!==</code>)：</strong> 用于比较两个值是否不严格相等，包括值和类型。它不进行类型转换。</p></li></ol><h2 id="逻辑运算符" tabindex="-1"><a class="header-anchor" href="#逻辑运算符" aria-hidden="true">#</a> 逻辑运算符</h2><ol><li><p>&amp;&amp; : a&amp;&amp;b,a和b同时满足时返回true，否则false。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">//可以简写为</span>
a<span class="token operator">&amp;&amp;</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>|| ：a||b，a或b满足其一，返回true，否则false</p></li><li><p>！ ：取反。 !true为false</p></li></ol><h2 id="break和continue" tabindex="-1"><a class="header-anchor" href="#break和continue" aria-hidden="true">#</a> break和continue</h2><p><code>break</code> 和 <code>continue</code> 是 JavaScript 中的两个控制流程的关键字，它们用于不同的目的，并且在使用上有一些区别：</p><ol><li><p><strong>break：</strong></p><ul><li><code>break</code> 关键字用于中止当前的循环（通常是 <code>for</code>、<code>while</code> 或 <code>do...while</code> 循环），并跳出循环体，继续执行循环后面的代码。</li><li><code>break</code> 在switch语句中，用于退出switch的执行。</li></ul><p>示例：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">// 当 i 等于 3 时终止循环</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 输出: 0, 1, 2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>continue：</strong></p><ul><li><code>continue</code> 关键字用于中止当前迭代的循环（通常是 <code>for</code>、<code>while</code> 或 <code>do...while</code> 循环），并跳到下一次迭代的开始，继续执行循环条件判断。</li><li><code>continue</code> 通常在某些条件下，你希望跳过当前迭代中的一部分代码，然后继续下一次迭代时使用。</li></ul><p>示例：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">continue</span><span class="token punctuation">;</span> <span class="token comment">// 当 i 等于 2 时跳过本次迭代</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 输出: 0, 1, 3, 4</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="var、let、const" tabindex="-1"><a class="header-anchor" href="#var、let、const" aria-hidden="true">#</a> var、let、const</h2><ol><li><strong>var：</strong><ul><li><code>var</code> 是 ES5 引入的变量声明关键字。</li><li>变量声明的作用域是函数作用域（function scope），而不是块级作用域（block scope）。</li><li>使用 <code>var</code> 声明的变量在整个函数内部都是可见的，即使在声明之前也可以访问（变量提升--声明被移动到当前作用域顶部,<strong>预编译的结果</strong>(在函数（JS）执行的前一刻，会创建一个叫做执行期上下文的(AO)对象这个创建执行期上下文的过程叫做预编译)）。</li><li><code>var</code> 声明的变量可以被重复声明，不会引发错误。</li></ul></li></ol><p>示例：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>  <span class="token comment">//如果用let、const声明就会报错 x is not defined</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 10，即使在块级作用域外也可访问</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>let：</strong><ul><li><code>let</code> 是 ES6 引入的变量声明关键字。</li><li>变量声明的作用域是块级作用域（block scope），它只在声明的块内部可见。</li><li>使用 <code>let</code> 声明的变量不存在变量提升，只有在声明语句之后才能访问(该现象称为暂时性死区)。</li><li><code>let</code> 声明的变量不允许重复声明，如果在同一作用域内重复声明同名变量会引发错误。</li></ul></li></ol><p>示例：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报错，y 在块级作用域外不可访问</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li><p><strong>const：</strong></p><ul><li><code>const</code> 也是 ES6 引入的变量声明关键字。</li><li><code>const</code> 声明的变量拥有块级作用域，和 <code>let</code> 类似，只在声明的块内部可见。</li><li><code>const</code> 声明的变量必须在声明时初始化，并且一旦赋值后就不能再次赋值，它被视为常量。</li><li><code>const</code> 声明的对象或数组，虽然不能再次赋值，但对象或数组的属性或元素仍然可以修改。</li></ul><p>示例：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> z <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
z <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">;</span> <span class="token comment">// 报错，常量不可重新赋值</span>

<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
person<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Jane&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 合法，修改对象属性</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h2 id="对象解构" tabindex="-1"><a class="header-anchor" href="#对象解构" aria-hidden="true">#</a> 对象解构</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;John&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">30</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 使用对象解构获取属性值并设置默认值</span>
<span class="token comment">// 解构对象没有的值才会使用默认值，假设下面age也设置了别的值，最终输出仍是30</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> city <span class="token operator">=</span> <span class="token string">&#39;Unknown&#39;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> person<span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出: John</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出: 30</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>city<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出: Unknown</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code> <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
     <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;xc&#39;</span><span class="token punctuation">,</span>
     <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token string">&#39;180cm&#39;</span><span class="token punctuation">,</span>
     <span class="token literal-property property">bodyWeight</span><span class="token operator">:</span> <span class="token string">&#39;70kg&#39;</span>
 <span class="token punctuation">}</span>

<span class="token keyword">let</span> <span class="token punctuation">{</span><span class="token literal-property property">title</span><span class="token operator">:</span>title2<span class="token punctuation">}</span><span class="token operator">=</span>obj   <span class="token comment">//给title别名</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>title2<span class="token punctuation">)</span>      <span class="token comment">//输出   xc</span>

<span class="token keyword">let</span> <span class="token punctuation">{</span>title<span class="token punctuation">,</span><span class="token operator">...</span>result<span class="token punctuation">}</span><span class="token operator">=</span>obj     <span class="token comment">//结合...运算符</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span>result<span class="token punctuation">)</span>   <span class="token comment">//&#39;xc&#39;, {height: &quot;180cm&quot;, bodyWeight: &quot;70kg&quot;}</span>


 <span class="token comment">//复杂数据解构</span>
<span class="token keyword">let</span> obj<span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span><span class="token string">&#39;xc&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">height</span><span class="token operator">:</span><span class="token string">&#39;180cm&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">bodyWeight</span><span class="token operator">:</span><span class="token string">&#39;70kg&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">list</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;b&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isOf</span><span class="token operator">:</span><span class="token boolean">true</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token punctuation">{</span> height<span class="token punctuation">,</span>title <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">list</span><span class="token operator">:</span><span class="token punctuation">[</span>list1<span class="token punctuation">,</span>list2<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token operator">=</span>obj <span class="token comment">//多重结构赋值，此时type和list是未定义的，无法使用</span>
<span class="token comment">//数组解构是按顺序来的，即list1就是list【0】，list2是list【1】</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>height<span class="token punctuation">,</span>title<span class="token punctuation">,</span>list1<span class="token punctuation">,</span>list2<span class="token punctuation">,</span>list<span class="token punctuation">)</span> <span class="token comment">//180cm xc a b</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="函数声明" tabindex="-1"><a class="header-anchor" href="#函数声明" aria-hidden="true">#</a> 函数声明</h2><p><strong>函数声明优先级高于变量声明</strong>。</p><p>函数声明同样会被提升。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//下面两行无论谁先谁后，a都是ƒ a(){}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> a<span class="token punctuation">;</span>   <span class="token comment">//注意不是 var a=&#39;xx&#39;,这是声明且赋值</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>但要注意，这个提升只适用于函数声明，不适用于函数表达式。函数表达式不会被提升到作用域的顶部，因此必须在声明之后才能调用。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报错，sayHi 是一个未定义的变量</span>

<span class="token keyword">var</span> <span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hi!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="参数默认值" tabindex="-1"><a class="header-anchor" href="#参数默认值" aria-hidden="true">#</a> 参数默认值</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span>age<span class="token punctuation">,</span>name<span class="token operator">=</span><span class="token string">&#39;wxj&#39;</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;xxx&#39;</span><span class="token punctuation">,</span>age<span class="token punctuation">,</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">func</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>  <span class="token comment">// 输出12 wxj</span>

<span class="token comment">/*
	对象默认值是结合了解构的
	当不传任何对象时，参数默认值为{}，然后从中解构出prop1和prop2，都使用给定的默认值
	如果传入的对象中有prop1或prop2，那解构设定的默认值就失效了，使用的是传入的值
*/</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">{</span> prop1 <span class="token operator">=</span> <span class="token string">&#39;defaultValue1&#39;</span><span class="token punctuation">,</span> prop2 <span class="token operator">=</span> <span class="token string">&#39;defaultValue2&#39;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>prop1<span class="token punctuation">,</span> prop2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出: defaultValue1 defaultValue2</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">prop1</span><span class="token operator">:</span> <span class="token string">&#39;customValue1&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出: customValue1 defaultValue2</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">prop2</span><span class="token operator">:</span> <span class="token string">&#39;customValue2&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出: defaultValue1 customValue2</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">prop1</span><span class="token operator">:</span> <span class="token string">&#39;customValue1&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">prop2</span><span class="token operator">:</span> <span class="token string">&#39;customValue2&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出: customValue1 customValue2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>默认参数对函数的<code>length</code>属性的影响</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> z</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1,  它只会返回参数区域内默认参数前的形式参数数量</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="模板字符串" tabindex="-1"><a class="header-anchor" href="#模板字符串" aria-hidden="true">#</a> 模板字符串</h2><p>模板字符串是 JavaScript 中用于创建包含变量或表达式的字符串的一种方式。它以反引号（` `）括起来，允许在字符串内插入变量、表达式或其他字符串，并通过 <code>${}</code> 语法来引用这些插值。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&quot;Alice&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
<span class="token comment">// 使用模板字符串创建字符串</span>
<span class="token keyword">const</span> greeting <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, my name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> and I am </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> years old.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>greeting<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 输出: Hello, my name is Alice and I am 30 years old.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>模板字符串中的 <code>${}</code> 表达式会被计算，并将结果插入到字符串中。这使得字符串拼接变得更加直观和易于理解，特别是当需要插入多个变量或表达式时。</p><p>模板字符串还有其他一些特性：</p><ol><li><p><strong>多行字符串：</strong> 模板字符串允许创建多行字符串，不需要使用 <code>\n</code> 换行符。例如：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> multiLineString <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
This is a
multi-line
string.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>嵌套模板字符串：</strong> 你可以在模板字符串中嵌套其他模板字符串，以便更灵活地构建复杂的字符串。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> firstName <span class="token operator">=</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> lastName <span class="token operator">=</span> <span class="token string">&quot;Doe&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> fullName <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">My name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>lastName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
Greeting,
</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fullName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!

Welcome to our website.
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>标签模板字符串：</strong> 你还可以将模板字符串传递给一个函数，这个函数可以处理模板字符串中的插值部分，这被称为&quot;标签模板字符串&quot;。这个功能允许你自定义字符串的生成方式。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">customTag</span><span class="token punctuation">(</span><span class="token parameter">strings<span class="token punctuation">,</span> <span class="token operator">...</span>values</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 在这里可以处理模板字符串的各个部分</span>
  <span class="token comment">// strings 是一个字符串数组，包含了模板字符串的所有文本部分.如果${}是字符串的最后一位，则strings数组里最后一个是&#39;&#39;</span>
  <span class="token comment">// values 是一个包含了插值表达式的值的数组</span>
  <span class="token comment">// 返回一个处理后的字符串</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>strings<span class="token punctuation">,</span>values<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> customTag<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">xixi,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token number">2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token comment">//[&#39;Hello, &#39;, &#39;xixi,&#39;, &#39;!&#39;, raw: Array(3)] (2) [1, 2]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//react的styled-components就是这种原理，可以直接生成组件，动态生成样式</span>
<span class="token keyword">const</span> Button <span class="token operator">=</span> styled<span class="token punctuation">.</span>button<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  background: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token parameter">props</span> <span class="token operator">=&gt;</span> props<span class="token punctuation">.</span>primary <span class="token operator">?</span> <span class="token string">&#39;palevioletred&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;white&#39;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;
  color: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token parameter">props</span> <span class="token operator">=&gt;</span> props<span class="token punctuation">.</span>primary <span class="token operator">?</span> <span class="token string">&#39;white&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;palevioletred&#39;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">;
  margin: 1em;
  padding: 0.25em 1em;
  border: 2px solid palevioletred;
  border-radius: 3px;
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="数组操作" tabindex="-1"><a class="header-anchor" href="#数组操作" aria-hidden="true">#</a> 数组操作</h2><h3 id="对原数组产生影响的方法" tabindex="-1"><a class="header-anchor" href="#对原数组产生影响的方法" aria-hidden="true">#</a> <strong>对原数组产生影响的方法：</strong></h3><ol><li><p><strong>push()</strong></p><ul><li>作用：将一个或多个元素添加到数组的末尾。返回修改后数组的新长度。</li><li>示例：<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newLength <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//5</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><strong>pop()</strong></p><ul><li><p>作用：移除并返回数组的最后一个元素。</p></li><li><p>示例：</p></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> removedItem <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>removedItem<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>shift()</strong></p><ul><li>作用：移除并返回数组的第一个元素。</li><li>示例：<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> removedItem <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [2, 3]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>removedItem<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><strong>unshift()</strong></p><ul><li>作用：在数组的开头添加一个或多个元素。会返回修改后数组的新长度。</li><li>示例：</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newLength <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//5</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0, -1, 1, 2, 3]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>splice()</strong></p><ul><li>作用：在指定位置<strong>插入或删除</strong>元素，并返回被删除的元素组成的数组。第一个参数为操作下标，第二个参数为要删除的元素个数，后续的参数为添加的元素</li><li>示例：<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> fruits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;apple&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;banana&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;cherry&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> removedItems <span class="token operator">=</span> fruits<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;kiwi&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;orange&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fruits<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;apple&quot;, &quot;kiwi&quot;, &quot;orange&quot;, &quot;cherry&quot;]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>removedItems<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;banana&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><strong>sort()</strong></p><ul><li><p>作用：对数组元素进行排序（<strong>默认按unicode升序</strong>），修改原数组。参数为一个函数，规定排序顺序。</p></li><li><p>示例：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> fruits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;banana&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;apple&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;cherry&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
fruits<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fruits<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;apple&quot;, &quot;banana&quot;, &quot;cherry&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ol><p><strong>注意事项：</strong></p><ol><li>默认情况下，<code>sort()</code> 方法会按照字符顺序（Unicode 编码）对数组进行升序排序。这意味着它不会总是按照数字大小进行排序。</li><li>如果数组中的元素是字符串，<code>sort()</code> 方法会将它们按照字母顺序排列。</li><li>如果数组中的元素是数字，<code>sort()</code> 方法默认会将它们按照字符顺序排列，因此需要使用比较函数来确保按数字大小进行排序。</li></ol><p><strong>使用比较函数进行排序：</strong> 要按照数字大小进行排序，可以提供一个比较函数给 <code>sort()</code> 方法。比较函数接受两个参数，通常命名为 <code>a</code> 和 <code>b</code>，表示正在比较的两个元素。</p><p><strong>小于10的数组用快排，大于10的用插排</strong>,所以不必在意他内部是怎么运行的，只要记得<strong>a-b就是升序，b-a就是降序</strong>，如果是比较对象内的某个属性依旧a.xx-b.xx为升序,反之降序</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
numbers<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;a&#39;</span><span class="token punctuation">,</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> a <span class="token operator">-</span> b
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a <span class="token number">2</span> <span class="token number">5</span>	<span class="token operator">--</span><span class="token number">2</span> <span class="token number">5</span>     <span class="token number">9</span> <span class="token number">1</span> <span class="token number">6</span>	以第一个数为基准，从第二个数开始和它做比较，变成 <span class="token number">2</span> <span class="token number">5</span>
a <span class="token number">9</span> <span class="token number">2</span>	<span class="token operator">--</span>	再用第三个数，从零开始比较，决定插入哪里
a <span class="token number">9</span> <span class="token number">5</span>   <span class="token operator">--</span><span class="token number">2</span> <span class="token number">5</span> <span class="token number">9</span>   <span class="token number">1</span> <span class="token number">6</span>
a <span class="token number">1</span> <span class="token number">5</span>	<span class="token operator">--</span>	第四个数和基准对比，决定和哪边进行对比，因为是升序，<span class="token number">1</span>比<span class="token number">5</span>小，和<span class="token number">5</span>左边的开始对比
a <span class="token number">1</span> <span class="token number">2</span>	<span class="token operator">--</span><span class="token number">1</span> <span class="token number">2</span> <span class="token number">5</span> <span class="token number">9</span>	<span class="token number">6</span>   
a <span class="token number">6</span> <span class="token number">5</span>	<span class="token operator">--</span>	第五个数和基准对比，<span class="token number">6</span>比<span class="token number">5</span>大，和<span class="token number">5</span>右边的开始对比
a <span class="token number">6</span> <span class="token number">9</span>	<span class="token operator">--</span><span class="token number">1</span> <span class="token number">2</span> <span class="token number">5</span> <span class="token number">6</span> <span class="token number">9</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 5, 6, 9]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="7"><li><strong>reverse()</strong></li></ol><ul><li><p>作用：颠倒数组中元素的顺序，修改原数组。</p></li><li><p>示例：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
numbers<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>numbers<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 2, 1]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>8 . <strong>fill()</strong></p></li><li><p>作用：用于将一个固定值替换数组的元素</p></li><li><p>示例：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> fruits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;Banana&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Orange&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Apple&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Mango&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
fruits<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token string">&quot;Runoob&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//Runoob,Runoob,Runoob,Runoob</span>
<span class="token comment">//  array.fill(value, start, end)</span>

<span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>   <span class="token comment">// 10个0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>​</p><h3 id="不对原数组产生影响的方法" tabindex="-1"><a class="header-anchor" href="#不对原数组产生影响的方法" aria-hidden="true">#</a> <strong>不对原数组产生影响的方法：</strong></h3><p><strong>concat()</strong></p><ul><li>作用：连接两个或多个数组，返回一个新数组，而不修改原始数组。</li><li>示例：<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> array1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> array2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newArray <span class="token operator">=</span> array1<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>array2<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArray<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li>注意：</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//concat() 可以接受多个数组参数：</span>
<span class="token keyword">const</span> array1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> array2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> array3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newArray <span class="token operator">=</span> array1<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>array2<span class="token punctuation">,</span> array3<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArray<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9]</span>

<span class="token comment">//concat() 可以用于连接数组和非数组值：</span>
<span class="token keyword">const</span> array1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> nonArrayValue <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newArray <span class="token operator">=</span> array1<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>nonArrayValue<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArray<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>join()</strong></p><ul><li>作用：将数组的所有元素连接成一个字符串，可以指定连接符。</li><li>示例：<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> elements <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;Fire&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Air&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Water&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> elements<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;, &#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;Fire, Air, Water&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><strong>slice()</strong></p><ul><li><p>作用：返回数组的一部分，指定开始和结束的索引（不包括结束索引）。</p></li><li><p>第一个参数为开始索引（包含该索引），如果省略，将从数组的开头开始提取。如果是负数，表示从数组末尾开始计算的位置。</p></li><li><p>第二个参数为结束索引（不包括该索引），如果省略，将提取到数组的末尾。如果是负数，表示从数组末尾开始计算的位置。</p></li><li><p>示例：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>   <span class="token keyword">const</span> fruits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;apple&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;banana&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;cherry&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;date&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//date索引是3，也是-1</span>
   <span class="token keyword">var</span> slicedFruits <span class="token operator">=</span> fruits<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>slicedFruits<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;banana&quot;, &quot;cherry&quot;]</span>
   <span class="token keyword">var</span> slicedFruits <span class="token operator">=</span> fruits<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>slicedFruits<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&#39;cherry&#39;, &#39;date&#39;]</span>
   <span class="token keyword">var</span> slicedFruits <span class="token operator">=</span> fruits<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//-2为cherry，-1为date，slice顾头不顾尾，所以结果为cherry</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>slicedFruits<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&#39;cherry&#39;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><strong>indexOf()</strong></p><ul><li>作用：返回指定元素第一次出现的索引，如果没有找到则返回 -1。第二个参数为开始查找的位置的索引。如果省略或为负数，将从数组的开头开始查找。</li><li>示例：<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> index <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><strong>lastIndexOf()</strong></p><ul><li>作用：返回指定元素最后一次出现的索引（从后往前找），如果没有找到则返回 -1。第二个参数为开始查找的位置的索引（往前找）。如果省略或为负数，将从数组的最后开始往前查找。</li><li>示例：<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> lastIndex <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lastIndex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><strong>find()</strong></p><ul><li>作用：返回满足条件的<strong>第一个元素</strong>，如果没有找到则返回 <code>undefined</code>。第一个参数为回调函数，函数形参为value、index、arr。回调函数应返回一个布尔值，指示是否满足条件。第二个参数为回调函数里的this。</li><li>示例：<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> found <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">&gt;</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>found<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 30</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><strong>findIndex()</strong></p><ul><li>作用：返回满足条件的第一个元素的索引，如果没有找到则返回 -1。和find基本相同，不过返回的是索引。</li><li>示例：<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> foundIndex <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">&gt;</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foundIndex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><strong>filter()</strong></p><ul><li>作用：返回满足条件的所有元素组成的新数组。参数与find相同</li><li>示例：<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> filteredNumbers <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>filteredNumbers<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [15, 20, 25]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><strong>map()</strong></p><ul><li>作用：对数组的每个元素执行指定操作，并返回结果组成的新数组。参数与find相同</li><li>示例：</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> doubledNumbers <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doubledNumbers<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [2, 4, 6]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>forEach()</strong></p><ul><li>作用：对数组的每个元素执行指定操作，没有返回值（类似于 for 循环）。参数与find相同.没有内置的机制跳出循环，非要的话可以splice裁掉后面的数据。流程控制建议用for、while</li><li>示例：<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
numbers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 输出: 1, 2, 3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><strong>every()</strong></p><ul><li>作用：检查数组的所有元素是否满足指定条件，如果都满足则返回 <code>true</code>，否则返回 <code>false</code>。参数与find相同，有一个条件不满足会立即停止遍历。</li><li>示例：<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> allGreaterThanThree <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>allGreaterThanThree<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><strong>some()</strong></p><ul><li>作用：测试数组中的至少一个元素是否通过由提供的函数实现的测试。当其中一个元素满足条件，则返回 <code>true</code>，全都不符合则返回 <code>false</code></li><li>实例：</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">//检查数组中是否有大于 10 的元素</span>
<span class="token keyword">const</span> hasLargeNumber <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> number <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hasLargeNumber<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出: false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>isArray()</strong></p><ul><li>作用：检查一个值是否是数组。</li><li>示例：<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> isArray <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>isArray<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><strong>reduce()</strong></p><p>用于对数组中的每个元素执行一个提供的函数（称为 reducer）,将当前元素执行的返回结果传递给下一个元素执行函数的第一个参数</p><ul><li><p>作用：对数组的元素执行一个累加操作，返回累加的结果。array.reduce( callback(accumulator, currentValue, currentIndex, array), initialValue)</p></li><li><p><code>accumulator</code>：累加器，它是归约过程中的累积结果。它起始值可以由 <code>initialValue</code> 提供，如果没有提供 <code>initialValue</code>，则将使用数组的第一个元素作为初始累加器的值。</p></li><li><p><code>currentValue</code>：当前处理的元素值。</p></li><li><p><code>currentIndex</code>：当前处理的元素索引（可选参数）。</p></li><li><p><code>array</code>：原始数组（可选参数）。</p></li><li><p>示例：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> sum <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">accumulator<span class="token punctuation">,</span> currentValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> accumulator <span class="token operator">+</span> currentValue<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 15</span>

<span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> max <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">accumulator<span class="token punctuation">,</span> currentValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>accumulator<span class="token punctuation">,</span> currentValue<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>max<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 20，数组中的最大值</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><strong>reduceRight()</strong></p><ul><li>作用：与 <code>reduce()</code> 相同，但从数组的末尾开始执行。</li><li>示例：<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> sum <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">reduceRight</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">accumulator<span class="token punctuation">,</span> currentValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> accumulator <span class="token operator">+</span> currentValue<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 15</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><strong>toString()</strong></p><ul><li>作用：将数组转换为字符串，并返回结果。</li><li>示例：<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> fruits <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;apple&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;banana&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;cherry&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fruitString <span class="token operator">=</span> fruits<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fruitString<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;apple,banana,cherry&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><strong>includes()</strong></p><ul><li>作用：检查数组是否包含指定元素，返回 <code>true</code> 或 <code>false</code>。</li><li>示例：<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> includesThree <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>includesThree<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><strong>flat()</strong></p><ul><li>作用：将多维数组扁平化为一维数组。</li><li>示例：<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> nestedArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> flatArray <span class="token operator">=</span> nestedArray<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>flatArray<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4]</span>

nestedArray<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">//[ 1,2,[3,[4]] ] </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h2 id="字符串操作" tabindex="-1"><a class="header-anchor" href="#字符串操作" aria-hidden="true">#</a> 字符串操作</h2><p>**slice：**和数组的基本相同，截取片段。</p><p><strong>substring:</strong> 用于从一个字符串中提取子字符串，并返回这个子字符串。它接受两个参数：开始索引和结束索引（不包括结束索引处的字符）。如果不提供结束索引，将提取从开始索引到字符串末尾的所有字符。注意，<strong><code>substring</code> 不接受负数索引，如果传入负数，它会将其解释为0。</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>string<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>startIndex<span class="token punctuation">,</span> endIndex<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><code>startIndex</code>: 必需，子字符串的起始索引。</li><li><code>endIndex</code>: 可选，子字符串的结束索引（不包括这个位置的字符）。</li></ul><p><strong>示例：</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">&quot;Hello, World!&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> subStr1 <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// &quot;Hello&quot;</span>
<span class="token keyword">const</span> subStr2 <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// &quot;World!&quot;</span>
<span class="token keyword">const</span> subStr3 <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;World&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>substr:<strong>也用于从一个字符串中提取子字符串，并返回这个子字符串。它接受两个参数：开始索引和要提取的字符数。如果不提供第二个参数，它将提取从开始索引到字符串末尾的所有字符。与 <code>substring</code> 不同，</strong><code>substr</code> 允许负数索引，负数索引将被解释为从字符串末尾开始倒数。第二个参数为提取字符数而不是结束索引</strong></p><p><strong>语法：</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>string<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>startIndex<span class="token punctuation">,</span> length<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><code>startIndex</code>: 必需，子字符串的起始索引。</li><li><code>length</code>: 可选，要提取的字符数。</li></ul><p><strong>示例：</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">&quot;Hello, World!&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> subStr1 <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// &quot;Hello&quot;</span>
<span class="token keyword">const</span> subStr2 <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// &quot;World!&quot;</span>
<span class="token keyword">const</span> subStr3 <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// &quot;World&quot;</span>
<span class="token keyword">const</span> subStr4 <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// &quot;World!&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>**split：**用于将一个字符串分割成子字符串数组，根据指定的分隔符（或正则表达式模式）。不会影响原字符串</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>string<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>separator<span class="token punctuation">,</span> limit<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><code>separator</code>（分隔符）：指定用于分割字符串的字符或正则表达式。可以是字符串，也可以是正则表达式。如果不提供分隔符，或分隔符为空字符串（&quot;&quot;），<code>split</code> 将会将字符串分割成单个字符的数组。</li><li><code>limit</code>（限制）：可选参数，用于限制分割后的数组的长度。如果指定了这个参数，数组将包含的元素数量不超过指定的限制。超过限制的部分将被忽略。</li></ul><p><strong>示例：</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">&quot;apple,banana,grape,kiwi&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 使用逗号作为分隔符</span>
<span class="token keyword">const</span> fruits <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fruits<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;apple&quot;, &quot;banana&quot;, &quot;grape&quot;, &quot;kiwi&quot;]</span>

<span class="token comment">// 使用空格作为分隔符，限制数组长度为1</span>
<span class="token keyword">const</span> words <span class="token operator">=</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>words<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;Hello&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>**trim：**用于删除字符串两端的空格字符（包括空格、制表符、换行符等）。返回一个新字符串，不影响原字符串。</p><p>**replace：**将一个子字符串替换为另一个子字符串，并且可以选择替换所有匹配项或只替换第一个匹配项。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>string<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>searchValue<span class="token punctuation">,</span> replaceValue<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><code>searchValue</code>：要查找并替换的字符串或正则表达式。</li><li><code>replaceValue</code>：用于替换匹配项的字符串或替换函数。</li></ul><p><strong>示例：</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">&quot;Hello, World!&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newStr <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;World&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Universe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newStr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;Hello, Universe!&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">&quot;apple, banana, orange, banana&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newStr <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">banana</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;kiwi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newStr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;apple, kiwi, orange, kiwi&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在这个示例中，我们使用正则表达式 <code>/banana/g</code> 来查找并替换所有的 &quot;banana&quot;。</p><p>除了简单的字符串替换，你还可以使用一个函数作为 <code>replaceValue</code>，这个函数可以根据匹配的内容来动态生成替换值。例如：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">&quot;Today is 2022-09-15&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newStr <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d{4}-\d{2}-\d{2}</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">match</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 将日期格式转换为 &quot;15th September, 2022&quot;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>year<span class="token punctuation">,</span> month<span class="token punctuation">,</span> day<span class="token punctuation">]</span> <span class="token operator">=</span> match<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> months <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;January&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;February&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;March&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;April&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;May&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;June&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;July&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;August&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;September&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;October&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;November&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;December&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>day<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">th </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>months<span class="token punctuation">[</span><span class="token function">parseInt</span><span class="token punctuation">(</span>month<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>year<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newStr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;Today is 15th September, 2022&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>**replaceAll:**与 <code>replace</code> 方法不同，<code>replace</code> 方法默认只替换第一个匹配项，而 <code>replaceAll</code> 方法会替换所有匹配项。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">&quot;apple, banana, orange, banana&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newStr <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">&quot;banana&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;kiwi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newStr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;apple, kiwi, orange, kiwi&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>**toUpperCase：**所有字符转换为大写字母</p><p>**toLowerCase：**所有字符转换为小写字母</p><p>**indexOf：**用于在一个字符串中查找指定子字符串（或字符）第一次出现的位置（索引）。如果找到匹配的子字符串，<code>indexOf</code> 返回匹配的位置；如果没有找到匹配的子字符串，它则返回 -1。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>string<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>searchValue<span class="token punctuation">,</span> startIndex<span class="token punctuation">)</span>  <span class="token comment">//startIndex可选</span>
<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">&quot;Hello, World!&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> index1 <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 7</span>
<span class="token keyword">const</span> index2 <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;Universe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -1</span>

<span class="token comment">//通过while循环查找</span>
<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">&quot;apple, banana, orange, banana&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> searchTerm <span class="token operator">=</span> <span class="token string">&quot;banana&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> index <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>searchTerm<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> indices <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">while</span> <span class="token punctuation">(</span>index <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  indices<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
  index <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>searchTerm<span class="token punctuation">,</span> index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>indices<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [6, 24]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="for-in、for-await-in、for-of、for-await-of-待补充" tabindex="-1"><a class="header-anchor" href="#for-in、for-await-in、for-of、for-await-of-待补充" aria-hidden="true">#</a> for in、for await in、for of、for await of 待补充</h2><h2 id="箭头函数和普通函数的区别" tabindex="-1"><a class="header-anchor" href="#箭头函数和普通函数的区别" aria-hidden="true">#</a> 箭头函数和普通函数的区别</h2><ul><li>语法区别</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span>   <span class="token comment">//箭头函数</span>
<span class="token keyword">function</span> <span class="token function">add2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token comment">//普通函数</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>this指向：<strong>箭头函数没有自己的this</strong>，它继承于最近的非箭头函数作用域的this值，同时无法通过call、apply、bind修改this指向。普通函数的this在运行时动态决定</li><li><strong>箭头函数没有arguments</strong>，但可以使用es6的剩余参数。</li><li><strong>箭头函数</strong>不能当作构造函数，<strong>无法通过new调用</strong></li></ul><h2 id="this指向" tabindex="-1"><a class="header-anchor" href="#this指向" aria-hidden="true">#</a> this指向</h2><p>this指向取决于函数的调用，是动态的</p><ul><li>普通函数：fn() ，全局环境非严格模式下，this-》window(非严格模式下如果显式绑定传null，undefined或不传都指向window)，严格模式下是undefined(严格模式下如果显式绑定传什么就是什么，不传就是undefined)</li><li>立即执行函数，this-》window</li><li>构造函数：new 函数名()，如果函数没有返回或返回的是原始数据类型，则this-》new创建的实例对象</li><li>在事件处理函数中，this通常指向触发事件的DOM元素。</li><li>隐式绑定：通常指对象链式调用，指向调用者本身。但容易造成隐式丢失，常见的就是将调用<strong>函数作为参数传递</strong>或者<strong>变量赋值给另外一个变量</strong>，此时this-》window</li><li>由call、bind、apply显式绑定。如果把<code>null、undefined</code>作为<code>this</code>传入<code>call、apply、bind</code>，<strong>此时不会改变的</strong>。多个bind同时改变，最终的<code>this</code>由第一次<code>bind</code>决定，严格模式下传什么就是什么，不传就是undefined</li><li>定时器-setTimeout、setInterval，非箭头函数，非严格模式下默认为window</li></ul><p>箭头函数是<code>JavaScript</code>中的一个特殊情况。它们不会创建自己的<code>this</code>上下文，而是继承外部函数的<code>this</code>。这使得箭头函数的<code>this</code>是静态的，不会随着调用方式而改变，会捕获定义时的this值</p><p>简单概括：</p><p>如果外层是函数，则箭头函数的this为该函数的this。</p><p>如果外层不是函数，则箭头函数的this指向window</p><p>如果外层是类，则this指向实例，如果static方法，执行类本身</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
	<span class="token function-variable function">fn</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>text
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
	<span class="token function-variable function">fn</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> obj1<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> obj3 <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
	<span class="token function-variable function">fn</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">var</span> fn1 <span class="token operator">=</span> obj1<span class="token punctuation">.</span>fn  <span class="token comment">//隐式绑定，造成this丢失，指向window</span>
		<span class="token keyword">return</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj2<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj3<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">/*
    第一个obj1很简单，fn调用时没有其他操作只是访问了this.text，此时的this指向obj1所以输出1
    第二个在执行fn时，返回的是obj1.fn()，可以理解为obj2.fn().obj1.fn()  (或者说它没有用变量存储函数，还是直接调用的obj1.fn)，此时和第一个执行一样，也是在obj1下执行，最后输出1
    第三个是一个隐式丢失，在fn内部用一个变量fn1保存obj1.fn函数，最后再将函数返回，此时this就指向window，也就相当于在全局环境下执行function(){return this.text}，最后输出为undefined
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token function-variable function">say</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">var</span> <span class="token function-variable function">f1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>  <span class="token punctuation">{</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;1111&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token literal-property property">pro</span><span class="token operator">:</span> <span class="token punctuation">{</span>
     <span class="token function-variable function">getPro</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>  <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> obj<span class="token punctuation">.</span>say<span class="token punctuation">;</span>
<span class="token function">o</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>pro<span class="token punctuation">.</span><span class="token function">getPro</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/*
    obj.say隐式绑定到o上，此时this为window，执行函数o，内部执行f1箭头函数，由于此时上下文为window，所以箭头函数的this指向window，最后输出1111，window
    通过对象调用执行say函数，此时this指向obj，所以箭头函数this指向obj，最后输出111 {pro: {…}, say: ƒ}
    此时this为window（getpro是在定义 obj 对象的上下文中创建的。在这种情况下，定义 obj 对象的上下文是全局作用域，所以是window）
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;this1&#39;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// obj</span>
        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// obj</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">f2</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;this2&#39;</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// window</span>
        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// window</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

obj<span class="token punctuation">.</span><span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第一次fn调用，fn是箭头函数（fn是在f1方法中定义的，所以取决于f1的this），this由上层决定（非箭头函数），f1的this是obj（因为是obj.f1调用的），所以第一次调用是obj</p><p>第二次fn虽然用了call改变this指向，但由于fn是箭头函数，无法通过call、bind、apply修改this指向，所以还是obj</p><p>第三次fn调用是普通调用，指向window</p><p>第四次fn调用绑定了f2的this，而f2是箭头函数，外层非函数，所以是window</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span><span class="token punctuation">{</span>
    <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;this1&#39;</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function-variable function">f2</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;this2&#39;</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function-variable function">f3</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;this3&#39;</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token function">f4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;this4&#39;</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
f<span class="token punctuation">.</span><span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//f,实例调用</span>
f<span class="token punctuation">.</span><span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//f,class 里的箭头函数也是指向实例</span>
f<span class="token punctuation">.</span><span class="token function">f3</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//f，箭头函数无法改变this指向</span>
Foo<span class="token punctuation">.</span><span class="token function">f4</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Foo,static静态属性指向类本身</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="call、apply、bind" tabindex="-1"><a class="header-anchor" href="#call、apply、bind" aria-hidden="true">#</a> call、apply、bind</h2><p>首先三个方法都是用来改变函数里的this指向</p><p><strong>call</strong>和<strong>apply</strong>的传参方式不同</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">xx</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token function">xx</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>在非严格模式下，如果使用call或apply方法传入一个<strong>null或undefined</strong>会被转换成一个全局的<strong>window</strong>对象，<strong>不传也会变成window</strong></p><p>严格模式下函数的指向始终是传入的值</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//实现继承</span>
<span class="token keyword">function</span> <span class="token function">Animal</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">=</span>age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Cat</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">Animal</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>name<span class="token punctuation">,</span>age<span class="token punctuation">)</span>  <span class="token comment">//把this指向新的实例对象</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token string">&#39;xx&#39;</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;?&#39;</span><span class="token punctuation">,</span>c<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">xx</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>  <span class="token comment">//传参形式和call相同。不同的是，xx函数并没有被执行，它会返回一个函数，里面的this指向会变为第一个参数</span>

<span class="token comment">//实现函数柯里化</span>
<span class="token keyword">function</span> <span class="token function">getConfig</span><span class="token punctuation">(</span><span class="token parameter">color<span class="token punctuation">,</span>size<span class="token punctuation">,</span>other</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>color<span class="token punctuation">,</span>size<span class="token punctuation">,</span>other<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> defaultConfig <span class="token operator">=</span> <span class="token function">getConfig</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token string">&#39;#fff&#39;</span><span class="token punctuation">,</span><span class="token number">1024</span><span class="token operator">*</span><span class="token number">768</span><span class="token punctuation">)</span>
<span class="token function">defaultConfig</span><span class="token punctuation">(</span><span class="token string">&#39;123&#39;</span><span class="token punctuation">)</span>
<span class="token function">defaultConfig</span><span class="token punctuation">(</span><span class="token string">&#39;456&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">person</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> gee <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;gee&#39;</span><span class="token punctuation">}</span>

<span class="token comment">//手写call</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">newcall</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//判断调用对象是否为函数，因为其他对象可通过修改原型链调用</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span> <span class="token operator">!==</span> <span class="token string">&#39;function&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//判断obj是否为‘’，null，undefined，如果仅obj=obj||window，传入&#39;&#39;会指向window</span>
    obj <span class="token operator">=</span> <span class="token punctuation">(</span>obj <span class="token operator">===</span> <span class="token string">&#39;&#39;</span> <span class="token operator">?</span> <span class="token function">String</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token operator">:</span> obj <span class="token operator">||</span> window<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//切割参数</span>
    <span class="token keyword">let</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> result<span class="token punctuation">;</span>
    <span class="token comment">//调用函数，如果担心原来存在fn属性或函数被覆盖，则使用symbol变量</span>
    <span class="token keyword">let</span> fn <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token number">66</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span>__proto__<span class="token punctuation">[</span>fn<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>   <span class="token comment">//this就是调用call的函数，把它当作对象属性存起来调用后删除</span>
    result <span class="token operator">=</span> obj<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">delete</span> obj<span class="token punctuation">.</span>__proto__<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">person</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> gee <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;gee&#39;</span><span class="token punctuation">}</span>

<span class="token comment">//手写apply</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">newapply</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//判所调用对象是否为函数，因为其他对象可能通过修改原型链来调用</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span> <span class="token operator">!==</span> <span class="token string">&#39;function&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;this is not a function&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//判断obj是否为‘’，null，undefined，如果仅obj=obj||window，传入&#39;&#39;会指向window</span>
    obj <span class="token operator">=</span> <span class="token punctuation">(</span>obj <span class="token operator">===</span> <span class="token string">&#39;&#39;</span> <span class="token operator">?</span> <span class="token function">String</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token operator">:</span> obj <span class="token operator">||</span> window<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> fn <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token number">66</span><span class="token punctuation">)</span><span class="token punctuation">,</span>result<span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span>__proto__<span class="token punctuation">[</span>fn<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token comment">//判断是否有数组传入，没有就直接执行</span>
    result <span class="token operator">=</span> arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">?</span> obj<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> obj<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">delete</span> obj<span class="token punctuation">.</span>__proto__<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">person</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> gee <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;gee&#39;</span><span class="token punctuation">}</span>

<span class="token comment">//手写bind</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">newbind</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//判所调用对象是否为函数，因为其他对象可能通过修改原型链来调用</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span> <span class="token operator">!==</span> <span class="token string">&#39;function&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;this is not a function&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">//fn的this指向的是调用newbind的函数</span>
    <span class="token keyword">function</span> <span class="token function">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//apply里的this指向的是Fn</span>
        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">Fn</span> <span class="token operator">?</span> <span class="token keyword">this</span> <span class="token operator">:</span> obj<span class="token punctuation">,</span> args<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Fn</span><span class="token punctuation">.</span>prototype<span class="token operator">=</span>fn<span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
    <span class="token keyword">return</span> Fn<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> test <span class="token operator">=</span> person<span class="token punctuation">.</span><span class="token function">newbind</span><span class="token punctuation">(</span>gee<span class="token punctuation">,</span><span class="token string">&#39;qe&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;qq&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">test</span><span class="token punctuation">(</span><span class="token string">&#39;xx&#39;</span><span class="token punctuation">)</span>

<span class="token comment">//因为bind绑定后是返回的函数，所以有可能去new它，但是this失效了，因为这个b是由Fn   new出来的，this最终指向了这个新实例b，所以b.name=undefined</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="new一个对象的过程" tabindex="-1"><a class="header-anchor" href="#new一个对象的过程" aria-hidden="true">#</a> new一个对象的过程</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Mother</span><span class="token punctuation">(</span><span class="token parameter">lastName</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>lastName<span class="token operator">=</span>lastName<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> son <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Mother</span><span class="token punctuation">(</span><span class="token string">&#39;Da&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>创建一个新对象son</li><li>新对象被执行[[prototype]]链接。son.__proto__=Mother.prototype</li><li>新对象和函数调用的this绑定起来。Mother.call(son,&#39;Da&#39;)</li><li>执行构造函数中的代码. son.lastName=&#39;Da&#39;</li><li>如果函数没有返回值，自动返回这个新对象</li></ol><h2 id="instanceof" tabindex="-1"><a class="header-anchor" href="#instanceof" aria-hidden="true">#</a> instanceof</h2><p>a instanceof A ,判断a是否为A的实例对象,返回true，false</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//实现无论是否使用new都实例化一个对象</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//this指向了当前实例，外部使用了关键字new</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token comment">//this指向了window，外部没有使用关键字new</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&#39;xx&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> p2 <span class="token operator">=</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token string">&#39;jj&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="原型和原型链" tabindex="-1"><a class="header-anchor" href="#原型和原型链" aria-hidden="true">#</a> 原型和原型链</h2><p><strong>原型是实现面向对象的手段</strong>，原型链是为了实现继承，有原型才有原型链</p><p>构造函数：是一个封装的函数，以此函数为模板，通过new来创建一个新的对象</p><p>原型对象prototype：也叫显式原型。就是用来定义、存放实例共享的属性和方法的一个对象</p><p>隐式原型<code>__proto__</code>:对象都有该属性，用来指向创建该对象的构造函数的原型，即构造函数的prototype</p><p>获取隐式原型的方法：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Add</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>test<span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Add</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//获取隐式原型的方法</span>
a<span class="token punctuation">.</span>__proto__
a<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>prototype     <span class="token comment">// a.constructor === Add === Add.prototype.constructor ,a.constructor属性是原型链继承来的</span>
Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>所有对象都是通过 new 函数 创建的</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果函数的返回值是一个对象，那new这个函数得到的也是那个返回的那个对象，</p><p>如果返回值不是一个对象，那new这个函数得到的是一个名为函数的对象，以上面的代码块为例那就是一个test对象</p><p><strong>所有的函数都是对象</strong></p><p>Function是个最特殊的构造函数，它是直接通过js引擎放到内存里，不由任何东西创建，由Function来构造出Object、Array、Number等</p><p>函数中也可以有属性和方法,如Number.isNaN</p><h3 id="原型-prototype" tabindex="-1"><a class="header-anchor" href="#原型-prototype" aria-hidden="true">#</a> 原型 prototype</h3><p><strong>所有函数都有</strong>一个属性：prototype，称之为函数原型</p><p>原型对象的作用就是定义所有实例对象共享的属性和方法</p><p>默认情况下，原型对象上会有个**构造函数属性constructor，**它指向构造函数本身。实例对象上的constructor属性是通过原型链继承来的</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Test</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token operator">===</span>Test<span class="token punctuation">)</span>   <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>隐式原型 <code>__proto__</code></strong></p><p>所有的<strong>对象都有</strong>一个属性： <code>__proto__</code>,称之为<strong>隐式原型</strong>,</p><p><strong>每个对象</strong>在创建时都会自动拥有一个<strong>构造函数属性constructor</strong>，它是通过原型链继承得到的</p><p>默认情况下，<strong>隐式原型指向创建该对象的函数的原型</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Test<span class="token punctuation">.</span>__proto__<span class="token operator">===</span><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>   <span class="token comment">// true</span>

<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>__proto__<span class="token operator">===</span><span class="token class-name">Test</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>   <span class="token comment">// true</span>
a<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Test  <span class="token comment">//constructor是在a.__proto__里的</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="/xjblog/assets/image-20240507163726238-d47e8ca3.png" alt="image-20240507163726238"></p><p>从图里可以看到，所有由add创建的对象，他们共享一块内存空间，就是add的原型</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

obj1<span class="token punctuation">.</span>abc <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
obj2<span class="token punctuation">.</span>_proto_<span class="token punctuation">.</span>bcd <span class="token operator">=</span> <span class="token number">456</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">.</span>abc<span class="token punctuation">,</span> obj2<span class="token punctuation">.</span>abc<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 123   undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">.</span>_proto_<span class="token punctuation">.</span>bcd<span class="token punctuation">,</span> obj2<span class="token punctuation">.</span>_proto_<span class="token punctuation">.</span>bcd<span class="token punctuation">,</span><span class="token class-name">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>bcd<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 456   456  456,因为obj1.__proto__===obj2.__proto__===A,prototype</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="原型链" tabindex="-1"><a class="header-anchor" href="#原型链" aria-hidden="true">#</a> 原型链</h3><p><strong>当访问一个对象的属性时</strong></p><ol><li>看该对象自身是否拥有该属性，如果有直接使用</li><li>看该对象的隐式原型<code>__proto__</code>是否拥有该属性，如果有直接使用</li></ol><p><img src="/xjblog/assets/image-20240508104307265-6d887361.png" alt="image-20240508104307265"></p><p>总的来说：</p><ul><li><strong>所有的对象都有<code>__proto__</code>属性</strong>，不一定有prototype；实例对象可以通过隐式原型连接到构造函数的prototype属性上，而原型链就从这两者的关系开始一层一层往下找</li><li>所有的函数都有prototype和<code>__proto__</code>（因为函数的本质也是对象）,所有的函数（包括自定义函数）都是Function实例的对象</li><li>特殊点：Function的隐式原型指向自身的原型（**Function.prototype===Function.<code>__proto__</code>**因为它是一开始直接放在内存中，不是由别人创建的） Object的prototype的隐式原型指向null</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">F</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">a</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">b</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>a<span class="token punctuation">,</span> f<span class="token punctuation">.</span>b<span class="token punctuation">,</span> <span class="token constant">F</span><span class="token punctuation">.</span>a<span class="token punctuation">,</span> <span class="token constant">F</span><span class="token punctuation">.</span>b<span class="token punctuation">)</span>     
<span class="token comment">// fn undefined fn fn ,function会顺着隐式原型找到Object的原型,所以F.a能找到</span>
<span class="token comment">//f.__proto__==F.prototype; F.prototype.__proto__==Object.prototype; 所以f.a能找到，Object.prototype原型链再往上就是null，所以b找不到</span>
<span class="token comment">// F.__proto__ == Function.prototype , Function.prototype.__proto__==Object.prototype,所以a，b都有</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="object-setprototypeof" tabindex="-1"><a class="header-anchor" href="#object-setprototypeof" aria-hidden="true">#</a> Object.setPrototypeOf</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token constant">A</span><span class="token punctuation">,</span><span class="token constant">B</span><span class="token punctuation">)</span>  <span class="token comment">//给A的隐式原型设置为B</span>
<span class="token comment">// A.__proto__=B</span>

<span class="token comment">//方法的实现</span>
Object<span class="token punctuation">.</span><span class="token function-variable function">setPrototypeOf</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span>proto</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    obj<span class="token punctuation">.</span>__proto__<span class="token operator">=</span>proto<span class="token punctuation">;</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="作用域" tabindex="-1"><a class="header-anchor" href="#作用域" aria-hidden="true">#</a> 作用域</h2><p>作用域是变量和函数可作用的范围，分为<strong>全局作用域</strong>和<strong>局部作用域</strong>，局部作用域分为<strong>函数作用域</strong>和<strong>块级作用域</strong></p><h2 id="作用域链" tabindex="-1"><a class="header-anchor" href="#作用域链" aria-hidden="true">#</a> 作用域链</h2><p>简单的说就是作用域的集合，作用域链决定了哪些数据能被访问</p><p>当使用一个变量时，会先在自己内部找变量，没有就往父级作用域去找，直到全局作用域(查找过程就是顺着作用域链逐层向上查找)</p><h2 id="作用域内部原理的五个过程" tabindex="-1"><a class="header-anchor" href="#作用域内部原理的五个过程" aria-hidden="true">#</a> 作用域内部原理的五个过程：</h2><p>编译、执行、查询、嵌套、异常</p><h3 id="编译-了解" tabindex="-1"><a class="header-anchor" href="#编译-了解" aria-hidden="true">#</a> 编译（了解）</h3><p>总的来说编译阶段就是编译器把程序分解成词法单元，再将词法单元解析成AST，再把AST转换成机器指令等待执行</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token comment">//1.1分词</span>
<span class="token comment">//词法单元： var 、a、=、2、;</span>
<span class="token punctuation">{</span>
	<span class="token string-property property">&#39;var&#39;</span><span class="token operator">:</span><span class="token string">&#39;keyword&#39;</span><span class="token punctuation">,</span><span class="token comment">//关键字</span>
	<span class="token string-property property">&#39;a&#39;</span><span class="token operator">:</span><span class="token string">&#39;indentifier&#39;</span><span class="token punctuation">,</span><span class="token comment">//标识符</span>
	<span class="token string-property property">&#39;=&#39;</span><span class="token operator">:</span><span class="token string">&#39;assignment&#39;</span><span class="token punctuation">,</span><span class="token comment">//分配</span>
	<span class="token string-property property">&#39;2&#39;</span><span class="token operator">:</span><span class="token string">&#39;interger&#39;</span><span class="token punctuation">,</span><span class="token comment">//整数</span>
	<span class="token string-property property">&#39;;&#39;</span><span class="token operator">:</span><span class="token string">&#39;eos&#39;</span><span class="token punctuation">,</span><span class="token comment">//end of statement 结束语句</span>
<span class="token punctuation">}</span>	
    
<span class="token comment">//1.2解析。抽象语法树（AST abstract snatax tree）</span>
    
<span class="token comment">//1.3代码生成。将ast转换成可执行代码的过程</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="执行阶段-了解" tabindex="-1"><a class="header-anchor" href="#执行阶段-了解" aria-hidden="true">#</a> 执行阶段（了解）</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token comment">// 1.引擎运行代码时首先查找当前作用域，看a变量是否在当前作用域，如果是，则直接使用这个变量，否则继续查找</span>
<span class="token comment">// 2.如果找到了变量，就把2赋值给当前变量，否则引擎就抛出异常</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查询阶段-了解" tabindex="-1"><a class="header-anchor" href="#查询阶段-了解" aria-hidden="true">#</a> 查询阶段（了解）</h3><p>一般来说，变量处于赋值操作左侧时，属于LHS查询，即左查询。</p><p>在右侧时是RHS查询，比如函数的调用</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token comment">//1.foo()对foo函数对象进行RHS引用</span>
<span class="token comment">//2.函数传参a=2对a进行了LHS引用</span>
<span class="token comment">//3.console.log(a)；对console对象进行RHS引用，并检查其是否有log方法</span>
<span class="token comment">//4.console.log(a)对a进行RHS引用，并把得到的值传给console.log</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="执行上下文" tabindex="-1"><a class="header-anchor" href="#执行上下文" aria-hidden="true">#</a> 执行上下文</h2><p>执行上下文是对JavaScript代码执行环境的一种抽象概念。</p><p>执行上下文的三个生命周期：</p><ul><li>创建阶段：创建变量对象、创建作用域链、确定this指向</li><li>执行阶段：进入执行上下文、执行代码</li><li>回收阶段：执行上下文出栈、等待垃圾回收</li></ul><h2 id="深浅拷贝" tabindex="-1"><a class="header-anchor" href="#深浅拷贝" aria-hidden="true">#</a> 深浅拷贝</h2><h2 id="数组随机排序" tabindex="-1"><a class="header-anchor" href="#数组随机排序" aria-hidden="true">#</a> 数组随机排序</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">sortRandom</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">0.5</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="心跳为什么用settimeout而不用setinterval" tabindex="-1"><a class="header-anchor" href="#心跳为什么用settimeout而不用setinterval" aria-hidden="true">#</a> 心跳为什么用setTimeout而不用setInterval</h2><p><strong>补充：定时器有专门的线程管理，碰到定时器代码会交给该线程进行计时，到时间了加入任务队列</strong></p><ol><li>JS所谓的“单线程”只是指主线程只有一个，并不是整个运行环境都是单线程</li><li>JS的异步靠底层的多线程实现</li><li>不同的异步API对应不同的实现线程</li></ol><p>设定一个 150ms 后执行的定时器不代表到了 150ms 代码就立刻执行，它表示代码会在 150ms 后被加入到宏任务队列中。</p><p>如果在这个时间点上，微任务队列中没有其他东西，那么宏任务队列才开始被执行。</p><p><strong>setInterval的缺陷：</strong></p><p>假如定时器里面的代码需要进行大量的计算，或者是 DOM 操作。</p><p>这样一来，花的时间就比较长，有可能前一次代码还没有执行完，后一次代码就被添加到队列了。</p><p>假如时间间隔为 100 毫秒，要执行的代码需要 300 毫秒，那到执行结束，理应会照成3次的代码阻塞，无论阻塞了多久,实际上只有1次瞬间输出</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> time <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;执行&#39;</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>
        time <span class="token operator">=</span> time <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token string">&#39;end&#39;</span><span class="token punctuation">)</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">799999999</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                 <span class="token comment">// console.log(&#39;counting&#39;);  </span>
                <span class="token comment">//不要用log来测试，因为打印并不会真正阻塞代码的执行，在条件i&lt;6000时观感上log了很久，但是end最后才只有100ms左右</span>
                total <span class="token operator">+=</span> i<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            num <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">timeEnd</span><span class="token punctuation">(</span><span class="token string">&#39;end&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>为了确保定时器代码插入到队列总的最小间隔为指定时间。</p><p>当使用setInterval()时，仅当没有该定时器的任何其他<strong>代码实例</strong>时，才能将定时器代码添加到代码队列中。</p><p>假设没有这条原则，那么问题来了，假设Javascript主进程的运行时间非常长，那么setInterval的代码被多次添加到了代码队列中，等到主进程空闲时，定时器代码便会连续执行多次而之间不会有任何停顿。</p><p><strong>用setTimeout实现：</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">repeat</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> ms</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">repeat</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span> ms<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> ms<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">repeat</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="面向过程" tabindex="-1"><a class="header-anchor" href="#面向过程" aria-hidden="true">#</a> 面向过程</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//把大象放进冰箱</span>
<span class="token keyword">function</span> <span class="token function">openFridge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>   <span class="token comment">//打开冰箱</span>
<span class="token keyword">function</span> <span class="token function">elephantIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token comment">//把大象放进冰箱</span>
<span class="token keyword">function</span> <span class="token function">closeFridge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>   <span class="token comment">//关闭冰箱</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>思考的切入点是功能的步骤</p><h2 id="面向对象" tabindex="-1"><a class="header-anchor" href="#面向对象" aria-hidden="true">#</a> 面向对象</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//把大象放进冰箱</span>
<span class="token keyword">function</span> <span class="token function">Fridge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Fridge</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">open</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Fridge</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">close</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Fridge</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">join</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">something</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Elephant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//打开冰箱</span>
<span class="token keyword">var</span> fri <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fridge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fri<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//放进大象</span>
<span class="token keyword">var</span> ele <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Elephant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fri<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>ele<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//关闭冰箱</span>
fri<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>思考的切入点是对象的划分</p><p>面向对象的写法更容易拆分组合、拓展</p><h2 id="类-class" tabindex="-1"><a class="header-anchor" href="#类-class" aria-hidden="true">#</a> 类 class</h2><p>类是构造函数的语法糖</p><h3 id="传统构造函数的问题" tabindex="-1"><a class="header-anchor" href="#传统构造函数的问题" aria-hidden="true">#</a> 传统构造函数的问题</h3><ol><li>属性和原型方法定义分离，降低了可读性</li><li>原型成员可以被枚举</li><li>默认情况下，构造函数仍然可以被当作普通函数使用</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Animal</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">=</span>age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">say</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">let</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token string">&#39;狗&#39;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
dog<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> dog<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>     <span class="token comment">// say也被打印出来了</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> otherName <span class="token operator">=</span> <span class="token string">&#39;eat&#39;</span>
<span class="token keyword">class</span> <span class="token class-name">Animal</span><span class="token punctuation">{</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//构造器</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">=</span>age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span>
    
    <span class="token punctuation">[</span>otherName<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token string">&#39;狗&#39;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
dog<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> dog<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>    <span class="token comment">//say没有被打印</span>
<span class="token punctuation">}</span>

dog<span class="token punctuation">.</span>__proto__<span class="token operator">===</span><span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>类的特点</strong></p><ul><li>类声明不会被提升到全局，也和let、const一样存在暂时性死区</li><li>类中所有代码都在严格模式下执行</li><li>类的所有方法都是不可枚举的</li><li>类的所有方法都无法被当作构造函数使用 , 即如 new Animal.say()</li><li>类必须使用new来调用</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span><span class="token punctuation">{</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//构造器</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">=</span>age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span>
    
    <span class="token function-variable function">eat</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    
    <span class="token keyword">set</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>			<span class="token comment">// 创建一个age属性，并给它加上setter，给该属性赋值时，会运行该函数</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> age <span class="token operator">!==</span> <span class="token string">&#39;number&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&quot;age must be a number&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>age<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            age <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>age<span class="token operator">&gt;</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            age <span class="token operator">=</span> <span class="token number">1000</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_age<span class="token operator">=</span>age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">get</span> <span class="token function">age</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>			<span class="token comment">//创建一个age属性，并给它加上getter，读取该属性时，会运行该函数</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_age<span class="token operator">+</span><span class="token string">&#39;岁&#39;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">static</span> bcd <span class="token operator">=</span> <span class="token string">&#39;123&#39;</span>  <span class="token comment">//定义静态成员,实例无法访问,直接通过类来访问</span>
    
<span class="token punctuation">}</span>

Animal<span class="token punctuation">.</span>abc<span class="token operator">=</span><span class="token string">&#39;123&#39;</span><span class="token punctuation">;</span>  <span class="token comment">//定义的是类的静态成员</span>

<span class="token keyword">let</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token string">&#39;狗&#39;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>字段初始化器，允许在类中直接给变量赋值</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    a<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    b<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token comment">//效果等价于下面，也不能算是完全相同，因为在constructor外面是挂载在类的原型，constructor里是挂载在实例上</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   
        <span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>b<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
	字段初始化器就相当于在constructor里执行了this.xx=xxx;
	所以字段初始化器赋值箭头函数时，箭头函数的外部就是constructor，constructor里的this指向的就是实例
	区别就是，如果初始化用了箭头函数，那这个函数就是挂载在每一个实例上，而非原型	
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="装饰器-decorator" tabindex="-1"><a class="header-anchor" href="#装饰器-decorator" aria-hidden="true">#</a> 装饰器 decorator</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Test</span><span class="token punctuation">{</span>
    @Obsolete
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Obsolete</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> name<span class="token punctuation">,</span> descriptor</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// target : function Test</span>
    <span class="token comment">// name : print</span>
    <span class="token comment">// descriptor : {value: print...}</span>
    <span class="token keyword">const</span> oldFunc <span class="token operator">=</span> descriptor<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    descriptor<span class="token punctuation">.</span><span class="token function-variable function">value</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;这个方法已过时&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">oldFunc</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//会先输出方法已过时，然后输出hello world</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>项目中要配置了插件才能使用装饰器，umi创建的中后台模板一般都能使用</p><h3 id="继承" tabindex="-1"><a class="header-anchor" href="#继承" aria-hidden="true">#</a> <strong>继承</strong></h3><p>如果两个类A和B，如果可以描述为：B是A，则 A和B形成继承关系</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span><span class="token punctuation">{</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">//构造器</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">=</span>age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//使用extends关键字来继承</span>
<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>age<span class="token punctuation">)</span> <span class="token comment">// super调用的是父类的构造函数</span>
        <span class="token comment">//相当于Animal.call(this,name,age)</span>
    <span class="token punctuation">}</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//先调用父类的say，再续写自身的say</span>
        <span class="token comment">//xxx</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意：Es6要求，如果定义了constructor，并且<strong>该类是子类</strong>，则必须在constructor的第一行手动调用父类的构造函数</p><p>如果子类不写constructor，则会有默认的构造器，该构造器需要的参数和父类一致，并且自动调用父类构造器</p><p>要想继承多个类，只能一层一层extends</p><p>super</p><ul><li>当值函数调用，表示父类构造函数</li><li>如果当作对象使用，则表示父类，可访问父类的静态属性</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{</span>
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">static</span> test<span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span><span class="token punctuation">{</span>
    
<span class="token punctuation">}</span>

<span class="token constant">B</span><span class="token punctuation">.</span>test <span class="token comment">// hello</span>
<span class="token constant">B</span><span class="token punctuation">.</span>__proto__<span class="token operator">===</span><span class="token constant">A</span>   <span class="token comment">//true</span>
<span class="token class-name">B</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">A</span><span class="token punctuation">.</span>prototype   <span class="token comment">//true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>子类的<code>__proto__</code>隐式原型</strong>，表示构造函数的继承，<strong>总是指向父类</strong>。不是子类的父类（如代码中的A）的隐式原型指向Function.prototype</li><li><strong>子类的prototype显式原型的<code>__proto__</code>属性</strong>，表示方法的继承，<strong>总是指向父类的prototype</strong>。（因为这么思考：b是B的实例，b.<code>__proto__</code>===B.prototype,B.prototype里没有的肯定要继续往A上找，所以B.prototype.<code>__proto__</code>===A.prototype） <ul><li>以前构造函数的prototype的隐式原型指向的是Object.prototype,因为构造函数的prototype是个普通对象，对象的隐式原型指向它构造函数的原型，即Object.prototype</li></ul></li></ul><p>造成上面的结果是因为，类的继承是按照下面的模式实现的</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">B</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// B的实例继承A的实例</span>
Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token class-name">B</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span><span class="token class-name">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
<span class="token comment">// B继承A的静态属性</span>
Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token constant">B</span><span class="token punctuation">,</span><span class="token constant">A</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//这种情况下，A作为一个基类（不存在任何继承），就是个普通函数</span>
<span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token constant">A</span><span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype  <span class="token comment">//true ,就按照构造函数的思路去理解</span>
<span class="token class-name">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype  <span class="token comment">// true A.prototype就是个对象，对象的隐式原型指向创建它的构造函数的原型，对象都是Object new出来的</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="抽象类" tabindex="-1"><a class="header-anchor" href="#抽象类" aria-hidden="true">#</a> 抽象类</h3><p>以abstract开头的类是抽象类，和其他类区别不大，只是不能用来创建对象，只能被继承</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>abstract <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>    <span class="token comment">//抽象方法必须出现在抽象类中，子类必须重写抽象方法</span>
  abstract <span class="token function">xixi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">void</span><span class="token punctuation">;</span>  <span class="token comment">//ts中就返回定义空 abstract Test():void;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Test2</span> <span class="token keyword">extends</span> <span class="token class-name">Test</span><span class="token punctuation">{</span>
  <span class="token function">xixi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>抽象方法必须在抽象类中使用，用abstract修饰方法，没有方法体，子类必须对抽象方法进行重写</p><p>用js模拟抽象类abstract关键字</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token punctuation">.</span>target <span class="token operator">===</span> Animal<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&#39;无法直接创建Animal对象&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// 抽象方法，子类必须实现</span>
    <span class="token function">abstractMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;Abstract method not implemented&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span><span class="token punctuation">{</span>
    <span class="token function">abstractMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// 必须重写，不然使用的时候就报错了，new的时候不重写不会报错</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 不会报错</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 报错</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="promise" tabindex="-1"><a class="header-anchor" href="#promise" aria-hidden="true">#</a> Promise</h2><p>Promise是一套专门处理异步场景的规范，这套规范最早诞生于前端社区，规范名称为Promise A+</p><p>以前处理异步，需要一层层回调，容易形成<strong>回调地狱</strong>，而promise就可以避免这样的问题</p><h3 id="promise-a-规范" tabindex="-1"><a class="header-anchor" href="#promise-a-规范" aria-hidden="true">#</a> Promise A+规范</h3><ol><li>所有的异步场景，都可以看作是一个异步任务，每个异步任务，<strong>在JS中应该表现为一个对象</strong>，该对象称之为Promise对象，也叫做任务对象</li><li>每个任务对象，都应该有两个阶段（未决阶段、已决阶段）、三个状态（挂起状态pending、完成状态fulfilled、失败状态rejected） <ul><li>任务总是从未决阶段变到已决阶段，无法逆行</li><li>任务总是从挂起状态变到完成或失败状态，无法逆行</li><li>任务一旦完成或失败，状态就固定下来，永远无法改变</li></ul></li><li>挂起-&gt;完成，称之为resolve；挂起-&gt;失败称之为reject。任务完成时，可能有一个相关数据：任务失败时，可能有一个失败原因。</li><li>可以针对任务进行后续处理，针对完成状态的后续处理称之为onFulfilled，针对失败的后续处理称之为onRejected</li></ol><h3 id="promise-api" tabindex="-1"><a class="header-anchor" href="#promise-api" aria-hidden="true">#</a> Promise Api</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> pro <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;马上执行该函数里的内容&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//成功</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;success&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token comment">//失败</span>
            <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&#39;fail&#39;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

pro<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">//成功的回调,参数是通过resolve调用时传过来的</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">//失败的回调,参数是通过reject调用时传过来的</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">,</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//也可以直接.then</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">//finally无论成功失败都会执行</span>


<span class="token comment">//catch方法</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>onRejected<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span>onRejected<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="链式调用" tabindex="-1"><a class="header-anchor" href="#链式调用" aria-hidden="true">#</a> 链式调用</h3><ol><li><p>then、catch方法必定会返回一个新的Promise，可理解为后续处理也是一个任务</p></li><li><p>新任务的状态取决于后续处理：</p><ul><li>若没有相关后续处理，新任务的状态和前任务一致，数据为前任务的数据。</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> pro1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> pro2 <span class="token operator">=</span> pro1<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token comment">// pro2的状态为reject 123，因为pro1的为reject，而then里面没有相应的onRejected处理</span>

<span class="token comment">//同理如果pro1为fulfilled,而pro2 = pro1.catch(err=&gt;{}),没有相应的onFulfilled方法，pro2的状态也为fulfilled</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>上一个任务的状态还未转换成已决，则新任务的状态为挂起</p></li><li><p>若上一个任务状态已决，且新任务有相关后续处理，则根据后续处理的执行情况确定新任务的状态</p><ul><li>后续处理执行无错，新任务的状态为完成，数据为后续处理的返回值</li><li>后续处理执行有错，新任务的状态为失败，数据为异常对象</li><li>后续执行返回的是一个任务对象，新任务的状态和数据与该任务对象一致</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> pro1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> pro2 <span class="token operator">=</span> pro1<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&#39;666&#39;</span>   <span class="token comment">//无错误，下面pro2状态为fulfilled，数据为666</span>
    <span class="token comment">//   -----分割</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">)</span>   <span class="token comment">//出错，下面pro2状态为rejected，数据为抛出的错误内容</span>
    <span class="token comment">//   -----分割</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment">//返回一个新的promise，则pro2的状态就是这个新promise的状态</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;pro2&#39;</span><span class="token punctuation">,</span>pro2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//测试</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//结果输出1，2</span>
<span class="token comment">/*
	第一个promise状态为fulfilled&lt;1&gt;,
	有相关回调then，且正常执行输出1，则第二个promise状态为fulfilled&lt;2&gt;
	还有后续catch，但它只调用失败回调，所以第三个promise状态和第二个一样,fulfilled&lt;2&gt;
	还有一个回调then，符合fulfilled的响应，正常执行输出2，第四个promise状态为fulfilled&lt;undefined&gt;
	
*/</span>

<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment">//这也能解释为什么平时等价于下面,因为then里没有失败回调，所以then的返回值的为上个new Promise的rejected状态和其返回值</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>


Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>    <span class="token comment">//不是函数，直接无视</span>
	<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">//不是函数直接无视</span>
	<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span>	<span class="token comment">//是函数，相当于将结果1传递给了log，所以该代码执行为输出1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> a<span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;promise1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;promise2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;promise3&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;promise4&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> b<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;after1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> a<span class="token punctuation">;</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;after2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;end&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">/*
首先执行b promise内部代码，==输出 promise1==
执行settimeout，1s后将resolve放入宏队列，执行then返回promise2，p2为pending，执行then返回promise3，p3为pending，执行then返回promise4，p4为pending，执行完毕，b状态为pedding

然后a变量赋值，执行promise内部代码，===输出a为undefined===，因为promise内部还没执行完
await b，即等待p4，因为p4才是b的返回值,await b后的代码暂不执行，这个函数就暂时结束了，a就变为Promise&lt;pending&gt;,执行下面代码，====输出end===

1s后resolve进入了宏队列，立即执行，promise1 fulfilled，promise2 回调进入微队列，马上执行，===输出promise2===
promise3回调进入微队列，马上执行，===输出promise3===
promise4回调进入微队列，马上执行，===输出promise4===，b状态变为 fulfilled

执行a后面的代码,===输出a Promise&lt;pending&gt;===
===输出after1===
又await a，等待a完成,又执行结束了，后面的代码不用执行了

*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="静态方法" tabindex="-1"><a class="header-anchor" href="#静态方法" aria-hidden="true">#</a> 静态方法</h3><ul><li>Promise.resolve():直接返回一个成功状态的任务</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> pro <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//等价于</span>
<span class="token keyword">const</span> pro <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Promise.reject():直接返回一个失败状态的任务</li><li>Promise.all(任务数组)：<strong>并发</strong>，返回一个任务。任务数组<strong>全部成功则成功</strong>，成功的数据是数组。任何一个失败则失败。若多个reject，只返回第一个失败的值</li><li>Promise.any(任务数组)：<strong>并发</strong>，返回一个任务。任务数组<strong>任意成功则成功</strong>，若多个成功，只返回第一个成功的值，任何全部失败则失败</li><li>Promise.allSettled(任务数组)：<strong>并发</strong>，返回一个任务。任务数组<strong>全部已决则成功</strong>，<strong>该任务不会失败</strong></li><li>Promise.race(任务数组)：<strong>并发</strong>，返回一个任务。任务数组<strong>任一已决则已决</strong>，状态和它一致</li></ul><h2 id="async-await" tabindex="-1"><a class="header-anchor" href="#async-await" aria-hidden="true">#</a> async / await</h2><p>有了Promise，异步任务就有了一种统一的处理方式</p><p>有了统一的处理方式，ES官方就可以对其进一步优化</p><p>ES7推出了两个关键字async和await，用于更加优雅的表达Promise</p><p><strong>async</strong></p><p>async关键字用于修饰函数，被它修饰的函数，一定返回Promise</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">123</span><span class="token punctuation">;</span>   <span class="token comment">//函数返回值是promise完成后的数据   Promise {123}</span>
<span class="token punctuation">}</span>
<span class="token comment">//等价于</span>
<span class="token keyword">function</span> <span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">m2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>   <span class="token comment">//如果返回的是Promise，则此方法得到的值和此Promise状态一致。可以理解为没有async修饰</span>
<span class="token punctuation">}</span>


<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">m3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token comment">// 若执行报错，则任务为rejected</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>await</strong></p><p>await 关键字表示等待某个Promise完成，它必须用于 async 函数中</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> n <span class="token operator">=</span> <span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1</span>
<span class="token punctuation">}</span>

<span class="token comment">//等价于</span>
<span class="token keyword">function</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>await等待的promise有可能是rejected，如果是rejected，它会抛出一个异常，想要处理异常，就要使用try catch</p><h2 id="绝对路径-相对路径" tabindex="-1"><a class="header-anchor" href="#绝对路径-相对路径" aria-hidden="true">#</a> 绝对路径 / 相对路径</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">/*
	绝对路径就是一个完整的URL地址，不过它可以有以下情况的简写
	1、省略协议,如 //localhost:8080/abc ，会根据当前页面的协议来拼接到前面
	2、省略协议、域名、端口, 绝对路径最终的生成和你当前页面的path无任何关系,
		如http://a.com/a、http://a.com/b/c、都资源访问了 /k   -&gt;  最终url都是 http://a.com/k
*/</span>



<span class="token comment">/*
	相对路径都以 ./  或 ../开头
	它相对的是当前页面的path（最后一个/），如http://a.com/a/b/c/d,  访问了./k  -&gt; http://a.com/a/b/c/k
	../k  -&gt;  http://a.com/a/b/k
*/</span>


如果页面资源和其他资源的path部分相对位置是稳定的，那就使用相对路径，否则绝对路径

站外资源必须使用绝对路径
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="防抖、节流" tabindex="-1"><a class="header-anchor" href="#防抖、节流" aria-hidden="true">#</a> 防抖、节流</h2><p>防抖和节流都是用来控制函数执行频率的</p><p><strong>防抖：某个函数在短时间内只执行最后一次。</strong></p><p>函数被触发时，需要先计时，在延迟的时间内，如果再次被触发，就重新开始计时。这样就能达到，只响应最后一次，其余的请求都过滤掉。</p><p>防抖适用于需要<strong>等待用户停止某个操作后才执行相应操作</strong>的场景</p><p><strong>应用场景：</strong></p><ul><li>搜索框输入发送请求</li><li>窗口改变大小</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 简单的防抖</span>
<span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timeoutId<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeoutId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    timeoutId <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>节流：某个函数在指定时间段内只执行第一次，直到指定时间段结束</strong></p><p>指定时间段内只执行第一次，也就是这段时间内，只需要响应第一次的请求即可，后续的请求都会被过滤掉，直到下个时间段，才继续响应</p><p>节流适用于需要在一定时间间隔内控制函数执行频率的场景</p><p><strong>应用场景：</strong></p><ul><li>监听滚动事件（触底更新之类，如果触底还一直滚动用防抖就无法触发，而节流可以）</li><li>鼠标点击事件</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//简单的节流</span>
<span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> lastTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>now <span class="token operator">-</span> lastTime <span class="token operator">&gt;=</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            lastTime <span class="token operator">=</span> now<span class="token punctuation">;</span>
            <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="filereader" tabindex="-1"><a class="header-anchor" href="#filereader" aria-hidden="true">#</a> FileReader</h2><p>FileReader 是 Web API 中的一部分，用于在客户端 JavaScript 中异步读取文件内容。它允许网页应用程序读取用户计算机上的文件，例如通过文件输入字段 <code>input type=&quot;file&quot;</code> 选择的文件。FileReader 对象提供了几种方法来读取不同类型的文件，包括文本文件、图像文件和二进制文件。</p><ol><li><code>readAsText(file [, encoding])</code>: 以文本格式读取文件内容。可以选择性地指定文件的字符编码（例如 &quot;UTF-8&quot;）。</li><li><code>readAsDataURL(file)</code>: 以 data URL 格式读取文件内容。返回一个以 &quot;data:&quot; 开头的 URL，包含文件的 Base64 编码数据。</li><li><code>readAsArrayBuffer(file)</code>: 以 ArrayBuffer 格式读取文件内容。返回一个 ArrayBuffer 对象，包含文件的二进制数据。</li><li><code>readAsBinaryString(file)</code>: 以二进制字符串格式读取文件内容。不推荐使用，因为该方法已被废弃。</li></ol><p>一般情况下，使用 <code>readAsText()</code> 可以满足大多数文本文件的读取需求，而 <code>readAsDataURL()</code> 则常用于读取图像文件，而 <code>readAsArrayBuffer()</code> 则用于读取二进制文件，如音频文件或压缩文件。</p><p>当文件读取完成后，FileReader 对象会触发 <code>load</code> 事件，你可以在相应的事件处理程序中获取文件内容</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> fileInput <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;fileInput&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fileInput<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;change&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> file <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    reader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 文件读取完成后触发的事件</span>
        <span class="token keyword">const</span> content <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出文件内容</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

   <span class="token keyword">const</span> result <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">readAsArrayBuffer</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="模块化" tabindex="-1"><a class="header-anchor" href="#模块化" aria-hidden="true">#</a> 模块化</h2><p>Nodejs是CommonJS模块化</p><p>浏览器是ES6模块化</p><h3 id="commonjs" tabindex="-1"><a class="header-anchor" href="#commonjs" aria-hidden="true">#</a> CommonJS</h3><p>使用<strong>exports导出模块</strong>，<strong>require导入模块</strong>(使用相对路径，必须以./或../开头，如果不用此开头则它会尝试引入nodejs的核心模块如fs等、或导入包管理工具所安装的第三方模块)，路径可以是<strong>动态的</strong>，且导入模块时是同步执行</p><p>exports是一个空的对象， 你可以为该对象添加任何需要导出的内容。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//a.js</span>
<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//需要隐藏的内部实现</span>

<span class="token comment">//exports = {}</span>
<span class="token comment">//要暴露给外部的接口</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">getNumber</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    count<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> count<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

exports<span class="token punctuation">.</span>abc <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>

<span class="token comment">/*  只是效果类似exports={}，并非真正执行exports={},看了下面可知exports是引用了module.exports的地址，重新赋值就断开连接了
	exports={
		getNumber: fn,
		abc: 123,
	}
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//b.js</span>
<span class="token keyword">let</span> util <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./a.js&quot;</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>util<span class="token punctuation">)</span>  <span class="token comment">// { getNumber: fn,abc: 123 }</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="nodejs对commonjs的实现" tabindex="-1"><a class="header-anchor" href="#nodejs对commonjs的实现" aria-hidden="true">#</a> nodejs对CommonJS的实现</h3><p>为了实现CommonJS规范，nodejs对模块进行了以下处理</p><ul><li>为了保证高效的执行，仅加载必要的模块。nodejs<strong>只有执行到require函数时才加载并执行模块</strong></li><li>为了隐藏模块中的代码，nodejs执行模块时，会把模块中的所有代码放到一个函数中执行，以保证不污染全局变量。</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">//模块中的代码</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>为了保证顺利的导出模块的内容，nodejs做了以下处理</p><ul><li><p>在模块开始执行前，初始化一个值module.exports = { }</p></li><li><p>module.exports即为模块的导出值</p></li><li><p>为了方便开发者的导出，nodejs在初始化完module.exports后，又声明了一个变量<strong>exports = module.exports</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> exports <span class="token operator">=</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
	<span class="token comment">//模块中的代码</span>
	<span class="token keyword">return</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token comment">//因此也是可以这样导出、如果通过module.exports导出，相当于给它重新赋值，它和exports就不是指向同一个地址</span>
module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token literal-property property">getNumber</span><span class="token operator">:</span>getNumber<span class="token punctuation">,</span>
    <span class="token literal-property property">abc</span><span class="token operator">:</span><span class="token number">123</span>
<span class="token punctuation">}</span>

exports<span class="token punctuation">.</span>bcd<span class="token operator">=</span><span class="token number">666</span><span class="token punctuation">;</span>  <span class="token comment">//如果和上面module.exports同时导出，别的文件输出bcd为undefined，因为模块导出的是module.exports,module.exports={}时已经切断了和exports的联系，所以一般两个不一起用,除非module.exports.abc=123;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>为了避免反复加载同一个模块，nodejs默认开启了模块缓存，如果加载的模块已经被加载过，则会自动使用之前的导出结果</p></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//最后模块导出什么</span>
exports<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token string">&#39;a&#39;</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>b<span class="token operator">=</span><span class="token string">&#39;b&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>c<span class="token operator">=</span><span class="token string">&#39;c&#39;</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
    <span class="token literal-property property">d</span><span class="token operator">:</span><span class="token string">&#39;d&#39;</span>
<span class="token punctuation">}</span>

<span class="token comment">/*
    最终肯定是导出module.exports的对象，因为那算是重新赋值
	如果没有最后的module.exports赋值，那结果是{a:&#39;a&#39;,b:&#39;b&#39;,c:&#39;c&#39;}
	为什么this.c的内容也会赋值给导出模块呢？
	因为在commonjs的require内部实现，将模块代码放到一个函数里，这个函数会调用call来绑定module.exports，所以module.exports、this、exports指向同一对象
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="浏览器端模块化的难题" tabindex="-1"><a class="header-anchor" href="#浏览器端模块化的难题" aria-hidden="true">#</a> 浏览器端模块化的难题</h3><p><strong>CommonJS的工作原理</strong>：当require导入一个模块时，node会做以下两件事情（不考虑模块缓存）：</p><ol><li>通过模块路径找到本机文件，并读取文件内容</li><li>将文件的代码放到一个函数环境中执行，并将module.exports的值作为require函数的返回结果。</li></ol><p>可以认为，CommonJS是同步的。必须等到<strong>加载完文件并执行完代码</strong>才能继续向后执行</p><p><strong>当浏览器遇到CommonJS：</strong></p><ol><li>浏览器要加载Js文件，需要远程从服务器获取，而网络传输效率远低于node环境中读取本地文件。由于CommonJS是同步的，会极大降低运行性能。</li><li>如果读取JS文件并放到一个环境中执行，需要浏览器厂商的支持，但是厂商不愿意提供支持，最大的原因是CommonJS属于社区标准，并非官方标准</li></ol><p>远程加载js浪费时间？做成异步即可，加载完成后调用一个回调。</p><p>模块中的代码需要放置到函数中执行？编写模块时，直接放在函数中就行。</p><p>基于这种思路，出现了AMD和CMD规范，有效的解决了浏览器模块化的问题。</p><h3 id="amd" tabindex="-1"><a class="header-anchor" href="#amd" aria-hidden="true">#</a> AMD</h3><p>全称是Asynchronous Module Definition，异步模块定义。</p><p>require.js实现了AMD规范</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./require.js<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-main</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./index.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span> //data-main设置入口文件
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在AMD中，用<code>define()</code>定义模块，用<code>require()</code>加载模块。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span>依赖的模块列表<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">模块名称列表</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">//用形参接收对应的模块导出的内容</span>
	<span class="token comment">//模块内部的代码</span>
	<span class="token keyword">return</span> 导出的内容
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//后来改进了，require.js也实现了下面这种CMD规范</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">require<span class="token punctuation">,</span>exports<span class="token punctuation">,</span>module</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>b <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;tt&#39;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 定义math.js模块</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> basicNum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> x <span class="token operator">+</span> y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">add</span><span class="token operator">:</span> add<span class="token punctuation">,</span>
        <span class="token literal-property property">basicNum</span> <span class="token operator">:</span>basicNum
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 定义一个依赖underscore.js的模块</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;underscore&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">_</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token function-variable function">classify</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    _<span class="token punctuation">.</span><span class="token function">countBy</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> num <span class="token operator">&gt;</span> <span class="token number">30</span> <span class="token operator">?</span> <span class="token string">&#39;old&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;young&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">classify</span> <span class="token operator">:</span>classify
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 引用模块，将模块放在[]内</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;jquery&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;math&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$<span class="token punctuation">,</span> math</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> sum <span class="token operator">=</span> math<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#sum&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="cmd" tabindex="-1"><a class="header-anchor" href="#cmd" aria-hidden="true">#</a> CMD</h3><p>全称是Common Module Definition，公共模块定义规范</p><p>sea.js实现了CMD规范，它与AMD很类似，不同点在于：<strong>AMD 推崇依赖前置、提前执行</strong>，<strong>CMD推崇依赖就近、延迟执行</strong></p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>./sea.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span> //暴露了全局变量seajs
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	seajs<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&#39;./index.js&#39;</span><span class="token punctuation">)</span>	<span class="token comment">//设置入口文件</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/** AMD写法 ,require.js在申明依赖的模块时会在第一之间加载并执行模块内的代码：**/</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;e&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;f&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> e<span class="token punctuation">,</span> f</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
     <span class="token comment">// 等于在最前面声明并初始化了要用到的所有模块</span>
    a<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 即便没用到某个模块 b，但 b 还是提前执行了</span>
        b<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/** CMD写法 **/</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">require<span class="token punctuation">,</span> exports<span class="token punctuation">,</span> module</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./a&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//在需要时申明</span>
    a<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./b&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        b<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在CMD中，导入和导出模块的代码，都必须放在define函数中</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">require<span class="token punctuation">,</span>exports<span class="token punctuation">,</span>module</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    require<span class="token punctuation">.</span><span class="token function">async</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//异步导入</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    module<span class="token punctuation">.</span>exports<span class="token operator">=</span><span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&#39;tt&#39;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="umd" tabindex="-1"><a class="header-anchor" href="#umd" aria-hidden="true">#</a> UMD</h3><p>UMD是一种思想，是一种兼容commonjs，AMD，CMD的兼容写法。</p><p>UMD先判断支持nodejs的模块（exports）是否存在，存在则使用commonjs。再判断是否支持AMD，CMD，都不行就挂载到window全局对象</p><h3 id="es-module" tabindex="-1"><a class="header-anchor" href="#es-module" aria-hidden="true">#</a> ES Module</h3><p>特点：</p><ul><li>使用<strong>依赖预声明</strong>的方式导入模块 <ol><li>依赖延迟声明（CommonJS，执行到哪，需要才require） <ul><li>优点：某些时候可以提高效率</li><li>缺点：无法在一开始确定模块依赖关系（相对模糊）</li></ul></li><li>依赖预声明（类似AMD规范，一开始就列出所有依赖） <ul><li>优点：在一开始可以确定模块依赖关系</li><li>缺点：某些时候效率较低</li></ul></li></ol></li><li>灵活的多种导入、导出方式</li><li>规范的路径表示法，必须以./ 或 ../开头，路径无法使用模板字符串或变量，只有动态导入的时候可以</li><li>同时支持静态依赖和动态依赖(异步)</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 假设有一个模块 `math.js`，其中包含一个导出函数 `add`</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./math.js&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 假设 `add` 是一个导出函数</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;导入模块失败&#39;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//条件导入</span>
<span class="token keyword">const</span> moduleSpecifier <span class="token operator">=</span> condition <span class="token operator">?</span> <span class="token string">&#39;./moduleA.js&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;./moduleB.js&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span><span class="token punctuation">(</span>moduleSpecifier<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 根据条件导入的模块</span>
    module<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;导入模块失败&#39;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//按需导入</span>
document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;loadButton&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./heavyModule.js&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      module<span class="token punctuation">.</span><span class="token function">heavyFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;导入模块失败&#39;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//动态导入通常与 async/await 结合使用，使代码更清晰</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">loadModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> module <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./module.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    module<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;导入模块失败&#39;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">loadModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>目前浏览器使用以下方式引入一个ES6模块文件</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>入口文件<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>   //加上type=“module”后，就会把它当模块执行，里面的代码就不会污染全局
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>基本导出</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// export 声明语句 ,具名导出</span>
<span class="token comment">// a.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>


<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&#39;ww&#39;</span>
<span class="token keyword">export</span> name<span class="token punctuation">;</span> <span class="token comment">//报错，export后必须是声明语句,想用现有变量名导出，可以使用下面的方式</span>

<span class="token comment">//export {具名符号}   ,{}只是特殊语法，并不是指导出对象</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> name <span class="token punctuation">}</span>   <span class="token comment">//name变量的名称作为导出的名称，name的值作为导出的值</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token number">123</span> <span class="token punctuation">}</span>  <span class="token comment">//报错，再次提醒这不是对象，不能这样写</span>

<span class="token keyword">const</span> xixi<span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> haha<span class="token operator">=</span><span class="token number">789</span><span class="token punctuation">;</span>

<span class="token comment">//多次export{}都行，不会冲突</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span>
    xixi
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span>
    haha
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>基本导入</strong></p><p>由于使用的是<strong>依赖预加载</strong>，因此导入代码必须放置到所有代码之前。</p><ul><li>导入时可以通过关键字as对导入的符号进行重命名</li><li>导入时使用的符号是常量，不可修改</li><li>可以使用*号导入所有的基本导出，形成一个对象，需配合as</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// import {导入的符号列表} from &#39;模块路径&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> name <span class="token keyword">as</span> myName<span class="token punctuation">,</span> age<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./a.js&#39;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> obj <span class="token keyword">from</span> <span class="token string">&#39;./a.js&#39;</span>  
<span class="token keyword">import</span> <span class="token string">&#39;./c.js&#39;</span><span class="token comment">//单纯运行一次c模块的代码，不使用里面的任何导出的变量</span>

obj<span class="token punctuation">.</span>name  <span class="token comment">//123</span>
obj<span class="token punctuation">.</span>default  <span class="token comment">//a模块默认导出的内容也能访问到</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>默认导出</strong></p><p>每个模块只允许只有一个默认导出</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> 默认导出的数据
<span class="token comment">//或</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> 默认导出的数据 <span class="token keyword">as</span> <span class="token keyword">default</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>默认导入</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> 接收变量名 <span class="token keyword">from</span> <span class="token string">&#39;模块路径&#39;</span>
<span class="token keyword">import</span> 接收默认导出的变量<span class="token punctuation">,</span><span class="token punctuation">{</span>接收基本导出的变量<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;模块路径&#39;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> all <span class="token keyword">from</span> <span class="token string">&#39;模块路径&#39;</span>  

all<span class="token punctuation">.</span>default就是默认导出的内容

<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;模块路径&quot;</span><span class="token punctuation">)</span>	<span class="token comment">//动态导入（其他那些import from为静态导入，必须写在代码顶部）。返回一个Promise，完成时的数据为模块对象。</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>统一导出</strong></p><p>在项目中可能会构建出很多工具函数，可以使用一个js文件来统一导出，就不需要在引入的时候找具体文件，不过也可能会存在命名重复的情况，自己起别名就好</p><p><strong>export * from导出模块时，不会导出default模块</strong></p><p><strong>import * from导入模块时，如果有default模块，会连同default模块一起导入</strong></p><p>a.js:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token string">&#39;a里的a&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token string">&#39;a里的b&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token string">&#39;a里的default&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>b.js:</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token string">&#39;b里的a&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token string">&#39;b里的b&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token string">&#39;b里的default&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>c.js(统一导出文件):</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">&#39;./a.mjs&#39;</span>   <span class="token comment">// export * 不会导出default的值</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>index.js(使用模块的文件):</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> test <span class="token keyword">from</span> <span class="token string">&#39;./c.mjs&#39;</span><span class="token punctuation">;</span>   <span class="token comment">// 此时会报错，因为没有导出default，需要用下面那种取别名或按需导入</span>

<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> test <span class="token keyword">from</span> <span class="token string">&#39;./c.mjs&#39;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;test&#39;</span><span class="token punctuation">,</span>test<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果还需要把a.js里的default导出，需要重新导出</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//c.js:</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">&#39;./a.mjs&#39;</span>  
<span class="token keyword">export</span> <span class="token punctuation">{</span> <span class="token keyword">default</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./a.mjs&#39;</span>  <span class="token comment">//当只导出默认内容时无法 export xx from &#39;./test.js&#39;</span>

<span class="token comment">//或者</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token keyword">default</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./a.mjs&quot;</span><span class="token punctuation">;</span>

<span class="token comment">//index.js:</span>
<span class="token keyword">import</span> test<span class="token punctuation">,</span><span class="token operator">*</span> <span class="token keyword">as</span> Test <span class="token keyword">from</span> <span class="token string">&#39;./c.mjs&#39;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;test&#39;</span><span class="token punctuation">,</span>test<span class="token punctuation">,</span>Test<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果此时c.js再引入多一个模块，存在同名变量</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token punctuation">{</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token keyword">default</span> <span class="token keyword">as</span> c <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./a.mjs&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">&quot;./b.mjs&quot;</span><span class="token punctuation">;</span>  
<span class="token comment">// 会发现导出的a，b，c都是a模块里的值，但它不会报错</span>

<span class="token comment">//如果这样导出就会报错重复声明</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token keyword">default</span> <span class="token keyword">as</span> c <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./a.mjs&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> a<span class="token punctuation">,</span> b <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./b.mjs&quot;</span><span class="token punctuation">;</span>

<span class="token comment">//正确导出：</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> <span class="token keyword">default</span> <span class="token keyword">as</span> c <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./a.mjs&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">as</span> obj <span class="token keyword">from</span> <span class="token string">&quot;./b.mjs&quot;</span><span class="token punctuation">;</span>

<span class="token comment">/*
	import * as Test from &#39;./c.mjs&#39;;
	console.log(&#39;test&#39;,Test)
	输出结果
*/</span>
test <span class="token punctuation">[</span>Module<span class="token operator">:</span> <span class="token keyword">null</span> prototype<span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">&#39;a里的a&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">&#39;a里的b&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token string">&#39;a里的default&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">obj</span><span class="token operator">:</span> <span class="token punctuation">[</span>Module<span class="token operator">:</span> <span class="token keyword">null</span> prototype<span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">&#39;b里的a&#39;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">&#39;b里的b&#39;</span><span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&#39;b里的default&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>所以多模块统一文件导出时，还是模块取别名比较好</p><h3 id="es6-module-和-commonjs的差异" tabindex="-1"><a class="header-anchor" href="#es6-module-和-commonjs的差异" aria-hidden="true">#</a> ES6 module 和 CommonJs的差异</h3><p>ESM是<strong>官方标准</strong>通过新语法使用，CMJ是<strong>社区标准</strong>通过函数实现。</p><p><strong>CommonJs模块输出的是一个值的拷贝，ES6模块输出的是值的引用</strong></p><p>当你导入一个模块时，得到的是模块导出的值的一个静态快照（拷贝）。这意味着，如果模块内部改变了导出的值，但你在导入模块的地方没有重新导入（或重新运行），你得到的仍然是初始的那个值的拷贝，而不是最新的值。</p><p>证明：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// a.js</span>
<span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span> value <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  value <span class="token operator">=</span> <span class="token number">666</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// b.js</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./a&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：1</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 仍然输出：1</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>而ES module</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// a.mjs</span>
<span class="token keyword">export</span> <span class="token keyword">let</span> value <span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  value <span class="token operator">=</span> <span class="token number">666</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// b.mjs</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>value<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./a.mjs&#39;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：1</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出：666</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>还有这么一种情况：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// a.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;执行a&#39;</span><span class="token punctuation">)</span>
exports<span class="token punctuation">.</span>count<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">add</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// b.js</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./a.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;b&#39;</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
b<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;add后b&#39;</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./c.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// c.js</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./a.js&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;执行c&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;c&#39;</span><span class="token punctuation">,</span>c<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
c<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;add后c&#39;</span><span class="token punctuation">,</span>c<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/*
执行b.js,结果：

	执行a
	b 1
	add后b 2
	执行c
	c 2
	add后c 3
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>它看似是导入了值的引用，实际上是因为在c文件中require时，检测到a文件已导入，直接使用的缓存对象</p><p><strong>CommonJs模块是运行时加载，ES6模块是编译时输出接口</strong></p><p>ES6的import必须静态写死，而require可以是动态确定资源路径，如在路径里写模板字符串</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 有效的静态导入</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> myFunction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./myModule.js&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// 无效的动态路径（会导致语法错误）</span>
<span class="token keyword">const</span> modulePath <span class="token operator">=</span> <span class="token string">&#39;./myModule.js&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> myFunction <span class="token punctuation">}</span> from modulePath<span class="token punctuation">;</span> <span class="token comment">// ❌</span>

<span class="token comment">// 动态导入示例</span>
<span class="token keyword">const</span> modulePath <span class="token operator">=</span> <span class="token string">&#39;./myModule.js&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span><span class="token punctuation">(</span>modulePath<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    module<span class="token punctuation">.</span><span class="token function">myFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;导入模块失败&#39;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>CommonJs模块的require是同步加载模块，ES6的import是异步加载</strong></p><p>ESModule其实也不完全算是异步加载，只是引擎在模块运行之前就已处理了模块的加载</p><ul><li><p>ES6 的 <code>import</code> 是静态导入，在编译时（而非运行时）解析依赖关系。</p></li><li><p>在模块运行之前，所有 <code>import</code> 语句已经被解析和加载完成。这种加载方式虽然在语法上看起来像是同步的，但实际上，JavaScript 引擎在编译时已经处理了这些导入，<strong>因此在代码执行时不再需要等待模块加载</strong>。</p></li></ul><p><strong>注：从Node v13.2开始，Node.js已经默认打开了ES6模块支持，它要求ES6模块采用.mjs后缀文件名,默认开启严格模式.</strong></p></div><!--[--><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><nav class="page-nav"><p class="inner"><!----><span class="next"><a href="/xjblog/js/typescript.html" class="" aria-label="typescript"><!--[--><!--]--> typescript <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/xjblog/assets/app-6fcf50f1.js" defer></script>
  </body>
</html>
